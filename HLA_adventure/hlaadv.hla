// -------------------------------------------------------
// "HLA Adventure" (Version 3.40)
// -------------------------------------------------------
// By: Paul Panks (dunric@yahoo.com)
// Web: http://www.geocities.com/dunric/hlaadv.html
// Release: Public Domain (05/15/2003)
// Updated: 11/17/2005 (finally, right?) :)
// Bug-fixed by: Frank Kotler, Randy Hyde, many others...
// With code additions suggested by: Jon Ripley
// -------------------------------------------------------
// A smaller version of Westfront PC written
//   in HLA/Assembly. Version 3.40                    /PAP
// -------------------------------------------------------
// Requires HLA version 1.49 or greater to compile    /PAP
// ** Tested and compiled on version 1.72 of HLA **   /PAP
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= 
// Make certain that wincons.lib and console.hhf are
//   in the appropriate directory (MASM/INCLUDE)      /PAP
// -------------------------------------------------------
// Source code edited in Gedit (a GNOME text editor)  /PAP
// Under Windows XP, it is readable in Notepad        /PAP
// -------------------------------------------------------
// Go Suns! Amare Stoudemire is awesome!              /PAP
// -------------------------------------------------------

// PAUL: search source for /SEVAG to see some of the 
// Changes I've made
//========================================================

program westf;
// -------------------------------------------------------
// Include all the important stuff, like file I/O     /PAP
// -------------------------------------------------------
#include( "console.hhf");
#include( "stdlib.hhf");
#include( "conv.hhf");
#include( "fileio.hhf");
#include( "math.hhf");
#include( "rand.hhf");
#include( "strings.hhf");
#include( "tables.hhf");
// -------------------------------------------------------
// QPut macro suggested by Randall Hyde on 05/25/2005 /PAP
// Similar to PowerBASIC's QPRINT command...          /PAP
// (or maybe the System/360 people like our style?) :)/PAP
// Never really learned PL/I (sniff...) :(            /PAP
// (Where's a good beer when you need one?)           /PAP
// -------------------------------------------------------
#macro qput( x, y, stuffToPrint[]):_i_;
 returns
  (
   {
    console.saveCursor();
    console.gotoxy( x, y );
    #for(_i_ in stuffToPrint )

     stdout.put( @text(_i_) );

    #endfor
    console.restoreCursor();
   },
   "eax"
  )
#endmacro

// -------------------------------------------------------
// Procedure strmatch...why is this code still here?  /PAP
// Maybe Dr. Pepper knows? (Artificially flavored?)   /PAP
// ---------------------------------------------------------
// I'll add my comments, this is no longer 
// necessary							/SEVAG
//-----------------------------------------------------------
//procedure strmatch( s1:string; s2:string; mustMatch:uns32); @returns("eax");
//begin strmatch;
//push( esi );
//push( edi );
//push( ecx );
//cld();
//mov( s2, esi ); // Get ptr to string to test
//mov( s1, edi ); // Get ptr to command string
//mov( (type str.strRec [esi]).length, ecx ); // Get length of cmd string
//mov( ecx, eax ); // Save length to test for complete failure.
//repe.cmpsb(); // Compare the strings to the point they don't match.
//sub( ecx, eax ); // Compute number of matched chars
//cmp( eax, mustMatch ); // See if we matched enough chars.
//setae( al ); // Set AL true if we matched enough chars.
//and( 1, eax ); // Zero extend to EAX.
//pop( ecx );
//pop( edi );
//pop( esi );
//end strmatch;

// matchword procedure						/SEVAG
// this procedure attempts to match the word "matchstr" as
// a prefix to "src", also makes sure a space or return follows
// the word.
// This is the main procedure to check for verbs.
procedure matchword ( src: string; matchstr:string); @returns ("eax");
begin matchword;
	push (esi);
	push (edi);
	push (ecx);
	cld();
	mov (src, edi);	// pointer to source
	mov (matchstr, esi); // pointer to string to match
	mov ( (type str.strRec[esi]).length, ecx); // length of string to match
	repe.cmpsb();
	if (@e) then
		// matched required characters, now see if a shite space or end of string follows
		mov ([edi], al);
		if (al = ' ' || al = 0) then
			mov (true, eax);
		else
			xor (eax, eax);
		endif;
	else
		xor (eax, eax);
	endif;
	pop (ecx);
	pop (edi);
	pop (esi);
end matchword;


// -------------------------------------------------------
// Common variables. All the stuff we need to set at start
// -------------------------------------------------------
static
wf:int32:=0;
static
g:int32:=200;
h:int32:= 100;
fd:int32:= 250;
e:int32:= 0;
k:int32:= 0;
qs:int32:=1;
val l:= 0;
static
i:int32:= 1;
val d:= 1;
val a:= 1;
u:int32:= 0;
val c:= 0;
static
slp:int32:=0;
static
tsk:int32:=0;
static
r:int32:=10;
static
mh:int32;
static
dam:int32:=1;
outFileVar:dword;
static
FileVar:dword;
static
// -------------------------------------------------------
// Reserved variables. Don't ask why (why?)           /PAP
// -------------------------------------------------------
val x:= 0;
static
z:int32;
static
j:int32;
s:int32;
static
w: string;
static
stal:string;
// -------------------------------------------------------
// All the game-related arrays and variables          /PAP
// -------------------------------------------------------
six:int32:=6;
temproom:int32;
lo: int32[75]:=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75];
// -------------------------------------------------------
// Strings for all other uses                         /PAP
// -------------------------------------------------------
no: string[75]:=["north","south","east","west","up","down","lantern","oil","rope","key","bottle","dagger","sword","axe","scimitar","longsword","broadsword","battleaxe","cleaver","armor","shield","helmet","gauntlets","cloak","ring","clerk","villager","wolf","warrior","ghost","goblin","elf","hobbit","paladin","skeleton","vampire","sorcerer","dragon","knight","barbarian","board","bear","kingcrab","crab","thief","werewolf","butler","eddie","bum","portal","food","demigorgon","monk","kukai","shroud","buckler","flute","hellhound","apple","rations","ghoul","valkyrie","lich","Tursk","wannabee","horn","firewhip","anklet","boomerang","golem","wisp","goat","kobold","eagle","unicorn"];
static
// -------------------------------------------------------
// Frank Kotler's bug fix for the map. Quite nice!    /PAP
// -------------------------------------------------------
               // N  S  E  W  U  D
m:int32[6 * 250]:=[0, 0, 0, 0, 0, 0,      // room 0 (invalid?)
                  0, 5, 0, 0, 2, 0,      // room 1
                  0, 0, 4, 0, 0, 1,      // 2
                  0, 0, 0, 5, 0, 0,      // 3
                  0, 0, 0, 2, 0, 0,      // 4
                  1, 6, 3, 0, 0, 0,    // 5
                  5, 11, 7, 10, 0, 0,      // 6
                  8, 0, 0, 6, 0, 0,      // 7
                  0, 7, 9, 0, 0, 0,      // 8
                  0, 0, 0, 8, 0, 0,      // 9
                  0, 0, 6, 0, 0, 0,      // 10
                  6, 12, 0, 0, 0, 0,      // 11
                  11, 13, 0, 224, 0, 0,      // 12
                  12, 14, 198, 0, 0, 0,      // 13
                  13, 28, 22, 29, 0, 199,      // 14
                  0, 19, 0, 0, 0, 0,      // 15
                  0, 20, 0, 0, 0, 0,      // 16
                  0, 0, 18, 0, 0, 0,      // 17
                  0, 0, 0, 17, 0, 0,      // 18
                  15, 22, 20, 0, 0, 0,      // 19
                  16, 23, 21, 19, 0, 0,      // 20
                  0, 0, 97, 20, 0, 0,      // 21
                  19, 27, 23, 14, 0, 0,      // 22
                  20, 26, 24, 22, 0, 0,      // 23
                  0, 0, 0, 23, 0, 0,      // 24
                  0, 0, 0, 26, 0, 0,      // 25
                  23, 0, 25, 0, 0, 0,      // 26
                  22, 43, 0, 0, 0, 0,      // 27
                  14, 42, 0, 0, 0, 0,      // 28
                  0, 0, 14, 30, 0, 0,      // 29
                  0, 0, 29, 31, 0, 0,      // 30
                  32, 0, 30, 34, 0, 0,      // 31
                  33, 31, 0, 0, 0, 0,      // 32
                  0, 32, 0, 0, 0, 0,      // 33
                  35, 0, 31, 38, 0, 0,      // 34
                  36, 34, 0, 0, 0, 0,      // 35
                  0, 35, 0, 0, 0, 0,      // 36
                  38, 0, 0, 41, 0, 0,      // 37
                  39, 37, 34, 40, 0, 0,      // 38
                  73, 38, 0, 0, 0, 0,      // 39
                  189, 0, 38, 0, 0, 0,      // 40
                  0, 0, 37, 0, 0, 0,    // 41
                  28,48,0,45,0,0,       // 42
                  27,49,44,0,0,0,       // 43
                  0,50,0,43,0,0,        // 44
                  0,47,42,0,0,0,        // 45
                  0,52,47,0,0,0,        // 46
                  45,53,0,46,0,0,       // 47
                  42,54,0,0,0,0,        // 48
                  43,55,0,0,0,0,        // 49
                  44,0,51,0,0,0,        // 50
                  0,57,0,50,0,0,        // 51
                  46,59,53,0,0,0,       // 52
                  47,60,54,52,0,0,      // 53
                  48,61,0,53,0,0,       // 54
                  49,0,0,0,0,0,         // 55
                  0,63,0,0,0,0,         // 56
                  51,0,0,0,0,0,         // 57
                  0,0,59,0,0,0,         // 58
                  52,65,60,58,0,0,      // 59
                  53,66,0,59,0,0,       // 60
                  54,67,0,0,0,0,        // 61
                  0,0,63,0,0,0,         // 62
                  56,68,64,62,0,0,      // 63
                  0,0,0,63,0,0,         // 64
                  59,0,0,0,0,0,         // 65
                  60,0,0,0,0,0,         // 66
                  61,70,0,0,0,0,        // 67
                  63,0,0,0,71,0,         // 68
                  0,0,70,0,0,0,         // 69
                  67,72,71,69,0,0,      // 70
                  0,0,0,70,0,68,         // 71
                  70,0,0,0,0,0,         // 72
                  80,39,74,0,0,0,       // 73
                  0,0,0,73,0,0,         // 74
                  78,0,76,0,0,0,        // 75
                  0,0,77,75,0,0,        // 76
                  0,0,0,76,0,0,         // 77
                  87,75,79,0,0,0,       // 78
                  0,0,0,78,0,0,         // 79
                  85,73,0,81,0,0,       // 80
                  0,0,80,0,0,0,         // 81
                  83,0,0,0,0,0,         // 82
                  91,82,84,0,0,0,       // 83
                  90,0,85,83,0,0,       // 84
                  89,80,86,84,0,0,      // 85
                  88,0,87,85,0,0,       // 86
                  0,78,0,86,0,0,        // 87
                  0,86,0,0,0,0,         // 88
                  93,85,0,0,0,0,        // 89
                  0,84,0,0,0,0,         // 90
                  92,83,0,0,0,0,        // 91
                  95,91,0,0,0,0,        // 92
                  94,89,0,0,0,0,        // 93
                  0,93,0,0,0,0,         // 94
                  0,92,0,0,0,0,         // 95
                  0,0,0,0,0,0,          // 96
                  98,0,102,21,0,0,      // 97
                  0,97,0,0,0,0,         // 98
                  97,0,0,0,0,0,         // 99
                  0,101,138,0,0,0,      // 100
                  100,102,0,0,0,0,      // 101
                  101,103,0,97,0,0,     // 102
                  102,104,0,0,0,0,      // 103
                  103,106,0,0,0,0,      // 104
                  0,0,0,0,0,0,          // 105
                  104,0,107,0,0,0,      // 106
                  0,0,112,106,0,0,      // 107
                  0,110,109,0,0,0,      // 108
                  0,111,113,108,0,0,    // 109
                  108,0,111,0,0,0,      // 110
                  109,0,0,110,0,0,      // 111
                  0,113,0,107,0,0,      // 112
                  112,0,115,109,0,0,    // 113
                  0,115,117,0,0,0,      // 114
                  114,0,118,113,0,0,    // 115
                  0,117,119,0,0,0,      // 116
                  116,118,120,114,0,0,  // 117
                  117,0,121,115,0,0,    // 118
                  0,0,0,116,0,0,        // 119
                  0,121,122,117,0,0,    // 120
                  120,0,0,118,0,0,      // 121
                  0,0,123,120,0,0,      // 122
                  137,0,0,122,0,0,      // 123
                  126,0,0,0,0,0,        // 124
                  0,0,126,0,0,0,        // 125
                  128,124,127,125,0,0,  // 126
                  0,0,0,126,0,0,         // 127
                  139,126,0,0,0,0,       // 128
                  141,130,0,0,0,0,       // 129
                  129,0,132,0,0,0,       // 130
                  0,132,0,0,0,0,         // 131
                  131,133,134,130,0,0,   // 132
                  132,0,0,0,0,0,         // 133
                  0,0,0,132,0,0,         // 134
                  0,0,0,0,0,136,         // 135
                  0,0,0,0,135,137,       // 136
                  0,123,0,0,136,0,       // 137
                  142,0,139,100,0,0,     // 138
                  0,128,140,138,0,0,     // 139
                  143,0,141,139,0,0,     // 140
                  144,129,0,140,0,0,     // 141
                  147,138,0,146,0,0,     // 142
                  149,140,0,0,0,0,       // 143
                  0,141,145,0,0,0,       // 144
                  151,0,0,144,0,0,       // 145
                  0,0,147,0,0,0,         // 146
                  0,142,0,146,0,0,       // 147
                  0,0,149,0,0,0,         // 148
                  0,143,150,148,0,0,     // 149
                  0,0,0,149,0,0,         // 150
                  157,145,0,0,0,0,        // 151
                  156,0,0,0,0,0,          // 152
                  157,151,0,0,0,0,        // 153
                  0,0,155,0,0,0,          // 154
                  159,0,156,154,0,0,      // 155
                  160,152,157,155,0,0,    // 156
                  161,153,158,156,0,0,    // 157
                  162,0,0,157,0,0,        // 158
                  0,155,0,0,0,0,          // 159
                  0,156,0,0,0,0,          // 160
                  165,157,0,0,0,0,        // 161
                  0,158,0,0,0,0,          // 162
                  0,0,164,0,0,0,          // 163
                  168,0,0,163,0,0,        // 164
                  169,161,0,0,0,0,        // 165
                  170,0,0,0,0,0,          // 166
                  0,0,168,0,0,0,          // 167
                  171,164,169,167,0,0,    // 168
                  0,165,170,168,0,0,      // 169
                  0,166,0,169,0,0,        // 170
                  0,168,0,0,0,0,         // 171
                  193,175,185,173,0,0,    // 172
                  0,188,172,174,0,0,      // 173
                  182,0,173,0,0,0,        // 174
                  172,179,180,188,0,0,    // 175
                  190,0,177,0,0,0,        // 176
                  0,0,178,176,0,0,        // 177
                  182,0,0,177,0,0,        // 178
                  175,181,0,0,0,0,        // 179
                  0,0,183,175,0,0,        // 180
                  179,189,0,0,0,0,        // 181
                  0,178,0,0,0,0,          // 182
                  185,0,184,180,0,0,      // 183
                  0,0,0,183,0,0,          // 184
                  0,183,186,172,0,0,      // 185
                  187,0,0,185,0,0,        // 186
                  197,186,0,0,0,0,        // 187
                  173,0,175,0,0,0,        // 188
                  181,40,0,0,0,0,         // 189
                  191,176,0,0,0,0,        // 190
                  192,190,0,0,0,0,        // 191
                  0,191,193,0,0,0,        // 192
                  193,172,194,192,0,0,    // 193
                  0,196,195,193,0,0,      // 194
                  0,0,0,194,0,0,          // 195
                  194,197,0,0,0,0,        // 196
                  196,187,0,0,0,0,        // 197
                  0,0,0,13,223,0,         // 198
                  0,200,0,0,14,0,         // 199
                  199,209,201,206,0,0,    // 200
                  0,0,202,200,0,0,        // 201
                  0,0,203,201,0,0,        // 202
                  204,0,0,202,0,0,        // 203
                  0,203,0,0,0,0,          // 204
                  0,0,0,0,0,0,            // 205
                  0,207,200,0,0,0,        // 206
                  206,0,208,0,0,0,        // 207
                  0,0,0,207,0,0,          // 208
                  200,0,210,211,0,0,      // 209
                  0,0,0,209,0,0,          // 210
                  0,212,209,0,0,0,        // 211
                  211,0,0,0,213,0,        // 212
                  0,214,0,0,0,212,        // 213
                  213,215,0,0,0,0,        // 214
                  214,216,0,0,0,0,        // 215
                  215,217,0,0,0,0,        // 216
                  216,218,0,0,0,0,        // 217
                  217,0,219,0,0,0,        // 218
                  0,0,220,218,0,0,        // 219
                  0,0,221,219,0,0,        // 220
                  0,0,222,220,0,0,        // 221
                  0,0,0,221,0,0,          // 222
                  0,0,0,0,0,198,          // 223
                  0,0,12,225,0,0,         // 224
                  226,0,224,0,0,0,        // 225
                  227,225,0,0,0,0,        // 226
                  230,226,228,229,0,0,    // 227
                  0,0,0,227,0,0,          // 228
                  0,236,227,0,0,0,        // 229
                  0,227,231,0,0,0,        // 230
                  232,0,0,230,0,0,        // 231
                  0,231,0,0,0,0,           // 232
                  0,232,0,234,0,0,        // 233
                  0,0,233,235,0,0,        // 234
                  0,0,234,0,0,0,          // 235
                  229,0,0,237,0,0,        // 236
                  0,0,236,0,0,238,        // 237
                  0,0,0,239,237,0,        // 238
                  240,246,238,0,0,0,      // 239
                  249,239,0,241,0,0,      // 240
                  0,0,240,242,0,0,        // 241
                  243,0,241,0,0,0,        // 242
                  0,242,0,0,244,0,        // 243
                  0,0,245,0,0,243,        // 244
                  0,0,0,244,0,0,          // 245
                  239,0,247,0,0,0,        // 246
                  0,248,0,246,0,0,        // 247
                  247,0,0,0,0,0,          // 248
                  0,240,249,249,0,0];     // 249
// -------------------------------------------------------
// More rooms later on, but 249 will do nicely for now...
// -------------------------------------------------------
// A few more string declarations go here...          /PAP
// -------------------------------------------------------
exa:string[75]:=["You can't examine that.",               // 1
                 "You can't examine that.",               // 2
                 "You can't examine that.",               // 3
                 "You can't examine that.",               // 4
                 "You can't examine that.",               // 5
                 "You can't examine that.",               // 6
                 "A brass lantern with rusted hinges.",   // 7
                 "A flask of oil used with the lantern.", // 8
                 "A coil of rope about 20' long.",        // 9
                 "A small wooden key.",                   // 10
                 "A smoked glass bottle.",                // 11
                 "A small metal dagger with a jeweled hilt.", // 12
                 "A small metal sword with a diamond hilt.", // 13
                 "A sharp metal axe. It is dual bladed.", // 14
                 "A gleaming metal scimitar. It looks deadly.", // 15
                 "A metal longsword with a ruby hilt.", // 16
                 "A long metal broadsword with a sapphire hilt.", // 17
                 "A sturdy metal battleaxe. It looks sharp and lethal.", // 18
                 "A dull meat cleaver, unevenly sharpened.", // 19
                 "A fine suit of chain-linked armor.", // 20
                 "A crusader shield stained with blood.", // 21
                 "A sturdy brass helmet.", // 22
                 "A pair of full metal gauntlets.", // 23
                 "An elven cloak tied at the waist by a small rope.", // 24
                 "A magical ring of protection. It glows with a soft hue.", // 25
                 "A stout clerk. He looks well fed.", // 26
                 "A common villager. He smiles at you briefly before passing.", // 27
                 "A friendly wolf with yellow eyes. He seems content on watching you.", // 28
                 "A warrior with flowing hair and a trim beard. He looks mean.", // 29
                 "A translucent specter. It haunts the surrounding forest.", // 30
                 "An ugly goblin with brown teeth. He looks vicious and cunning.", // 31
                 "An elf of the surrounding forest. He seems peaceful.", // 32
                 "A small hobbit with furry feet.", // 33
                 "A strong paladin wearing a metal pendant. He seems of noble blood.", // 34
                 "An undead skeleton. He is covered with blood and rotting flesh.", // 35
                 "An evil vampire. He sucks the blood of unwitting victims.", // 36
                 "Once honorable, this sorcerer has turned to the arts of black magic.", // 37
                 "A large dragon with tough scales and powerful claws.", // 38
                 "An unholy knight, he serves only those with impure hearts.", // 39
                 "A savage barbarian. He craves destruction and greed.", // 40
                 "This is a small bulletin board. It reads (briefly):", // 41
                 "A large grizzly bear. It looks dangerous!", // 42
                 "This is a large kingcrab. It has claws and several legs.", // 43
                 "This is a small crab. It has claws and several legs.", // 44
                 "A no-good thief.", // 45
                 "This vicious werewolf eyes you with a deadly gaze.", // 46
                 "A tall butler. He looks old and cranky.", // 47
                 "This is eddie. He managed to get up here (somehow...)", // 48
                 "A beach bum. He appears to be drinking something.", // 49
                 "This is a portal between dimensions. Where it leads is unknown.", // 50
                 "These are standard food rations, lasting two weeks.", // 51
                 "This is an EVIL demigorgon! He has towering wings and strong claws!", // 52
                 "A simple monk, pious and forthright. He seems very peaceful.", // 53
                 "This is Kukai, founder of the Shinden Villa. He smiles at you with wisdom.", //54
                 "This is the holy shroud of Saint Nepan, an ancient cleric of the temple.", //55
                 "A wooden buckler. Useful as a shield.", //56
                 "A small wooden flute. You can 'play flute' to hear music.", //57
                 "A large hellhound with fiery eyes. It guards the entrance to the caverns.", //58
                 "A small red apple. It looks slightly rotten.",//59
                 "These are standard iron rations (lasting two weeks).",//60
                 "This nearly invisible spectre guards the surrounding tomb.",//61
                 "A magical valkyrie with flowing red hair. It has an impish look to it.",//62
                 "A shadowy creature moving about the darkness. It looks like death!",//63
                 "This is Tursk, an adventurer from out of town. He might prove useful.",//64
                 "This is a monster known as a 'wannabee'. It flutters around like a normal bee,  but is invincible to attacks and unable to damage the player. The game will     enter into an infinite loop if an unsuspecting player decides to attack it.",//65
                 "This is the magical horn of Galius. You can 'blow horn' to disrupt magic.",//66
                 "A flaming whip with a magical aura about it. It looks deadly!",//67
                 "A glistening anklet worn around the ankles. Offers good protection.",//68
                 "A small wooden boomerang. It is slightly curved.",//69
                 "A giant stone golem. It looks massive enough to crush boulders!",//70
                 "A magical will o' the wisp. It flutters about, illuminating the darkness.",//71
                 "A small goat. It looks a bit lost.",//72
                 "An evil kobold. It guards a sacred treasure, or so legend has it.",//73
                 "A bald eagle (quite rare in these parts). It has massive wings!",//74
                 "A magical unicorn with a large horn. It looks very majestic!"];//75
// -------------------------------------------------------
// Now we begin the actual program!
// If assembly scares you, try to drink some beer and it
//    will wash out with time...                      /PAP
// -------------------------------------------------------
begin westf;
// We need to multiply ebx by 4 because 32-bit integers are 4-bytes
// Not my fix. Suggested by someone on aoaprogramming yahoo group.
mov(7,ebx);
mov(4,lo[ebx*4]); // put lantern in small room r#4
mov(8,ebx);
mov(99,lo[ebx*4]); // put oil in shop inventory r#99
mov(9,ebx);
mov(9,lo[ebx*4]); // put rope in storage room r#9
mov(10,ebx);
mov(9,lo[ebx*4]); // put key in storage room r#9
mov(11,ebx);
mov(18,lo[ebx*4]); // put bottle in grassroof hut r#18
mov(12,ebx);
mov(24,lo[ebx*4]); // put dagger in cottage r#24
mov(13,ebx);
mov(99,lo[ebx*4]); // put sword in shop inventory r#99
mov(14,ebx);
mov(1031,lo[ebx*4]); // put axe on goblin r#1031
mov(15,ebx);
mov(1034,lo[ebx*4]); // put scimitar on paladin r#1034
mov(16,ebx);
mov(1035,lo[ebx*4]); // put longsword on skeleton r#1035
mov(17,ebx);
mov(1029,lo[ebx*4]); // put broadsword on warrior (for the hell of it) r#1029
mov(18,ebx);
mov(18,lo[ebx*4]); // put battleaxe in hut r#18
mov(19,ebx);
mov(99,lo[ebx*4]); // put cleaver in shop inventory r#99
mov(20,ebx);
mov(1034,lo[ebx*4]); // put armor on paladin r#1034
mov(21,ebx);
mov(1034,lo[ebx*4]); // paladin also carries the shield r#1034
mov(22,ebx);
mov(1031,lo[ebx*4]); // put helmet on goblin r#1031
mov(23,ebx);
mov(1029,lo[ebx*4]); // put gauntlets on warrior r#1029
mov(24,ebx);
mov(1032,lo[ebx*4]); // put cloak on elf r#1032
mov(25,ebx);
mov(1032,lo[ebx*4]); // elf also has ring r#1032
mov(26,ebx);
mov(3,lo[ebx*4]); // put clerk in shop r#3
mov(27,ebx);
mov(6,lo[ebx*4]); // put villager at well r#6
mov(28,ebx);
mov(14,lo[ebx*4]); // put wolf at intersection r#14
mov(29,ebx);
mov(30,lo[ebx*4]); // put warrior at winding road r#30
mov(30,ebx);
mov(20,lo[ebx*4]); // put ghost in Redwood forest r#20
mov(31,ebx);
mov(22,lo[ebx*4]); // put goblin in Path r#22
mov(32,ebx);
mov(27,lo[ebx*4]); // put elf in Rolling Hills r#27
mov(33,ebx);
mov(18,lo[ebx*4]); // put hobbit in Grassroof hut r#18
mov(34,ebx);
mov(10,lo[ebx*4]); // put paladin in Village guild r#10
mov(35,ebx);
mov(85,lo[ebx*4]); // put skeleton in Caverns r#85
mov(36,ebx);
mov(94,lo[ebx*4]); // put vampire in Caverns r#72
mov(37,ebx);
mov(72,lo[ebx*4]); // put sorcerer in Caverns r#94
mov(38,ebx);
mov(94,lo[ebx*4]); // put dragon in Caverns r#94
mov(39,ebx);
mov(67,lo[ebx*4]); // put knight in castle moat r#67
mov(40,ebx);
mov(54,lo[ebx*4]); // put barbarian on bridge r#54
mov(41,ebx);
mov(10,lo[ebx*4]); // put board in guild r#10
mov(42,ebx);
mov(102,lo[ebx*4]); // put bear in rwf r#102
mov(43,ebx);
mov(117,lo[ebx*4]); // put kingcrab on beach r#117
mov(44,ebx);
mov(117,lo[ebx*4]); // put lobster on beach r#117
mov(45,ebx);
mov(141,lo[ebx*4]); // put thief on path junction r#141
mov(46,ebx);
mov(151,lo[ebx*4]); // put werewolf near mansion r#151
mov(47,ebx);
mov(161,lo[ebx*4]); // put butler in mansion living room r#161
mov(48,ebx);
mov(135,lo[ebx*4]); // put "eddie" at top of lighthouse r#135
mov(49,ebx);
mov(109,lo[ebx*4]); // put bum on beach (western edge) r#109
mov(50,ebx);
mov(-2,lo[ebx*4]); // put portal in -2 dimension r#-2
mov(51,ebx);
mov(4,lo[ebx*4]); // put food in upstairs of tavern r#4
mov(52,ebx);
mov(53,lo[ebx*4]); // put demigorgon in ??? r#53
mov(53,ebx);
mov(172,lo[ebx*4]); // put monk before Shinden Villa r#172
mov(54,ebx);
mov(184,lo[ebx*4]); // put kukai east of Zen Gardens r#184
mov(55,ebx);
mov(193,lo[ebx*4]); // put shroud in Shinden Villa Main r#193
mov(56,ebx);
mov(204,lo[ebx*4]); // put buckler in Sacred Keep r#204
mov(57,ebx);
mov(10,lo[ebx*4]); // put flute in guild r#10
mov(58,ebx);
mov(14,lo[ebx*4]); // put hellhound at intersection r#14
mov(59,ebx);
mov(223,lo[ebx*4]); // put apple in apple tree r#223
mov(60,ebx);
mov(1,lo[ebx*4]); // put rations in tavern r#1
mov(61,ebx);
mov(209,lo[ebx*4]); // put ghoul in pool near waterfall r#209
mov(62,ebx);
mov(212,lo[ebx*4]); // put valkyrie in cavern r#212
mov(63,ebx);
mov(210,lo[ebx*4]); // put lich at waterfall r#210
mov(64,ebx);
mov(200,lo[ebx*4]); // put Turk at cavern intersection r#200
mov(65,ebx);
mov(223,lo[ebx*4]); // put wannabee in apple tree r#223
mov(66,ebx);
mov(232,lo[ebx*4]); // put horn near the Misty Cave r#232
mov(67,ebx);
mov(1070,lo[ebx*4]); // put firewhip on giant golem r#1070
mov(68,ebx);
mov(1073,lo[ebx*4]); // put anklet on kobold r#1073
mov(69,ebx);
mov(245,lo[ebx*4]); // put boomerang in eagle's nest r#245
mov(70,ebx);
mov(234,lo[ebx*4]); // put giant golem in tunnel r#234
mov(71,ebx);
mov(230,lo[ebx*4]); // put will o' the wisp in misty mountains r#230
mov(72,ebx);
mov(236,lo[ebx*4]); // put goat in misty mountains r#236
mov(73,ebx);
mov(235,lo[ebx*4]); // put kobold in sacred keep r#235
mov(74,ebx);
mov(245,lo[ebx*4]); // put eagle in eagle's nest r#245
mov(75,ebx);
mov(249,lo[ebx*4]); // put unicorn near the mossy pond r#249
// -------------------------------------------------------
// Sorry Frank, had to add in all the stuff.
// "Horrible kludge!" :)                              /PAP
// -------------------------------------------------------
// Booting up...
// (Set up console)
// "Taking one for the team, wing maaaaaaaaannnnnnnnn!"
// (sorry...)                                         /PAP
// -------------------------------------------------------
console.setAttrs( console.yellow, console.blue );
console.cls();
console.gotoxy( 1, 1 );
// console.settitle("HLA Adventure v3.40");
// -------------------------------------------------------
// Print introduction
// This makes our story memorable (sort of).          /PAP
// -------------------------------------------------------
stdout.puts("                         " nl);
stdout.puts("        PLOT INTRODUCTION" nl nl);
console.setAttrs( console.white, console.blue );
stdout.puts("             A long time ago, when mystics, warriors and villagers" nl);
stdout.puts("        with smelly socks roamed the land, things were great." nl);
stdout.puts("        You could slay dragons, beat up no-good thieves, and " nl);
stdout.puts("        even go on adventures with your drinking buddies. To " nl);
stdout.puts("        add to it all, there was a princess to chase after and" nl);
stdout.puts("        a king to swear allegiance to. All in all, life was" nl);
stdout.puts("        grand." nl nl);
stdout.puts("        Until one day, that is...An evil dragon has taken refuge" nl);
stdout.puts("        in a nearby cave. As the King's chief dragon hunter, it is" nl);
stdout.puts("        up to you to slay the dragon dead. Good luck!" nl nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("        Press any key to begin!" nl);

stdout.puts("        (as long as it's enter :) " nl);   // dbg
// -------------------------------------------------------
// Frank, lay off the yellow pills...  :)             /PAP
// -------------------------------------------------------
// stdin.readLn();
//stdin.getc();
//reget:
//stdin.peekc();
//or(al, al);
//jz reget;
// okay, how the <bleep> *do* we do that????
// -------------------------------------------------------
// Okay, now wait for keypress...                     /PAP
// -------------------------------------------------------
stdin.getc();
// -------------------------------------------------------
// Print title screen, other generics...              /PAP
// -------------------------------------------------------
console.cls();
console.setAttrs( console.white, console.blue );
stdout.puts("HLA Adventure" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("By: Paul Panks" nl);
console.setAttrs( console.magenta, console.blue );
stdout.puts("Version 3.40" nl nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Fixed by Frank Kotler and Jon Ripley" nl nl);
console.setAttrs( console.magenta, console.blue );
stdout.puts("You can learn more about this project by visiting:" nl nl);
console.setAttrs( console.green, console.blue );
stdout.puts("http://members.tripod.com/~panks/hlaadv.html" nl nl);
console.setAttrs( console.white, console.blue );
stdout.puts("This project was ported cross-platform on May 15, 2003." nl);
// -------------------------------------------------------
// got the time-tunnel workin', eh?
// -------------------------------------------------------
// Time-tunnel = my ol' Kentucky home                 /PAP
// -------------------------------------------------------
stdout.puts("Originally written for Win32 and Linux SuSe Professional." nl nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("Bug-fixed by: Frank Kotler, Randall Hyde, Sevag Krikorian and others." nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("(Note: Some items may reset each game - e.g. food, shroud, etc.)" nl nl);
// -------------------------------------------------------
// Not really, but it should work on both...
// -------------------------------------------------------
console.setAttrs( console.green, console.blue );
console.gotoxy( 0,21 );
stdout.puts("Press any key to begin playing!                                                 ");
stdout.puts("        (as long as it's enter :)" nl);    // dbg
// -------------------------------------------------------
// I only press what's available. Argh. Sorry.        /PAP
// -------------------------------------------------------
stdin.readLn();
console.cls();
console.gotoxy( 0,0 );
// -------------------------------------------------------
// Discuss changes that need to be made; offer suggestions
// for improving HLA Adventure further.               /PAP
// -------------------------------------------------------
// console.setAttrs( console.cyan, console.blue );
// stdout.puts("HLA Adventure v3.40" nl nl);
// console.setAttrs( console.white, console.blue );
// stdout.puts("Several changes have been made to HLA Adventure " nl);
// stdout.puts("since the last version. The first thing that has " nl);
// stdout.puts("been corrected is the spelling. All rooms and " nl);
// stdout.puts("items are now properly described with the proper " nl);
// stdout.puts("spelling (and in some cases, Old English was used)." nl nl);
// console.setAttrs( console.green, console.blue );
// stdout.puts("Press any key to continue..." nl);
// stdout.puts("        (as long as it's enter :)" nl);
// stdin.readLn();
// console.setAttrs( console.white, console.blue );
// stdout.puts("In future versions of HLA Adventure, I will be " nl);
// stdout.puts("implementing the ability to examine items described " nl);
// stdout.puts("within every room. Because most rooms have anywhere " nl);
// stdout.puts("between three and eight items described per room, this " nl);
// stdout.puts("may take awhile to implement. I might ask for others " nl);
// stdout.puts("to assist me on completing this difficult task (perhaps" nl);
// stdout.puts("by assigning, say, 10 room descriptions to each party)." nl );
// stdout.puts("If 23 people describe the items in 10 rooms, that will " nl);
// stdout.puts("take far less time than if I manually go through each " nl);
// stdout.puts("and every room myself. With a total of 223 rooms, HLA " nl);
// stdout.puts("Adventure has *a lot* of items to be described. But it" nl);
// stdout.puts("can be done. :) - PAP " nl nl);
// console.setAttrs( console.green, console.blue );
// stdout.puts("Press any key to continue..." nl);
// stdout.puts("        (as long as it's enter :)" nl);
// stdin.readLn();
console.cls();
console.gotoxy( 0, 0 );
console.setAttrs( console.cyan, console.blue ); 


// -------------------------------------------------------
// Check for saved game, or good Irish beer, whichever
// the player prefers.                                /PAP
// -------------------------------------------------------
// modified this to use matchword instead			/SEVAG
// ---------------------------------------------------------
	
stdout.puts("Are you playing a saved game?:");
stralloc( 80 );
mov(eax,w);
stdin.flushInput();
stdin.gets(w);
if ( matchword ( w, "y") || matchword (w, "yes")) then
	jmp vb2;
endif;

// -------------------------------------------------------
// Main loop of program westf;
// All the major routines, plus others...             /PAP
// -------------------------------------------------------
mainlp:
// jmp Room; // dbg
console.cls();
console.gotoxy(0,2);
mainlp2:
// -------------------------------------------------------
// Okay, now we print out all the rooms based on "r" value
// There's a better way, I know there is...           /PAP
// -------------------------------------------------------
// Print out rooms, starting at one [1]
// -------------------------------------------------------
Room:
console.setAttrs( console.white, console.blue );
// if((type int32 eax) =0 || (type int32 eax) =1 ) then
//  stdout.put(nl);
//  stdout.put(nl);
// endif;
// mov(outFileVar,eax); // dbg
// stdout.puts(eax); // dbg
// -------------------------------------------------------
// room 1 - Village tavern
// -------------------------------------------------------

if (r=1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Village tavern" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a tavern with creaky wooden floors. Laughter and" nl);
stdout.puts("commotion surround you as the bartender tends to his customers. A few" nl);
stdout.puts("tables and chairs are visible here. A staircase heads upstairs to the" nl);
stdout.puts("second floor of the tavern. A sign reads 'Drink Cerveza!'" nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("Type 'help' for a list of commands used in HLA Adventure." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("If you need help, you can also e-mail me at: ");
console.setAttrs( console.cyan, console.blue );
stdout.puts("dunric@yahoo.com" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south, up>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 2 - Upstairs hallway
// -------------------------------------------------------

if (r=2) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Upstairs hallway" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on the upstairs hallway of the tavern. A few" nl);
stdout.puts("rooms are visible up ahead, the largest of which stands to the" nl);
stdout.puts("east. It appears unoccupied at the moment." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<down, east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 3 - Village store
// -------------------------------------------------------

if (r=3) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Village store" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the village shop. Commands here include" nl);
stdout.puts("'buy <item>','sell <item>' and 'list'. A clerk is normally" nl);
stdout.puts("here attending to customers. He seems friendly enough." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("To purchase the sword (for example), type: buy sword" nl);
stdout.puts("To sell an item, use 'sell' instead of 'buy'." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 4 - Small room
// -------------------------------------------------------

if (r=4) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small room" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small room. It is mostly bare, save for" nl);
stdout.puts("a few wooden barrels. The only exit is back west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 5 - Village path
// -------------------------------------------------------

if (r=5) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Village path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a path in the middle of town. The road" nl);
stdout.puts("is quite muddy, and you notice wheel ruts in the ground. To the" nl);
stdout.puts("east stands a village shop." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 6 - Village well
// -------------------------------------------------------

if (r=6) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Village well" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are looking down on your reflection over a deep artisan" nl);
stdout.puts("well. The water rises some 100 feet below ground level, and" nl);
stdout.puts("the sides are green with moss. You don't notice if the water" nl);
stdout.puts("contains any of the moss from the walls, but it looks green" nl);
stdout.puts("nonetheless!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// what? no "down"? :)
// -------------------------------------------------------
// I could add a hades, I suppose...                  /PAP
// -------------------------------------------------------
// room 7 - Small cathedral
// -------------------------------------------------------

if (r=7) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small cathedral" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small cathedral. Several pews adorn the" nl);
stdout.puts("room here, while high stained glass windows dominate the interior." nl);
stdout.puts("An altar stands to the north, near the back." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 8 - Stone altar
// -------------------------------------------------------

if (r=8) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Stone altar" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a stone altar in the front of the cathedral." nl);
stdout.puts("The nave in the apse extends some twenty-five feet from center" nl);
stdout.puts("to ground. A small storage room is east. It looks a bit bare, but" nl);
stdout.puts("this church is fairly unadorned with items to begin with!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 9 - Storage Room
// -------------------------------------------------------

if (r=9) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Storage room" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small storage room. It is used to" nl);
stdout.puts("store items pertaining to the church. However, some of these" nl);
stdout.puts("items do not even belong to the church! (go figure)" nl);
stdout.puts("The only exit is back west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 10 - Guild
// -------------------------------------------------------

if (r=10) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Guild" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a large guild room. A large crescent flag" nl);
stdout.puts("with a star emblazoned on it drapes down from the ceiling. A few" nl);
stdout.puts("tables and chairs are here, as well as a large fireplace." nl);
stdout.puts("The fire is currently burning, illuminating the room in a soft" nl);
stdout.puts("glow. You notice some logs on the fire, burning quietly." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("Type 'help' for a list of commands used in HLA Adventure." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("You notice a small bulletin board here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 11 - Entrance to town
// -------------------------------------------------------

if (r=11) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Entrance to town" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing near a stone archway. Vines grow on" nl);
stdout.puts("either pillar, snaking around the columns on both sides." nl);
stdout.puts("The road into town heads north past an old cathedral. The" nl);
stdout.puts("cathedral itself is built on a steep hill, overlooking" nl);
stdout.puts("the village. Small plumes of smoke arise from the top." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 12 - Well-lit path
// -------------------------------------------------------

if (r=12) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Well-lit path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking down a well-lit path beyond the forest." nl);
stdout.puts("The path heads north here past a stone archway. You also" nl);
stdout.puts("notice a well near the center of town." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("A dusty path heads west for miles on end." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 13 - Forest Path
// -------------------------------------------------------

if (r=13) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest Path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking down a narrow path near the outskirts" nl);
stdout.puts("of the forest. Trees surround you to the south, with" nl);
stdout.puts("a fork in the road visible nearby. It appears to branch" nl);
stdout.puts("out in four directions, heading into a thick haze." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 14 - Intersection
// -------------------------------------------------------

if (r=14) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Intersection" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing an intersection in the forest. Paths head" nl);
stdout.puts("off in four directions here. To the south, the forest becomes" nl);
stdout.puts("oppressive and dark. To the east, there is far more sunlight." nl);
stdout.puts("A misty haze surrounds the forest, enveloping the area with" nl);
stdout.puts("a thick, dull smoke. Even the ground looks lifeless, as it is" nl);
stdout.puts("littered with rocks, leaves, and ash." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("There is a portal here, pulsating white light." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west,down>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 15 - RedWood Forest
// -------------------------------------------------------

if (r=15) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood Forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a tall Redwood forest. The trees are among" nl);
stdout.puts("the tallest on Earth -- some reaching over 150 feet high. The" nl);
stdout.puts("forest thins out some to the west. Beyond the forest lies a" nl);
stdout.puts("small cottage, partially shrouded from view by distant trees." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 16 - By the old Oak Tree
// -------------------------------------------------------

if (r=16) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By the old Oak Tree" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a large oak tree. The branches are twisted" nl);
stdout.puts("and tangled, aged by the ravages of time. The limbs of the" nl);
stdout.puts("tree are low-lying and extend some ten feet off the ground." nl);
stdout.puts("The tree appears climbable, although a rope may be needed." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// if I can't go "up", why mention "climbable"?
// -------------------------------------------------------
// We fly the unfriendly skies... :)                  /PAP
// -------------------------------------------------------

// room 17 - High Atop the forest
// -------------------------------------------------------

if (r=17) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("High Atop the forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a branch high atop the forest. To the" nl);
stdout.puts("east, you notice a small grassroof hut. The only exit" nl);
stdout.puts("is back down (unless you can fly, that is!). You notice" nl);
stdout.puts("a small nest on a branch just below the hut. There doesn't" nl);
stdout.puts("appear to be any way to reach it, however." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 18 - Grassroof hut
// -------------------------------------------------------

if (r=18) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Grassroof Hut" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small grassroof hut. A few tables" nl);
stdout.puts("and chairs adorn the hut, while a small bookcase is visible" nl);
stdout.puts("near the back wall. The only exit is west." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("A hobbit usually lives here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 19 - Redwood Forest
// -------------------------------------------------------

if (r=19) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood Forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a tall Redwood forest. These trees are" nl);
stdout.puts("among the oldest and tallest in the world. The forest thickens" nl);
stdout.puts("somewhat to the east. An intersection is to the southwest." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 20 - Redwood forest
// -------------------------------------------------------

if (r=20) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood Forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a tall Redwood forest. These trees" nl);
stdout.puts("are among the oldest and tallest in the world. To the north" nl);
stdout.puts("stands an old oak tree, aged by time. It appears to have" nl);
stdout.puts("several low-lying branches. You might need a rope to climb" nl);
stdout.puts("it, however!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 21 - Redwood forest
// -------------------------------------------------------

if (r=21) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood Forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a tall Redwood forest. Further passage" nl);
stdout.puts("west is blocked by fallen trees. The only exit is back" nl);
stdout.puts("west. A cottage is visible far to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 22 - Broken path
// -------------------------------------------------------

if (r=22) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Broken path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a broken path near an intersection." nl);
stdout.puts("To the north stands a tall Redwood forest. Up ahead (to" nl);
stdout.puts("the east) lies a small cottage. It looks empty." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 23 - Broken path
// -------------------------------------------------------

if (r=23) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Broken path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a broken path. There is a cottage" nl);
stdout.puts("directly east (formerly obscured by trees). Someone" nl);
stdout.puts("obviously lives (or lived?) there." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 24 - Abandoned cottage
// -------------------------------------------------------

if (r=24) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Abandoned cottage" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small cottage. The area is mostly" nl);
stdout.puts("bare, save for an old bed and a small fireplace. Everything" nl);
stdout.puts("else has been moved (or stolen). What happened to these" nl);
stdout.puts("items remains a mystery." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 25 - By the lake
// -------------------------------------------------------

if (r=25) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By the lake" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing by a small lake. The water glistens" nl);
stdout.puts("vibrantly in the fading sunlight, as clouds drift by on" nl);
stdout.puts("the horizon. A clearing is visible to the west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 26 - Small clearing
// -------------------------------------------------------

if (r=26) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small clearing" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small clearing. There is nothing around" nl);
stdout.puts("but blue sky. A lake is visible to the east, about one" nl);
stdout.puts("or two leagues distance. The air above is quite calm and" nl);
stdout.puts("peaceful." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 27 - Grassy hillside
// -------------------------------------------------------

if (r=27) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Grassy hillside" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a grassy hillside. The grass tickles" nl);
stdout.puts("your feet as you walk on by. To the north, just beyond a" nl);
stdout.puts("large hill, lies a path near the forest." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 28 - On the path
// -------------------------------------------------------

if (r=28) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a path in the middle of a large forest." nl);
stdout.puts("Trees surround you in all directions here, while the path" nl);
stdout.puts("continues to the south (leading you deeper into the forest)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 29 - Winding road
// -------------------------------------------------------

if (r=29) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Winding road" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a winding road. The path heads" nl);
stdout.puts("east to west across the landscape. Far to the west you" nl);
stdout.puts("can see majestic purple mountains. These mountains rise" nl);
stdout.puts("hundreds of feet into the air, towering over the forest" nl);
stdout.puts("like giant statues." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 30 - Winding road
// -------------------------------------------------------

if (r=30) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Winding road" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking down a winding road. The path heads" nl);
stdout.puts("east and west in both directions here. You notice a" nl);
stdout.puts("small wooden bridge to the northwest. It cuts across" nl);
stdout.puts("the forest like a wayward razor blade." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 31 - Junction
// -------------------------------------------------------

if (r=31) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Junction" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a junction near the winding road. The path" nl);
stdout.puts("splits off here to the north over a small wooden bridge. It" nl);
stdout.puts("appears to go over a small ravine about twenty feet wide." nl);
stdout.puts("The ravine itself isn't much, but caution should still" nl);
stdout.puts("be taken." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 32 - Wooden bridge
// -------------------------------------------------------

if (r=32) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Wooden bridge" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a wooden bridge north of a junction. The" nl);
stdout.puts("bridge is worn and the wood splintered, suggesting an ancient" nl);
stdout.puts("time and age. A bronze statue is visible to the north." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The statue appears to resemble the late king, Erik of Desmark." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 33 - Bronze statue
// -------------------------------------------------------

if (r=33) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Bronze statue" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a bronze statue. It appears to depict a" nl);
stdout.puts("man shrouded in traditional priesthood garb. He is holding" nl);
stdout.puts("a bronze staff (in the shape of a snake). But his likeness" nl);
stdout.puts("bares a striking resemblance to the late king." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("Why the late king would be wearing a tunic is beyond your vision." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 34 - Winding road
// -------------------------------------------------------

if (r=34) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Winding road" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a winding road. Purple mountains" nl);
stdout.puts("surround you in all directions here. You notice a small" nl);
stdout.puts("cave to the northwest. The cave appears rather dark and" nl);
stdout.puts("misty, not a place to be wandering about without a lantern!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 35 - Purple mountains
// -------------------------------------------------------

if (r=35) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Purple mountains" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing near a purple mountain range. The terrain" nl);
stdout.puts("becomes rockier to the north and west. The path slopes" nl);
stdout.puts("down to the southeast, cresting at a small hillside." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south.>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 36 - Purple mountains
// -------------------------------------------------------

if (r=36) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Purple mountains" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a purple mountain range. The path becomes" nl);
stdout.puts("steadily unclimbable to the north. The only viable exit is" nl);
stdout.puts("back south (100 feet below)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south.>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 37 - Purple mountains
// -------------------------------------------------------

if (r=37) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Purple mountains" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a purple mountain terrain. The rockier" nl);
stdout.puts("it becomes, the less steady your feet! A tumble here could" nl);
stdout.puts("spell the death of one thousand chickens." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 38 - Purple mountains (south of cave)
// -------------------------------------------------------

if (r=38) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Purple mountains" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing south from a series of small caves." nl);
stdout.puts("There is very little light here, as the sun sinks below" nl);
stdout.puts("the horizon. Better head back east, as the sky is quickly" nl);
stdout.puts("fading to night." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 39 - Dark cave
// -------------------------------------------------------

if (r=39) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Cave entrance" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a dark cave. Tunnels head off in all" nl);
stdout.puts("directions here. You notice one particularly wide cavern" nl);
stdout.puts("heading north into the darkened abyss." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 40 - Purple mountains
// -------------------------------------------------------

if (r=40) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Purple mountains" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The terrain becomes steadily unclimbable to the west." nl);
stdout.puts("You notice a small Shinto shrine to the north, just" nl);
stdout.puts("across a small river. The river extends nearly two miles" nl);
stdout.puts("from the bottom of a small cliff." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 41 - Purple mountains
// -------------------------------------------------------

if (r=41) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Purple mountains" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a dead end in these purple mountains." nl);
stdout.puts("The terrain becomes far too rocky to the west and north." nl);
stdout.puts("The only way back is east (sad to say)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=42) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the path (heading south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a path heading south. You notice a" nl);
stdout.puts("decaying forest to the west, while small hills run" nl);
stdout.puts("east and north. Far to the south stands a stone" nl);
stdout.puts("castle, towering high above the forest." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=43) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small hillside" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a grassy hillside. The grass" nl);
stdout.puts("tickles your feet as you walk on by. To the east" nl);
stdout.puts("lies a steady slope (heading downward)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=44) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Grassy slope (sloping downward)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a grassy slope. It continues" nl);
stdout.puts("south towards a run at the bottom of the hill. The" nl);
stdout.puts("grassy plain continues westward." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=45) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Decaying forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a decayed forest. Most of the" nl);
stdout.puts("trees appear to be dying. Twisted by age and time," nl);
stdout.puts("there is nothing left but echoed embers. The trees" nl);
stdout.puts("seem to be crying out for rain, but nothing comes." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=46) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dying forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a forest that appears to be dying." nl);
stdout.puts("The undergrowth is overgrown with weeds and flattened" nl);
stdout.puts("leaves. It looks mostly dried out and lifeless. To the" nl);
stdout.puts("south, the forest thins out somewhat, heading into" nl);
stdout.puts("a grassy hillside near tall, rocky mountains." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=47) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Within the dying forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the middle of a forest that" nl);
stdout.puts("appears to be dying. Many of the trees have succumbed" nl);
stdout.puts("to waste rot. A few mushrooms litter the ground here," nl);
stdout.puts("none edible." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=48) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Southern road" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are on a path south of the forest. Up ahead lies" nl);
stdout.puts("a small bridge (traversing a tiny creek). Just beyond" nl);
stdout.puts("the bridge, the path widens near a large stone castle." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=49) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Grassy hillside (on the southern slope)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are heading south on a narrow slope. The hillside" nl);
stdout.puts("steepens to the south, driven downward by erosion and" nl);
stdout.puts("contact metamorphism." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=50) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("South of a large hillside" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing due south from a grassy hillside." nl);
stdout.puts("The path winds east, then drops off some fifty feet" nl);
stdout.puts("into a small ravine below. You might want to bring" nl);
stdout.puts("along a coil of rope (to climb down the ravine)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=51) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Eastern path (near a ravine)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a gradient path descending near" nl);
stdout.puts("a small ravine. The descending slope of the curve" nl);
stdout.puts("leaves little to chance. Be careful!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=52) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dying forest (western perimeter)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing by the western edge of a decaying" nl);
stdout.puts("forest. The path west is blocked by fallen trees." nl);
stdout.puts("To the south, the forest continues to widen." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=53) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Middle forest (east of bridge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a dying forest. It is vastly" nl);
stdout.puts("decayed and overgrown with weeds and mushrooms." nl);
stdout.puts("To the east lies a stone bridge, crossing a small" nl);
stdout.puts("creek. The water moves at a rapid rate of speed." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=54) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small bridge (traversing a creek)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a small wooden bridge. It overlaps" nl);
stdout.puts("a small creek below. The water is moving rapidly to" nl);
stdout.puts("the southwest. There doesn't appear to be many fish" nl);
stdout.puts("swimming in the creek. Given the speed of the water," nl);
stdout.puts("this doesn't surprise you much." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=55) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Southern slope" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the end of a southern slope. The" nl);
stdout.puts("path south is blocked by a small ravine. The only" nl);
stdout.puts("exit is back north (up the hill). The slope stops" nl);
stdout.puts("abruptly here at a very large boulder." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=56) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Northern cell (in the dungeon)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a cramped cell within the dungeon" nl);
stdout.puts("walls. There isn't much here save for a small bed and" nl);
stdout.puts("a wooden table. Carved on the table are the words: 'IT" nl);
stdout.puts("CAME FROM THE CAVES...EATING ME ALIVE LIKE LIONS!'" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=57) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Atop a small ravine" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are overlooking a small ravine. The path steepens" nl);
stdout.puts("quickly into the rocky ravine below. A fall from this" nl);
stdout.puts("distance would prove fatal. Better to use caution than" nl);
stdout.puts("blind chance!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=58) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("End of forest (western edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the end of the forest. The path west is" nl);
stdout.puts("further obstructed by fallen trees, large rocks, and sturdy" nl);
stdout.puts("undergrowth. The expansive growth of the forest gives way" nl);
stdout.puts("to a small clearing, opening up just ahead." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=59) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dying forest (near some tree stumps)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a dying forest. The undergrowth is" nl);
stdout.puts("full of weeds, rocks and mushrooms. You notice a few" nl);
stdout.puts("large tree stumps towards the southeast. The dense" nl);
stdout.puts("undergrowth of the forest slightly shrouds your" nl);
stdout.puts("vision. A smaller path heads west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=60) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dying forest (by some tree stumps)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are heading south in a decayed forest. The path" nl);
stdout.puts("narrows some to the west here. You notice quite a few" nl);
stdout.puts("tree stumps rooted in the ground here. Scattered" nl);
stdout.puts("leaves cover the ground, providing slight cover" nl);
stdout.puts("from the branch and bramble of the forest." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=61) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Wide path (north of castle)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a path just south of a small" nl);
stdout.puts("bridge. A few trees dot the landscape, but the area" nl);
stdout.puts("remains relatively clear. A castle is south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=62) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small cell" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small cell within the" nl);
stdout.puts("dungeon. It is mostly empty, save for a small bed" nl);
stdout.puts("and a wooden table. The table is clear." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=63) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a darkened dungeon" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a darkened dungeon. There is naturally" nl);
stdout.puts("very little light here, as your lantern casts ominous shadows" nl);
stdout.puts("upon either wall. You begin to wonder why you're down here." nl);
stdout.puts("Just what are you searching for?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=64) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small cell" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small cell. Unlike the" nl);
stdout.puts("others, this one is completely devoid of items. This" nl);
stdout.puts("strikes you as rather odd indeed. Most cells have at" nl);
stdout.puts("least a small bed, but no such comfort can be found" nl);
stdout.puts("inside these walls!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=65) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("End of forest (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the end of a dying forest. To the" nl);
stdout.puts("south, fallen trees and large rocks parallel your path" nl);
stdout.puts("in all directions. The only visible exit is back north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=66) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("End of forest (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the end of the forest. To the" nl);
stdout.puts("south, large rocks and storm-tossed trees block" nl);
stdout.puts("your path in all directions. A violent storm" nl);
stdout.puts("appears to have recently passed over this" nl);
stdout.puts("area. In fact, you can still hear the faint" nl);
stdout.puts("rumblings of thunder in the far distance." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=67) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Castle moat (on the drawbridge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before a large, hulking stone castle." nl);
stdout.puts("Vines grow on either column, spiraling upwards like" nl);
stdout.puts("a nefarious weed. To the south lies the main hall." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=68) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a darkened dungeon" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a darkened dungeon below the" nl);
stdout.puts("castle. There is very little light here, as your eyes" nl);
stdout.puts("take a moment to adjust to the surroundings. There" nl);
stdout.puts("are several cells here, each apparently unoccupied." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=69) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Guest chambers" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small bedroom. Visitors" nl);
stdout.puts("can come and rest here while awaiting an audience" nl);
stdout.puts("with the king. But no one is here at the moment." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=70) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Main hallway (inside the castle)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a long, wide hallway inside" nl);
stdout.puts("the castle. Ceremonial flags hang down from either" nl);
stdout.puts("column above you. A few rooms lie to the east and" nl);
stdout.puts("west. A throne room is visible to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=71) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small library (east of main hall)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small library within the" nl);
stdout.puts("castle. Rows of shelves line the walls, containing many" nl);
stdout.puts("books and parchments. A stairwell is also here, descending" nl);
stdout.puts("into darkness below. Where it leads (or why it exists)" nl);
stdout.puts("remains a mystery." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west,down>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=72) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small throne room" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before a large throne. Tall drapes" nl);
stdout.puts("hang down on either side (across stone columns). The" nl);
stdout.puts("columns support a stone archway, the apex of which" nl);
stdout.puts("stands wide and rotund. You notice a few jewels" nl);
stdout.puts("encrusted on either side of the throne." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=73) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Twisted passageway (heading north)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are in a darkened, twisting passageway within" nl);
stdout.puts("the caves. The tunnel drifts downward near a small" nl);
stdout.puts("crevice (like a fissure or cleft within the cavern" nl);
stdout.puts("wall)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=74) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Narrow tunnel" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a darkened tunnel. There is a" nl);
stdout.puts("narrow crack to the east, but it appears impossible" nl);
stdout.puts("to reach from here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=75) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Twisted passageway (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are heading east in a twisting passage. The tunnel" nl);
stdout.puts("narrows to the east, just beyond a small fissure. The" nl);
stdout.puts("tunnel widens substantially towards the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=76) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("East-west passageway" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on an east-west passage near a" nl);
stdout.puts("small fissure. The tunnel walls become quite" nl);
stdout.puts("narrow towards the east. You can almost sense" nl);
stdout.puts("the walls closing in on you!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=77) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Narrow opening (inaccessible)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a narrow opening in the cavern" nl);
stdout.puts("wall. It appears inaccessible from this vantage" nl);
stdout.puts("point. Only a few feet wide, you cannot possibly" nl);
stdout.puts("squeeze through the opening." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=78) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small intersection" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a small intersection. There are tunnels" nl);
stdout.puts("heading north, south, and east from here. The largest" nl);
stdout.puts("tunnel heads north towards the center of the cave." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=79) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small crevice (narrow crack)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a narrow crack, a small opening (or" nl);
stdout.puts("cleft) within the cavern wall. It appears to head" nl);
stdout.puts("downward along the edge of the wall towards an" nl);
stdout.puts("abyss below. From somewhere, far below, you can" nl);
stdout.puts("hear the sound of rushing water." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=80) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small intersection" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a small intersection within the" nl);
stdout.puts("cavern. Tunnels head off in all directions here," nl);
stdout.puts("although the eastern tunnel is blocked by a" nl);
stdout.puts("very large boulder. Who placed it there (and why)" nl);
stdout.puts("remains a perplexing mystery." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=81) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Tiny fissure (or cleft)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a narrow crack, a small opening" nl);
stdout.puts("(or fissure) within the cavern wall. It is far too" nl);
stdout.puts("narrow to pass through safely." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=82) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("End of tunnel (by a narrow fissure)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the end of the tunnel. A narrow" nl);
stdout.puts("fissure is visible to the south. The only exit" nl);
stdout.puts("is back to the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=83) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Tunnel junction (east of main tunnel)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking near a small junction within the" nl);
stdout.puts("caves. To the south, a larger tunnel opens up and" nl);
stdout.puts("gives way to a small keep. This unusual room was" nl);
stdout.puts("chiseled (carved) out of the surrounding stone" nl);
stdout.puts("of the cavern (a subterraneanly vast cavity)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=84) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small tunnel (west of main passageway)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a narrow tunnel just west of the" nl);
stdout.puts("main passageway. The cavern is hollow and the walls" nl);
stdout.puts("are quite porous (from multiple interstices). As an" nl);
stdout.puts("underground enclosure, the cavern hollows out towards" nl);
stdout.puts("the middle and spreads westward from the main" nl);
stdout.puts("passageway." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=85) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Subterranean passageway" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the middle of a large, subterraneanly" nl);
stdout.puts("vast passageway (tunnels head off here in multiple directions)." nl);
stdout.puts("The cavern slopes downward underground, heading northwest from" nl);
stdout.puts("the main passageway. The light is very dim here, with faint" nl);
stdout.puts("light casting shadows against either wall." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("To the south lies the main entrance to the caves." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=86) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Eastern junction (west of main passageway)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking near an eastern junction within" nl);
stdout.puts("the caves. A series of tunnels head north and" nl);
stdout.puts("east from here, while a small fissure is visible" nl);
stdout.puts("to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=87) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small tunnel (heading south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a narrow tunnel, heading south" nl);
stdout.puts("past a jagged crevice. However, the opening is far" nl);
stdout.puts("too narrow to pass through safely." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=88) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dead end (blocked by fallen rocks)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel ahead is blocked by fallen rocks. Something" nl);
stdout.puts("(or perhaps someone) has caused a collapsing of the" nl);
stdout.puts("cavern ceiling. The only way back is south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=89) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Twisting passageway" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a twisting passageway. The tunnel" nl);
stdout.puts("ahead widens somewhat before giving way to a large" nl);
stdout.puts("opening. You can't be certain, but you think you" nl);
stdout.puts("hear the sound of rushing water (nearby)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=90) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Near a dead end (northern caves)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a dead end within the caves. There" nl);
stdout.puts("isn't much waggle room to be found here. The only" nl);
stdout.puts("exit is back south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=91) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Narrow passageway (heading north)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking inside a narrow passageway within" nl);
stdout.puts("the caves. A large fissure lies ahead to the north," nl);
stdout.puts("permitting passage." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=92) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Narrow tunnel (south of fissure)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a narrow tunnel (just south of" nl);
stdout.puts("a large fissure). Up ahead, carved directly into" nl);
stdout.puts("the rock face itself, lies a small keep." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=93) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Wide tunnel (south of waterfall)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a wide tunnel just south of" nl);
stdout.puts("a small waterfall. The steep descent of water" nl);
stdout.puts("cascades from a height of about twenty feet." nl);
stdout.puts("Just beyond it lies a small fissure (inaccess-" nl);
stdout.puts("ible from here)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=94) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By a large waterfall" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before a large waterfall. The" nl);
stdout.puts("water cascades downward into a flowing pool" nl);
stdout.puts("below. The ripples on the water move swiftly" nl);
stdout.puts("from the force of the waterfall. It may be" nl);
stdout.puts("possible to follow the pool east, although" nl);
stdout.puts("the fissure is narrow at best." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=95) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small keep" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small keep within the" nl);
stdout.puts("cavern walls. The room is impressively chiseled" nl);
stdout.puts("out of the rock face above. A few candles line" nl);
stdout.puts("the room, while a small table rests in the" nl);
stdout.puts("center. The only exit is back south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=96) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small keep" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small keep within the" nl);
stdout.puts("cavern walls. The room is impressively chiseled" nl);
stdout.puts("out of the rock face above. A few candles line" nl);
stdout.puts("the room, while a small table rests in the" nl);
stdout.puts("center. The only exit is back south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=97) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood forest (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a tall Redwood forest. The forest" nl);
stdout.puts("spreads out towards the east, while a small clearing" nl);
stdout.puts("is plainly visible nearby. A path heads south" nl);
stdout.puts("from the clearing towards a rock formation." nl);
stdout.puts("A small cottage lies to the southwest." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The exit south is blocked by a magical force field." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=98) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a Redwood forest. The path" nl);
stdout.puts("you are traveling on ends abruptly here. The bank" nl);
stdout.puts("of a swiftly moving river is plainly visible as" nl);
stdout.puts("well. The river does not appear too deep, although" nl);
stdout.puts("crossing it may prove hazardous." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=99) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood forest (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a tall Redwood forest. The" nl);
stdout.puts("path ends here rather abruptly near a large" nl);
stdout.puts("rock formation. It appears that these rocks" nl);
stdout.puts("cut across another rock formation purely" nl);
stdout.puts("by chance. Either that, or you're going nuts!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=100) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Narrow path (heading east to west)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a narrow dirt path heading" nl);
stdout.puts("east to west across a large forest. The surrounding" nl);
stdout.puts("area is quite beautiful, with trees providing ample" nl);
stdout.puts("shading. Bright light filters down from the canopy" nl);
stdout.puts("above you, crossing the ground. A path heads east." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=101) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small clearing (middle forest)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small clearing. Two forests" nl);
stdout.puts("meet at this point: a tall Redwood forest, and a" nl);
stdout.puts("smaller forest comprised of spruce trees. It" nl);
stdout.puts("is obvious that someone (or something?) cleared" nl);
stdout.puts("the area of trees in either direction." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=102) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Redwood forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a tall Redwood forest. To the" nl);
stdout.puts("north lies a small clearing. The forest thins out" nl);
stdout.puts("some to the east, while southwest of here you" nl);
stdout.puts("notice a swiftly-moving river. The path south" nl);
stdout.puts("takes you past the forest into a large hillside." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=103) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dirt path (heading south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are on a dirt path heading south. The forest" nl);
stdout.puts("gives way here to a large open field. Further" nl);
stdout.puts("south, the path descends past a rocky formation" nl);
stdout.puts("towards a sandy beach. The breeze from the ocean" nl);
stdout.puts("becomes more obvious to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=104) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dirt path (west of forest)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a dirt path just south of a" nl);
stdout.puts("large Redwood forest. The path heads south past" nl);
stdout.puts("a large open field. You notice a few animals" nl);
stdout.puts("grazing the field to the west, but elsewhere" nl);
stdout.puts("remains quite empty." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small keep" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small keep within the" nl);
stdout.puts("cavern walls. The room is impressively chiseled" nl);
stdout.puts("out of the rock face above. A few candles line" nl);
stdout.puts("the room, while a small table rests in the" nl);
stdout.puts("center. The only exit is back south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=106) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Well-worn path (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a well-worn path near a" nl);
stdout.puts("large rock formation. The formation itself is" nl);
stdout.puts("largely comprised of granite and shale, although" nl);
stdout.puts("transformation has taken place in larger areas" nl);
stdout.puts("of the rock face." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=107) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Well-worn path (heading east to west)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a well-worn path. The beach is" nl);
stdout.puts("plainly visible to the southeast, while a hefty rock" nl);
stdout.puts("formation extends down to the beach below. A slight" nl);
stdout.puts("breeze is also apparent here. The path continues" nl);
stdout.puts("east and west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=108) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (western edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on the western edge of a large, sandy" nl);
stdout.puts("beach. The sand feels soft to the touch, as the minute" nl);
stdout.puts("grains sift endlessly through your hands. A gentle" nl);
stdout.puts("breeze swirls around you from the north. You can" nl);
stdout.puts("head east from here towards the middle of the beach." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=109) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a sandy beach. The sand is mostly" nl);
stdout.puts("a mixture of gray and white, although muddier sections" nl);
stdout.puts("are visible near the coastline. The tide appears to come" nl);
stdout.puts("with regularity here. You notice a stiff breeze to the" nl);
stdout.puts("northeast. There are also some seashells here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=110) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the southern edge of the beach. Further" nl);
stdout.puts("travel south takes you directly into the ocean. A stiff" nl);
stdout.puts("breeze hits your front side from the northeast. The edge" nl);
stdout.puts("of the beach is littered with seashells. The ground" nl);
stdout.puts("has small borrow marks across the coastline." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=111) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a sandy beach. It curves north" nl);
stdout.puts("here past a large rock formation. Waves splash up" nl);
stdout.puts("against the shore with regularity, sending shells" nl);
stdout.puts("well past your feet. Far to the east, you notice a" nl);
stdout.puts("tall lighthouse." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=112) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Dirt path (south of rock formation)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a dirt path near a large" nl);
stdout.puts("rock formation. The beach is visible some fifty" nl);
stdout.puts("feet below your position. It appears just steep" nl);
stdout.puts("enough for you to climb down, although caution" nl);
stdout.puts("should be taken when carrying heavy objects." nl);
console.setAttrs( console.magenta, console.blue );
stdout.puts("There is a portal here, pulsating blue light." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=113) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (south of rock formation)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a sandy beach near a large" nl);
stdout.puts("rock formation. The rock face is jagged and" nl);
stdout.puts("unstable, although a small path ascends the" nl);
stdout.puts("base of the formation to the north." nl);
stdout.puts("The ocean is directly south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=114) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a sandy beach. The beach" nl);
stdout.puts("extends east and west in both directions here." nl);
stdout.puts("Several small rocks and seashells are also" nl);
stdout.puts("visible, while waves crash against the" nl);
stdout.puts("shoreline to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=115) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (mid-line coast)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a sandy beach near the" nl);
stdout.puts("midline of the western coast. Waves splash" nl);
stdout.puts("against your feet, as the sun sinks slowly" nl);
stdout.puts("below the horizon. A stiff breeze has" nl);
stdout.puts("increased (from a gentle wind)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=116) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (south of rock formation)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are on a long, sandy beach. The coastline" nl);
stdout.puts("is rather flat, while a heavy rock formation" nl);
stdout.puts("towers above you to the south. You also notice" nl);
stdout.puts("a few palm trees overhanging the formation" nl);
stdout.puts("near the base of the beach." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=117) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (middle coast)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking across a long, sandy beach. Waves" nl);
stdout.puts("move in and shift objects up towards the south. It" nl);
stdout.puts("becomes steadily flat to the east, as the coastline" nl);
stdout.puts("extends to the northeast (near a tall lighthouse)." nl);
stdout.puts("The ocean is fifty feet to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=118) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (at the coast)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a sandy beach. The coastline" nl);
stdout.puts("lies in front of you, retreating southward. A few" nl);
stdout.puts("wayward seashells are visible to the west, while " nl);
stdout.puts("seaweed is strewn haphazardly to the southeast." nl);
stdout.puts("The only exit is back north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=119) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (south of rock formation)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are on a sandy beach just south of a large" nl);
stdout.puts("rock formation. The rock face looks jagged and" nl);
stdout.puts("tilts downward at an awkward angle. Several" nl);
stdout.puts("rocks have fallen and hit the base of the beach" nl);
stdout.puts("to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=120) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Sandy beach (eastern coastline)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the eastern edge of the sandy" nl);
stdout.puts("beach. The coastline is directly south from" nl);
stdout.puts("here. To the east stands a tall lighthouse, the" nl);
stdout.puts("base of which is finitely rotund (sort of)." nl);
stdout.puts("There are some jagged rocks towards the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=121) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Eastern coastline" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The sandy beach gives way here to the eastern" nl);
stdout.puts("coastline. A shallow lagoon is directly east." nl);
stdout.puts("Although crossing it does not appear to be" nl);
stdout.puts("too difficult, caution should be taken." nl);
stdout.puts("The only exit is back west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=122) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("East of small lagoon" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing east of a small lagoon. To" nl);
stdout.puts("the west (across the lagoon) stands a long" nl);
stdout.puts("beach. North of the beach is a tall rock" nl);
stdout.puts("formation. You notice a tall lighthouse" nl);
stdout.puts("directly east. It stands over 50 feet high." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=123) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Lighthouse at Flora" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a tall lighthouse near Flora" nl);
stdout.puts("Island. The structure is soundly rotund, spiraling" nl);
stdout.puts("upward at a perfectly straight angle. The top of" nl);
stdout.puts("the lighthouse provides light for ships several" nl);
stdout.puts("kilometers out to sea." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=124) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a woodland forest. The ground" nl);
stdout.puts("is covered with dirt, leaves and many small rocks." nl);
stdout.puts("To the north lies a small path, heading east to west" nl);
stdout.puts("across the landscape. A rock formation stands to" nl);
stdout.puts("the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=125) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (western edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing at the western edge of the" nl);
stdout.puts("forest. Light filters down from the canopy" nl);
stdout.puts("above, while forest critters scurry about" nl);
stdout.puts("the ground. A path heads west from here" nl);
stdout.puts("across a large open field." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=126) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the middle of a small" nl);
stdout.puts("forest. Several trees parallel your path" nl);
stdout.puts("in multiple directions here. To the north" nl);
stdout.puts("lies an eastern path (partially obscured" nl);
stdout.puts("by trees and foliage)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=127) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Middle woodlands" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the middle of a small" nl);
stdout.puts("forest. The surrounding woodlands are populated" nl);
stdout.puts("by hundreds of tall spruce trees. Further to the" nl);
stdout.puts("north lies a well-worn path." nl);
stdout.puts("The only exit is west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=128) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a small forest. The woodlands" nl);
stdout.puts("surrounding you are populated with hundreds of" nl);
stdout.puts("tall spruce trees. The ground is mostly bare, save" nl);
stdout.puts("for fallen trees and abandoned shrubbery. To the" nl);
stdout.puts("north lies a well-worn path (heading east)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=129) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (south of path)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing south in a well-lit forest. Trees" nl);
stdout.puts("surround you in multiple directions here, while" nl);
stdout.puts("light filters down from the canopy above. A path" nl);
stdout.puts("breaks off here and heads north (before bending" nl);
stdout.puts("eastward)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=130) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a well-lit forest. The surrounding" nl);
stdout.puts("area is densely populated with tall spruce trees. Further" nl);
stdout.puts("travel west is blocked by storm-tossed trees and many large" nl);
stdout.puts("boulders (which look very out of place!). The only exit" nl);
stdout.puts("is back north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=131) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (northern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a well-lit forest. Trees parallel" nl);
stdout.puts("your path in multiple directions here. To the south, the" nl);
stdout.puts("forest widens somewhat past a large rock formation." nl);
stdout.puts("The only exit is south." nl);
stdout.puts("(Others are blocked)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=132) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (middle forest)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are in the middle of a large forest. The surrounding" nl);
stdout.puts("woodland is overgrown with hundreds of tall spruce trees." nl);
stdout.puts("To the west, the forest opens up somewhat near a small" nl);
stdout.puts("clearing. A narrow path heads south towards a large" nl);
stdout.puts("rock formation." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=133) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The forest ends abruptly here near the top of a" nl);
stdout.puts("large rock formation. The rock face is jagged and" nl);
stdout.puts("unmerciful, permitting only stunted climbing" nl);
stdout.puts("to a long beach below. A few seagulls stand perched" nl);
stdout.puts("at the edge of the cliff." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north, or south if you're brave...>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=134) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (eastern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the limits of the forest. The" nl);
stdout.puts("eastern perimeter is obstructed by fallen trees" nl);
stdout.puts("and the continuation of a massive rock formation." nl);
stdout.puts("The only exit is back west (unless you'd rather" nl);
stdout.puts("jump!)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=135) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Top of lighthouse" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the top of the lighthouse. The" nl);
stdout.puts("entire room is constructed of wood, rock and" nl);
stdout.puts("bronze. You notice a large pit where charred" nl);
stdout.puts("ashes are visible. Apparently, this is where" nl);
stdout.puts("the lighthouse is lit (not on fire!!)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<down>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=136) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a tall lighthouse (staircase)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are ascending a spiraling staircase which" nl);
stdout.puts("heads upwards towards the top of the lighthouse." nl);
stdout.puts("The staircase is well-lit, as several small lanterns" nl);
stdout.puts("provide ample lighting on either wall. The stairs" nl);
stdout.puts("continue up and down from this point." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<up,down>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=137) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a tall lighthouse (base of stairs)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a tall lighthouse. A staircase" nl);
stdout.puts("is immediately visible, ascending upwards in a" nl);
stdout.puts("spiraling fashion. The door leading out of the" nl);
stdout.puts("lighthouse stands to the south. You notice small" nl);
stdout.puts("letters carved into the walls of the lighthouse." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=138) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the path (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a well-worn path (heading" nl);
stdout.puts("east). A tall forest of spruce trees is directly" nl);
stdout.puts("north. To the west, the path breaks off near a" nl);
stdout.puts("large clearing and heads south. You notice a" nl);
stdout.puts("tall Redwood forest to the southwest." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=139) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the path (heading east to west)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a well-worn path (heading" nl);
stdout.puts("east to west). A tall forest of spruce trees" nl);
stdout.puts("is directly south. The path continues to the" nl);
stdout.puts("east. You notice a much wider path up ahead" nl);
stdout.puts("towards the northeast." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=140) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest junction" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before an intersection on a" nl);
stdout.puts("well-worn path. The path widens to the north" nl);
stdout.puts("past a tall forest of spruce trees. To the" nl);
stdout.puts("south, the path breaks off into a narrow" nl);
stdout.puts("woodland (again, mostly spruce trees)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=141) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Intersection (near a junction)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing an intersection at the end" nl);
stdout.puts("of a long path. To the north, the path breaks" nl);
stdout.puts("off and heads deeper into the forest. To the" nl);
stdout.puts("south, a narrow woodland grows (mostly" nl);
stdout.puts("spruce trees)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=142) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Spruce woodland (southern perimeter)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a forest of tall spruce" nl);
stdout.puts("trees. The surrounding woodland is comprised" nl);
stdout.puts("of hundreds of tall trees, permitting only faint" nl);
stdout.puts("light to reach the ground. A path lies to the" nl);
stdout.puts("south, heading east across the landscape." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=143) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Spruce woodland (eastern perimeter)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a dense forest. The forest" nl);
stdout.puts("ends abruptly here at a wide path (heading north)." nl);
stdout.puts("The path does not appear to be accessible from" nl);
stdout.puts("your vantage point. You will need to head north" nl);
stdout.puts("or south to reach it." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=144) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Wide path (heading north)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a wide path near a large" nl);
stdout.puts("forest. A smaller trail breaks off here and" nl);
stdout.puts("heads east (past a woodland mansion). As you" nl);
stdout.puts("take notice of the mansion, it appears quite" nl);
stdout.puts("odd and out of place for these parts." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=145) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("End of path (near the mansion)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing at the edge of a path near" nl);
stdout.puts("a large mansion. This wooded structure is crafted" nl);
stdout.puts("in a Victorian age design (which doesn't appear" nl);
stdout.puts("for another eight centuries!). Someone is" nl);
stdout.puts("either way high-tech or very obscure." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("There is a portal here, pulsating yellow light." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=146) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodland (western perimeter)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the western perimeter of the" nl);
stdout.puts("forest. The woodland becomes quite sparse near" nl);
stdout.puts("the base of a swiftly moving river. On the other" nl);
stdout.puts("side lies a transitional forest." nl);
stdout.puts("(You can't cross from here)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=147) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodlands (middle forest)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a dark forest. The surrounding" nl);
stdout.puts("woodland is populated by tall spruce trees. Further" nl);
stdout.puts("travel east is obstructed by storm-tossed trees and" nl);
stdout.puts("dense undergrowth. To the south lies a narrow" nl);
stdout.puts("clearing (not really a clearing)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=148) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodland (middle forest)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a dense forest. The surrounding" nl);
stdout.puts("woodland is populated by hundreds of towering spruce" nl);
stdout.puts("trees (the western path is obstructed by fallen" nl);
stdout.puts("trees). To the north lies a swiftly moving river (sort" nl);
stdout.puts("of a mild departure from the flourishing forest)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=149) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Forest woodland" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a dense forest. To the south, the" nl);
stdout.puts("forest is less dense, giving way to a wide path. It appears" nl);
stdout.puts("from this juncture to head west, although your directions" nl);
stdout.puts("are not remotely accurate. The space directly in front of" nl);
stdout.puts("you is obstructed by tangled undergrowth." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=150) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small clearing (east of forest)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small clearing. This clearing" nl);
stdout.puts("seems very out of place (like someone...or something?..." nl);
stdout.puts("cleared it abruptly). To the east lies a wooded mansion," nl);
stdout.puts("a two-story complex built from the ground up. A square" nl);
stdout.puts("chimney sits atop the mansion." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=151) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In front of the mansion" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in front of a large mansion. This" nl);
stdout.puts("well-crafted, wooded structure seems futuristic and" nl);
stdout.puts("astutely suited for the surrounding forest. Someone" nl);
stdout.puts("was either a genius or from the future (or both!)." nl);
stdout.puts("The doorway heading into the mansion is north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=152) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small bedroom (south of corridor)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small bedroom just south" nl);
stdout.puts("of a long corridor. The room has a bed, an armoire," nl);
stdout.puts("and a spacious closet. You also notice a large" nl);
stdout.puts("bearskin rug in the center of the room. A series of" nl);
stdout.puts("small lanterns provide ample lighting for the room." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=153) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Main hallway (within the mansion)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the main hallway of the" nl);
stdout.puts("mansion. A large mirror faces you on the western" nl);
stdout.puts("wall (towards the front door). The hallway extends" nl);
stdout.puts("past a small corridor to the north. A spacious" nl);
stdout.puts("living room lies still further north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=154) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Master Bedroom" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the Master bedroom. A king-sized" nl);
stdout.puts("bed stands against the western wall, while a large" nl);
stdout.puts("armoire occupies the eastern corner of the room. A double" nl);
stdout.puts("door leads into a small bathroom to the northeast." nl);
stdout.puts("You notice a chest of drawers here as well." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=155) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Along a corridor (near the Master bedroom)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking down a narrow corridor in the" nl);
stdout.puts("mansion. Several small bedrooms occupy either" nl);
stdout.puts("end of the hallway. Of particular importance" nl);
stdout.puts("is a spacious Master bedroom towards the west." nl);
stdout.puts("A small bathroom stands to the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=156) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Stone archway (with a corridor west)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing near a stone archway (heading" nl);
stdout.puts("west into a darkened corridor). Another hallway" nl);
stdout.puts("opens up the east, just past the main living room" nl);
stdout.puts("of the mansion. Three bedrooms occupy the western" nl);
stdout.puts("corridor, with two directly ahead." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=157) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Middle corridor (south of living room)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the middle of a corridor" nl);
stdout.puts("just south of the living room. The area opens" nl);
stdout.puts("up into a well-lit, carefully crafted room complete" nl);
stdout.puts("with a stone fireplace and mantle. Across the way," nl);
stdout.puts("a sliding glass door leads to the backyard." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=158) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In the kitchen" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small kitchen. A wood-burning" nl);
stdout.puts("stove stands in the middle, surrounded by a metal enclosure." nl);
stdout.puts("It appears to intersect the ceiling, but this doesn't seem" nl);
stdout.puts("unusual to you. After all, who wants smoke in their" nl);
stdout.puts("kitchen (not me!). A pantry lies to the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=159) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Guest bathroom" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the guest bathroom. You are amazed" nl);
stdout.puts("by the modern look of the stone basin, complete with" nl);
stdout.puts("fixtures for manipulating water. You've never seen" nl);
stdout.puts("such advanced plumbing before; usually it would" nl);
stdout.puts("empty into a hole in the ground. But not here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=160) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small bedroom" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a small bedroom. This unusual" nl);
stdout.puts("room is without a bed of any kind. Instead, someone" nl);
stdout.puts("has taken the unusual measure of crafting a large" nl);
stdout.puts("hammock from leaves and bark of the surrounding" nl);
stdout.puts("forest. This is very odd indeed!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=161) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In the living room" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a spacious living room, complete" nl);
stdout.puts("with fireplace, wooden mantle, and oak panel ceiling." nl);
stdout.puts("The fireplace is constructed out of granite and" nl);
stdout.puts("stone, both mixed together to form a solid foundation." nl);
stdout.puts("A wooden mantle rests above it." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=162) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Within the pantry (north of kitchen)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a dark pantry. There is very" nl);
stdout.puts("little light here. Although you can barely make" nl);
stdout.puts("it out, rows of shelves line either side of the" nl);
stdout.puts("room. From your point of view, they appear to be" nl);
stdout.puts("densely flat. Bread lies on the western shelf." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=163) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small toolshed" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have entered a small toolshed. Light is very" nl);
stdout.puts("sparse here, obviously. The surrounding room is" nl);
stdout.puts("covered with dust and soot, something not unusual" nl);
stdout.puts("in most toolsheds. A few shelves line the walls," nl);
stdout.puts("while a window overlooks a fountain to the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=164) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small garden" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are overlooking a small garden. Rows of flowers" nl);
stdout.puts("grow in neat columns across the ground. To the west" nl);
stdout.puts("stands a small toolshed. To the north, the garden" nl);
stdout.puts("continues near a stone fountain. The patio lies" nl);
stdout.puts("directly east of here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=165) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Outdoor patio (near a lawn and garden)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on the outdoor patio of the mansion." nl);
stdout.puts("The area is surrounded by a lawn and garden. A concrete" nl);
stdout.puts("wall encloses the lawn in both directions here. To the" nl);
stdout.puts("west lies a small garden. Further west, you notice" nl);
stdout.puts("a small toolshed." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=166) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Lawn (southern edge)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a grassy lawn. The grass tickles" nl);
stdout.puts("your feet as you traverse it. A large wall blocks" nl);
stdout.puts("passage to the south and east, while the lawn itself" nl);
stdout.puts("continues north. It looks well-maintained and cared" nl);
stdout.puts("for. The patio stands to the west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=167) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Stone fountain (complete with statue)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before an impressive stone" nl);
stdout.puts("fountain. A statue rests in the center, upholding" nl);
stdout.puts("a tilted ornate jar. Water trickles down from the" nl);
stdout.puts("jar into a mottled basin below. The water appears " nl);
stdout.puts("clear and devoid of algae." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=168) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Small garden (east of a stone fountain)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are overlooking a small garden, just east of a" nl);
stdout.puts("stone fountain. Flowers grow in neat little rows" nl);
stdout.puts("across the ground. A tall olive tree grows to the north" nl);
stdout.puts("here, hanging over the courtyard area by some ten degrees." nl);
stdout.puts("A lawn grows towards the east." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=169) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the lawn" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a grassy lawn, just east of a" nl);
stdout.puts("small garden. Further to the west, you notice a large" nl);
stdout.puts("stone fountain. Past the statue is a rotund looking" nl);
stdout.puts("courtyard, and beyond it, a concrete enclosure is" nl);
stdout.puts("plainly visible." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=170) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the lawn (eastern perimeter)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a grassy lawn. A garden grows" nl);
stdout.puts("to the west, just opposite a stone fountain. To the" nl);
stdout.puts("east, the lawn continues towards a large retaining wall" nl);
stdout.puts("(more like a tall enclosure). The outdoor patio" nl);
stdout.puts("stands to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=171) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By the olive tree" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before a large olive tree" nl);
stdout.puts("in the center of a courtyard. The branches of" nl);
stdout.puts("the olive tree extend westward toward a tall" nl);
stdout.puts("enclosure wall. To the southwest stands an" nl);
stdout.puts("impressive stone fountain, from which water" nl);
stdout.puts("flows." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=172) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By the Shinden Villa" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing outside on a grassy lawn. The beautiful Shinden Villa stands" nl); 
stdout.puts("before you, the heavy tile roofs and vermilion columns vividly apparent in the" nl); 
stdout.puts("midday sun. To the west stands a narrow water source, traditional to esoteric" nl); 
stdout.puts("practices of the Mikkyo warrior." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;


if (r=173) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Near a water source, by the bridge" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing due west near a vast water source south of Shinden Villa." nl); 
stdout.puts("There stands to the west a beautifully constructed wooden bridge. You may" nl);
stdout.puts("cross it at any time." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=174) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Atop a wooden bridge, facing west" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing atop a narrow wooden foot bridge (made from zelkova) just" nl); 
stdout.puts("in front of a narrow water source. There are small gardens to the west, but" nl); 
stdout.puts("they are not fully accessible on foot. You must reach the Western portico" nl); 
stdout.puts("before entering the Zen gardens of Shinden Villa." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=175) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Wading in the pond, south of Villa" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are waist high in a small pond just south of the Shinden Villa. To the" nl); 
stdout.puts("north, the pond arcs in a zigzag fashion with accompanying wooden bridges" nl); 
stdout.puts("to facilitate access across the outlets of the pond (which flow past the" nl); 
stdout.puts("main shrine towards the east)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=176) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Before the Western Portico" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before the Western Portico of Shinden Villa. The entry point" nl); 
stdout.puts("is marked by vermilion columns and above you rises impressive tile roofing." nl); 
stdout.puts("Beyond the entrance to the portico lies the Southern Hall, into the heart of" nl); 
stdout.puts("the western portion of the Shinden Villa Shrine." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=177) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("A shallow section of the pond, west of portico" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are wading with bare feet in a shallow section of the Shinden pond. The" nl);
stdout.puts("water source ends abruptly at a large portico to the west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=178) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Knee-high in the pond, south of Shinden Villa" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are wading nearly knee-high in a large pond just south of the beautiful" nl); 
stdout.puts("Shinden Villa. To the east lies a small wooden foot bridge. However, you" nl); 
stdout.puts("cannot reach it from here (without fully submerging yourself in water -- a" nl); 
stdout.puts("'no-no' with heavy armor and a fat tummy)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=179) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the western bridge, facing west of course" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a narrow wooden bridge just west of the main outsource" nl); 
stdout.puts("for Shinden pond. The water is fairly clean -- from what you can tell, anyway" nl); 
stdout.puts("-- and you notice beautiful birch trees towering slightly above the ground" nl); 
stdout.puts("level on a grassy section which separates the eastern portion of the pond" nl); 
stdout.puts("from the western one." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=180) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Chest-high in the pond, south of Shinden Villa" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are wading chest-high in a large pond directly south of Shinden Villa." nl); 
stdout.puts("Your access to the northern section is cut off by a fallen bridge. Apparently" nl); 
stdout.puts("someone has taken it upon themselves to make your life more difficult. Oh" nl); 
stdout.puts("well." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=181) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("South of the main villa, within the pond" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are wading chest-high in a large and exasperating water source just south" nl); 
stdout.puts("of the main villa. You may follow the source of the water as it flows west, but" nl); 
stdout.puts("be careful: Any excess items may wash away into the murky bottom below!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=182) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By a shallow pond, near the foot bridge" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are wading with bare feet in a shallow section of the Shinden pond. To the" nl); 
stdout.puts("south lies a small foot bridge, but you must follow the water source north due" nl); 
stdout.puts("to restrictions placed upon you by Kukai, the Buddhist priest who appears to" nl); 
stdout.puts("run this place." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=183) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Grassy section, Eastern Villa" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking along a grassy section in the eastern quadrant of the Shinden" nl); 
stdout.puts("Villa. The courtyard in front of you (yes, there is a small walkway heading" nl); 
stdout.puts("north, lined with flowers) belies the beauty and magnificent stupor of the" nl); 
stdout.puts("villa itself. You may head north of here into the Zen gardens." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=184) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("East of Villa, near a large birch forest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing due east near a vast water source east of Shinden Villa. The" nl); 
stdout.puts("grass is very green in this section, especially due to the water source" nl); 
stdout.puts("which seems to flow south of here into a large birch forest. From the" nl); 
stdout.puts("northeast -- just beyond this Villa -- you can make out towering mountains" nl); 
stdout.puts("which seem to raise themselves to the sky without effort. The beauty is" nl); 
stdout.puts("breathtaking." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=185) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Grassy area, near the Eastern Portico" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking across a grassy area nearest the Eastern Portico. The path you" nl); 
stdout.puts("are walking on ends abruptly in front of the portico towards the east." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=186) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Near the Portico, facing east" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing east near the portico. Interestingly, the vermilion columns" nl); 
stdout.puts("have eroded some and give evidence to the earthen material packed below it." nl); 
stdout.puts("Someone has been naughty." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=187) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By the Eastern Portico, near Southern Hall" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You stand before the Eastern Portico of Shinden Villa. Three vermilion columns" nl); 
stdout.puts("appraise your vision directly north, but much of the hard work to repaint them" nl); 
stdout.puts("has been tarnished by some vile character who shall remain anonymous. Is the" nl); 
stdout.puts("Inspector around, people?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=188) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Wading in a pond, near some buildings" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are wading through a narrow and shallow section of the water source. Just" nl); 
stdout.puts("west of here lies a vertical stretch of buildings connected to each other by" nl); 
stdout.puts("'joints'. These small connecting points are actually built into the hallway" nl); 
stdout.puts("similar to the guard house concept of Western civilization." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=189) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Overlooking the Island, across the Ohi River" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are overlooking the island near a series of arched bridges." nl); 
stdout.puts("These bridges are high enough to allow boats to pass underneath. You also" nl); 
stdout.puts("see many stone lanterns near the boat landing areas to the east and west." nl); 
stdout.puts("To the northeast, you notice the Onrin-do, a shrine of Hachi-jo. But it" nl); 
stdout.puts("is not accessible from your vantage point, across the Ohi River." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=190) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside the Southern Hall (Western Portico)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside the Southern Hall near the Western Portico. The hallway" nl); 
stdout.puts("extends several feet towards the north, where it then turns sharply east. You" nl); 
stdout.puts("notice a fishing pavilion (tsuri dono) to the south, extending from the edge" nl); 
stdout.puts("of the pavilion down to the calm waters of the pond below." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=191) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside the Southern Hall (Western Portico)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking across the Southern Hall. It extends several more feet before" nl); 
stdout.puts("turning abruptly east. The interior of the hall is fairly simple, with only a" nl); 
stdout.puts("few ornamental objects of note. The Western Portico, overlooking a small" nl); 
stdout.puts("fishing pavilion, lies several feet to the south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=192) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("A turn in the hallway (Western Portico)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached an abrupt turn in the Southern Hall, heading east. The Shinden" nl); 
stdout.puts("opens up just ahead, into a brilliant expanse spanning the central interior of" nl); 
stdout.puts("the villa. You notice several shoji screens, separating the view of the garden" nl); 
stdout.puts("from the Shinden itself. Over 15 acres spread out from the main Shinden, look-" nl); 
stdout.puts("ing silently upon mountains to the southeast." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=193) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside the Shinden (Center Villa)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are inside the Shinden, the main building of the Shinden Villa and Gardens." nl); 
stdout.puts("Several columns of shoji separate the view of the gardens from the house, but" nl); 
stdout.puts("they can be pushed aside at will to open up the view from inside. The view is" nl); 
stdout.puts("what you've come to expect -- and then some! To say it is mildly exquisite and" nl); 
stdout.puts("innately beautiful would rob the breathtaking views their due justice. Towards" nl); 
stdout.puts("the east, the Shinden narrows into a long hallway, stretching towards the" nl); 
stdout.puts("Eastern Portico, just beyond the Southern Hall." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=194) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside the Shinden (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a turn near the eastern portion of the Shinden. The Southern" nl); 
stdout.puts("hall heads south, stopping at a narrow spring pavilion, overlooking the beauty" nl); 
stdout.puts("of the main pond. You may also head east, into a small storage room (separated" nl);
stdout.puts("by shoji)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=195) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small room, separated by shoji" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small room, cut off from the rest of the Shinden by" nl); 
stdout.puts("large shoji. It is nothing more than a sleeping area for guests. Where the" nl); 
stdout.puts("master sleeps -- or even where the master is -- remains to you a mystery." nl); 
stdout.puts("The only exit is back west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=196) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside the Southern Hall (Eastern Portico)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking down a narrow hallway called the Southern Hall. To the north" nl); 
stdout.puts("lies the western portion of the main Shinden, heading west. It opens up into" nl); 
stdout.puts("a large living area, complete with removable shoji, for a better view of the" nl); 
stdout.puts("outside gardens. The hall continues north and south from this point." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=197) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside the Southern Hall (Eastern Portico)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in the Southern Hall, near the Eastern Portico. The hall" nl); 
stdout.puts("extends several feet towards the north, before turning abruptly near the" nl); 
stdout.puts("main Shinden. A small spring pavilion is visible to the south, overlooking" nl); 
stdout.puts("the pond several feet below. In order to fish, though, you will need to" nl); 
stdout.puts("head across the complex to the Western Portico, where a fishing pavilion" nl); 
stdout.puts("is present." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=198) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In an orchard of apple trees" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking through an orchard of apple trees. Large trees grow in tall" nl);
stdout.puts("rows as far as the eye can see. Looking up, you notice a large apple tree" nl);
stdout.puts("by the side of the main path. It has low-lying branches and looks climbable," nl);
stdout.puts("although caution should be taken. The orchard extends westward near a small" nl);
stdout.puts("forest (heading south)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=199) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a large, vast cavern (underground)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have entered into an impossibly large and dark cavern just below the" nl);
stdout.puts("main forest. It is obviously quite dark inside, with very little light" nl);
stdout.puts("illuminating the darkness ahead. From what you can see, the cavern slopes" nl);
stdout.puts("to the south somewhat before branching into smaller tunnels in either" nl);
stdout.puts("direction. The air is quite foul here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=200) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a twisting passageway (heading in four directions)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing at an intersection inside a vast network of small caves." nl);
stdout.puts("Several tunnels head off in all directions here (some of them quite narrow" nl);
stdout.puts("and dark). A larger tunnel heads south, possibly towards a pool of water." nl);
stdout.puts("You hear the sound of water dripping nearby. Could water be far off, you" nl);
stdout.puts("wonder?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=201) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a twisting passageway (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are crawling on your stomach in a dusty, terribly narrow passageway" nl);
stdout.puts("just east of the main cavern. You may be able to double back and enter the" nl);
stdout.puts("main cavern (to the west), but it looks risky at best! The air is almost" nl);
stdout.puts("suffocating here, and you feel dizzy and out of breath! The only obvious" nl);
stdout.puts("exit appears to be back south (unless you want to crawl even further...)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=202) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a narrow passage (sloping down to the east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("At last you reach the end of this narrow passageway! You thought it would" nl);
stdout.puts("never end! Looking out, you notice a small turnoff to the east (heading" nl);
stdout.puts("north into darkness). The light appears to dance off the walls of this" nl);
stdout.puts("tunnel, as if alive by itself! You wonder what magic lives beyond the" nl);
stdout.puts("darkness ahead?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=203) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("At the end of a small tunnel (heading north)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a small turnoff in the twisted passageway. It appears to" nl);
stdout.puts("head north into a small room. Or is it a keep of some sort? You can barely" nl);
stdout.puts("make out small candles flickering in the misty darkness in front of you. Who" nl);
stdout.puts("lit these, and why do they still burn in this suffocating world? As you" nl);
stdout.puts("ponder these mysteries, you feel an overwhelming urge to head north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=204) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a small keep (lit by candles)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have entered into a small keep illuminated by several small candles. The" nl);
stdout.puts("flames appear to dance in unison, as if moved by an unseen hand! The air is" nl);
stdout.puts("remarkably thick here, as mist drifts throughout the room seamlessly. You" nl);
stdout.puts("can't see much in here, although it appears to be a small treasure room of" nl);
stdout.puts("some sort. Perhaps you can drop things here for points?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=206) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (sloping down)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are crawling in a narrow tunnel (sloping sharply downward). It feels like" nl);
stdout.puts("a dusty trail of rocks and debris, although you can't be sure in this darkness!" nl);
stdout.puts("The tunnel winds south several hundred feet. You feel a sinking feeling as you" nl);
stdout.puts("climb down! This wasn't in the manual for the 'Greater Adventurer'! Who coded" nl);
stdout.puts("this room, anyway?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=207) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (twisting east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are crawling on your belly inside a dark tunnel. You can barely move" nl);
stdout.puts("inside this thing! As you crawl slowly to the east, you notice a small rock" nl);
stdout.puts("barring any further passage. It appears to have obstructed any view of the" nl);
stdout.puts("remaining tunnel. You'll have to find another way towards the outer" nl);
stdout.puts("entrance of this cavern..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=208) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By a large rock (within the cavern)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a large, jagged rock within the cavern. It has blocked off" nl);
stdout.puts("the entrance to the east and is not easily moved. You wonder what might of" nl);
stdout.puts("magic moved it here, but that's the least of your problems now! It appears" nl);
stdout.puts("as though this entire tunnel is collapsing! You'll have to get out before" nl);
stdout.puts("it entombs you inside...forever!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=209) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By a magical pool of water (near a cascading waterfall)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before a large pool of water. It gleams oddly in the" nl);
stdout.puts("faded light of this cavern (as if enchanted by something). The pool extends" nl);
stdout.puts("into a large waterfall to the east. It splashes down into the water below with" nl);
stdout.puts("effortless ease. The waterfall cascades down from a small crack in the rock" nl);
stdout.puts("above. A small tunnel is also here (heading west into darkness)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=210) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Within a small waterfall (splashing down from above)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a small waterfall just east of a mystical pool. The" nl);
stdout.puts("water splashes down in front of you from above, cascading down from the nearby" nl);
stdout.puts("rock. You hear a loud rushing sound as the waterfall nearly engulfs you! If it" nl);
stdout.puts("weren't so dangerous being inside, you'd feel downright giddy! The only exit is" nl);
stdout.puts("back west (out of the waterfall)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=211) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a secret tunnel (heading south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached a narrow tunnel deep within the cavern. It appears to be" nl);
stdout.puts("unknown to anyone, as the walls are not marked in any discernible way. You" nl);
stdout.puts("wonder where it leads (if anywhere)? The tunnel slopes to the south, before" nl);
stdout.puts("heading into darkness ahead. Spooky!" nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The tunnel continues south." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=212) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a secret tunnel (scaling upward)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a narrow tunnel (scaling upward some 200 feet). It appears" nl);
stdout.puts("to head to an upper level within the caverns. Thankfully, you can reach it" nl);
stdout.puts("by continuing the path towards the west. It slopes upward, requiring some" nl);
stdout.puts("effort, but you'll manage. A rope will do little good here, as you can't" nl);
stdout.puts("see a way to climb up..." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The tunnel extends upward some 200 feet." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

//jmp turkey; 

// -----------------------------------------------------------------------
// Rooms 213 to 222:
// Will be added to later; it's Thanksgiving today and I'm hungry. :) /PAP
// okay, so I'm hungry AND lazy...hehe :)                             /PAP
// and there's football on. :)                                        /PAP
//
// Yes, the rooms below can be entered, but the room descriptions
// are presently empty. They will be added to later on, however.      /PAP
// -----------------------------------------------------------------------

if (r=213) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (upper level of cavern)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes south [100 feet]..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,down>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=214) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (sloping to the south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes south [150 feet]..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=215) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (sloping to the south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes south [200 feet]..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=216) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (sloping to the south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes south [250 feet]..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=217) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (sloping to the south)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes south [stopping at 300 feet]." nl);
stdout.puts("A smaller tunnel is visible south of here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=218) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (at a narrow turnoff)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel heads east from here. There are only two visible" nl);
stdout.puts("exits here: north and east. Any other direction is halted by" nl);
stdout.puts("large vampires (only joking...) =)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=219) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes east [250 feet]..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=220) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel slopes slightly east [265 feet]..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=221) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a dark tunnel (heading east)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The tunnel stops abruptly here (near a small keep). You notice" nl);
stdout.puts("faint light dancing against the walls nearby. The light appears to" nl);
stdout.puts("be alive, prompting a question: What manner of magic lit this" nl);
stdout.puts("suffocating darkness? And what makes it work?" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("A keep stands to the east here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

if (r=222) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Within a sacred keep (slightly darkened)" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a sacred keep. It is slightly" nl);
stdout.puts("darkened, lit up by small candles nearby. There isn't" nl);
stdout.puts("much here at the moment, but perhaps you can find a" nl);
stdout.puts("use for this room in the near future?" nl);
stdout.puts("The only exit is back west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

turkey:
if (r=223) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("High atop an apple tree (standing on a tree branch)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a branch atop a large apple tree. Your vision is" nl);
stdout.puts("slightly shrouded by the leaves above, but looking out you can see" nl);
stdout.puts("a small town to the northwest (near a small forest). You also notice a" nl);
stdout.puts("long path heading deeper into a forest of tall oak trees (to the south)." nl);
stdout.puts("The only exit is back down (unless you can fly, that is!)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<down>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 224 - Dusty Path
// -------------------------------------------------------

if (r=224) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On a dusty path" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking on a dusty path heading west. It appears" nl);
stdout.puts("to extend a few miles towards the southwest. To the north" nl);
stdout.puts("of the path lies mystic mountains, bathed in a dull mist." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The path heads back east towards a small village." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 225 - On the path, heading north
// -------------------------------------------------------

if (r=225) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the path, heading north" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking along a dusty path that turns abruptly here" nl);
stdout.puts("near a misty range of mountains. A thick, dull mist surrounds" nl);
stdout.puts("you in all directions here. The only exit is back east." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("You can enter the mountains to the north, but be careful!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 226 - Misty Mountains [100 feet]
// -------------------------------------------------------

if (r=226) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Misty Mountains [100 feet]" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are ascending a misty mountain range at 100 feet above" nl);
stdout.puts("sea level. A swirling mist encircles your vision in all directions" nl);
stdout.puts("here. Up ahead, the terrain becomes rockier and less steady." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 227 - At the base of a Misty Mountain [200 feet]
// -------------------------------------------------------

if (r=227) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("At the base of a Misty Mountain [200 feet]" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have reached the base of a large, misty mountain range" nl);
stdout.puts("some 200 feet above the sea. Looking down, you notice a grassy" nl);
stdout.puts("valley to the southwest, while a steep path heads north up the mountain." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("There is a small path heading west here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 228 - Misty Mountain East [200 feet]
// -------------------------------------------------------

if (r=228) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Misty Mountain East [200 feet]" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Alas, the limits of the mountains have stopped you from moving" nl);
stdout.puts("further to the east. A steep drop confronts you here. Be careful" nl);
stdout.puts("not to fall! The only sensible path is back west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 229 - Misty Mountains West [229 feet]
// -------------------------------------------------------

if (r=229) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Misty Mountains West [229 feet]" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The Misty Mountains give way here to a large ravine. It drops down" nl);
stdout.puts("into a grassy valley far below. The air is clean and fresh here, despite" nl);
stdout.puts("the misty fog. You can head west towards the ravine, or back east." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The ravine looks passable without a rope, but don't fall trying!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 230 - Misty Mountains North [325 feet]
// -------------------------------------------------------

if (r=230) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Misty Mountains North [325 feet]" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing 325 feet above the base of the Misty Mountains." nl);
stdout.puts("The fog is illuminated by wisping flashes of light, oddly moving about" nl);
stdout.puts("like wayward fireflies. In the softness of the light a path is visible east" nl);
stdout.puts("of here." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("You notice strange flashes of light here, wisping about..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 231 - At the end of the Misty Mountains [400 feet]
// -------------------------------------------------------

if (r=231) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("At the end of the Misty Mountains [400 feet]" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("At last you reach the top of the Misty Mountain range. Clouds" nl);
stdout.puts("surround the tip of the mountain like vultures over fresh meat." nl);
stdout.puts("To the north lies a small cave, beckoning you further still..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 232 - Entrance to the Misty Cave
// -------------------------------------------------------

if (r=232) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Entrance to the Misty Cave" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You stand at the entrance to the Misty Cave, a small cavern" nl);
stdout.puts("set into the hallowed remains of the Northern Misty Mountains." nl);
stdout.puts("From here the cave heads into darkness, alone with the spirit." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("A magical force has blocked passage to the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 233 - Twisting tunnel, inside Misty Cavern
// -------------------------------------------------------

if (r=233) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Twisting tunnel, inside Misty Cavern" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking inside a dark, damp cavern inside of Misty" nl);
stdout.puts("Cave. The air is quite foul here! It is very difficult to breathe" nl);
stdout.puts("inside these cavern walls. Up ahead lies a small tunnel." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 234 - A twisting tunnel, heading west
// -------------------------------------------------------

if (r=234) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("A twisting tunnel, heading west" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking inside a twisting, foul smelling tunnel deep inside" nl);
stdout.puts("of Misty Cave. A stone archway extends overhead, remarkable" nl);
stdout.puts("considering the tunnel's height. It heads west into a small keep." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("The archway is usually blocked by a very large golem." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 235 - Inside a rare keep, deep within Misty Cave
// -------------------------------------------------------

if (r=235) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Inside a rare keep, deep within Misty Cave" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing inside a dark but mystically illuminated" nl);
stdout.puts("keep within Misty Cave. The air is quite still here, as a magical" nl);
stdout.puts("force pervades throughout the room. A few candles are also" nl);
stdout.puts("visible here, giving light to the silent spirit of the dark. The only" nl);
stdout.puts("exit is back east, towards the tunnel." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("A mystical force pervades throughout the keep." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 236 - End of the Misty Mountains, near a large ravine
// -------------------------------------------------------

if (r=236) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("End of the Misty Mountains, near a large ravine" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You stand at the western edge of the Misty Mountain range, far" nl);
stdout.puts("beyond the swirling, foggy mist of the mountains. To the west, a" nl);
stdout.puts("large ravine is visible, heading into a grassy valley below." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 237 - Overlooking a large ravine
// -------------------------------------------------------

if (r=237) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Overlooking a large ravine" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are overlooking a large ravine at the western edge of the" nl);
stdout.puts("Misty Mountains. A deep gorge drops down below, falling off" nl);
stdout.puts("several hundred feet into a grassy valley." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("You must be careful climbing down, as a slip could be fatal!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,down>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 238 - Mystic Gorge, west of a grassy valley
// -------------------------------------------------------

if (r=238) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Mystic Gorge, west of a grassy valley" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You have descended into Mystic Gorge, an expansive area" nl);
stdout.puts("near a large green valley. The gorge opens up here into the" nl);
stdout.puts("valley towards the west. It extends to the north and south here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 239 - In a large, grassy valley
// -------------------------------------------------------

if (r=239) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a large, grassy valley" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking along in a large, grassy valley west of Mystic" nl);
stdout.puts("Gorge. The valley extends several miles to the north and south." nl);
stdout.puts("A small pond is visible a few miles towards the northeast." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 240 - Cyprus Valley, near a small pond
// -------------------------------------------------------

if (r=240) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Cyprus Valley, near a small pond" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in Cyprus Valley, so-called because of the" nl);
stdout.puts("many cypress trees growing in the near distance. Like hands" nl);
stdout.puts("waving in a happy breeze, they beckon you to explore further." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("A path breaks off here and heads west." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 241 - In a grassy meadow
// -------------------------------------------------------

if (r=241) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a grassy meadow" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing in a lush, grassy meadow west of Cyprus" nl);
stdout.puts("Valley. The area is mostly bare, save for the mountains towards" nl);
stdout.puts("the northeast. A gentle breeze rustles the grass in front of you" nl);
stdout.puts("ever so lightly." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 242 - In a grassy meadow, heading west
// -------------------------------------------------------

if (r=242) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In a grassy meadow, heading west" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in a grassy meadow heading towards the west." nl);
stdout.puts("The grass in front of you tickles your feet, sending small shivers" nl);
stdout.puts("up your spine. You notice a lone tree growing north of here." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The tree is too far off to examine closely. You must get closer." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 243 - By the base of a large fig tree
// -------------------------------------------------------

if (r=243) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By the base of a large fig tree" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing the base of a large fig tree. A plethora of small" nl);
stdout.puts("figs grow in columns across every branch of the tree. The only" nl);
stdout.puts("way to reach them, however, is by climbing up!" nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The tree looks climbable without a rope." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,up>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 244 - On the branch of a large fig tree
// -------------------------------------------------------

if (r=244) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("On the branch of a large fig tree" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing on a branch high atop a large fig tree. Your" nl);
stdout.puts("vision is surrounded by many small figs (which are small" nl);
stdout.puts("oval-shaped fruit). To the east lies a small eagle's nest." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The eastern branch is somewhat narrow, so be careful!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<east,down>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 245 - Into the eagle's nest
// -------------------------------------------------------

if (r=245) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Into the eagle's nest" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a small eagle's nest on a branch high atop a" nl);
stdout.puts("large fig tree. Surrounding the nest are several intertwined" nl);
stdout.puts("leaves, making up the base of the nest itself. An eagle is" nl);
stdout.puts("normally here, standing watch over the nest." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("Inside the nest are a few scattered items (some rare)." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 246 - In the Southern Valley
// -------------------------------------------------------

if (r=246) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("In the Southern Valley" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are walking in the Southern Valley, a lone meadow south" nl);
stdout.puts("of the Cyprus hillside. The valley extends several miles in all" nl);
stdout.puts("visible directions. You notice nothing unusual about that." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north,east>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 247 - At the end of Southern Valley
// -------------------------------------------------------

if (r=247) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("At the end of Southern Valley" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You stand at the very end of Southern Valley, stopping abruptly" nl);
stdout.puts("near a series of very large boulders. Why these boulders are" nl);
stdout.puts("here (or who placed them) remains a deep mystery." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south,west>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 248 - By a large boulder
// -------------------------------------------------------

if (r=248) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By a large boulder" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are facing a large boulder at the end of the Southern" nl);
stdout.puts("Valley. This boulder looks quite massive in scale, overshadowing" nl);
stdout.puts("you by some fifty feet! It is obvious that whomever placed it here" nl);
stdout.puts("does not want anyone to move further south." nl);
console.setAttrs( console.green, console.blue );
stdout.puts("The boulder is not passable, not by wind nor magic wand." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<north>" nl);
console.setAttrs( console.white, console.blue );
endif;

// room 249 - By a mossy pond
// -------------------------------------------------------

if (r=249) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("By a mossy pond" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are standing before a mossy pond at the edge of the valley." nl);
stdout.puts("The water appears mossy green, almost dull and lifeless. In the" nl);
stdout.puts("reflection you notice a sphere of light hovering overhead (shining" nl);
stdout.puts("light into the pond from above). But when you look up, it vanishes!" nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("There is a legend that says a mystical unicorn often rests here." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Exits: ");
console.setAttrs( console.yellow, console.blue );
stdout.puts("<south>" nl);
console.setAttrs( console.white, console.blue );
endif;

// -------------------------------------------------------
// Version 3.30 to 3.40 bug fix notes                 /PAP
// -------------------------------------------------------

// > Hey Sevag,
// > 
// > I looked for the room near the mansion where it
// > doesn't allow the player to go back west. However, I
// > couldn't locate it. Do you remember the name of the
// > room?
// > 
// > Paul
// > 

// Yes, when you are "On the path (heading east to west)"
// And you go east from there to "Forest Junction", you can't go back
// west.

// A mini map:

// ......|       |   to mansion 
// ..0---0---0-->0---
// ..|       |   Forest Junction
// --0 bear
// ..|

// The '>' indicates one way travel.

// Eventually, the way west becomes activated somehow.

// Also, the rooms above the Valkeyrie are broken... nothing is displayed
// when you go up.

// Another thing... are the vampire and dragon supposed to be in the same
// room?

// -------------------------------------------------------
// Get input from user (or...)
// "The drunken parser from hell!"                    /PAP
// -------------------------------------------------------
// **********************************************
// *                                            *
// *  This routine parses string 'w' and breaks *
// * it down into individual words.             *
// *                                            *
// **********************************************
// -------------------------------------------------------
show:
// place noun#7
// -------------------------------------------------------
if(wf=1 && j<>15) then
console.setAttrs( console.cyan, console.blue );
mov(46,ebx);
mov(r,lo[ebx*4]);
stdout.puts("Werewolf arrives." nl);
endif;
if(tsk=1 && j<>15) then
console.setAttrs( console.yellow, console.blue );
mov(64,ebx);
mov(r,lo[ebx*4]);
stdout.puts("Tursk arrives." nl);
endif;
mov(7,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("lantern" nl);
endif;

// place noun#8
// -------------------------------------------------------

mov(8,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("oil" nl);
endif;

// place noun#9
// -------------------------------------------------------

mov(9,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("rope" nl);
endif;

// place noun#10
// -------------------------------------------------------

mov(10,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("key" nl);
endif;

// place noun#11
// -------------------------------------------------------

mov(11,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("bottle" nl);
endif;

// place noun#12
// -------------------------------------------------------

mov(12,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("dagger" nl);
endif;

// place noun#13
// -------------------------------------------------------

mov(13,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("sword" nl);
endif;

// place noun#14
// -------------------------------------------------------

mov(14,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("axe" nl);
endif;

// place noun#15
// -------------------------------------------------------

mov(15,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("scimitar" nl);
endif;

// place noun#16
// -------------------------------------------------------

mov(16,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("longsword" nl);
endif;

// place noun#17
// -------------------------------------------------------

mov(17,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("broadsword" nl);
endif;

// place noun#18
// -------------------------------------------------------

mov(18,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("battleaxe" nl);
endif;

// place noun#19
// -------------------------------------------------------

mov(19,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("cleaver" nl);
endif;

// place noun#20
// -------------------------------------------------------

mov(20,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("armor" nl);
endif;

// place noun#21
// -------------------------------------------------------
// Can we get a redundancy check, please?
// -------------------------------------------------------
 
mov(21,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("shield" nl);
endif;

// place noun#22
// -------------------------------------------------------

mov(22,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("helmet" nl);
endif;

// place noun#23
// -------------------------------------------------------

mov(23,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("gauntlets" nl);
endif;

// place noun#24
// -------------------------------------------------------

mov(24,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("cloak" nl);
endif;

// place noun#25
// -------------------------------------------------------

mov(25,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.white, console.blue );
stdout.puts("ring" nl);
endif;

// place noun#26
// -------------------------------------------------------

mov(26,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("clerk" nl);
endif;

// place noun#27
// -------------------------------------------------------

mov(27,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("villager" nl);
endif;

// place noun#28
// -------------------------------------------------------

mov(28,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("wolf" nl);
endif;

// place noun#29
// -------------------------------------------------------

mov(29,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("warrior" nl);
endif;

// place noun#30
// -------------------------------------------------------

mov(30,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("ghost" nl);
endif;

// place noun#31
// -------------------------------------------------------

mov(31,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("goblin" nl);
endif;

// place noun#32
// -------------------------------------------------------

mov(32,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("elf" nl);
endif;

// place noun#33
// -------------------------------------------------------

mov(33,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("hobbit" nl);
endif;

// place noun#34
// -------------------------------------------------------

mov(34,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("paladin" nl);
endif;

// place noun#35
// -------------------------------------------------------

mov(35,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("skeleton" nl);
endif;

// place noun#36
// -------------------------------------------------------

mov(36,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("vampire" nl);
endif;

// place noun#37
// -------------------------------------------------------

mov(37,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("sorcerer" nl);
endif;

// place noun#38
// -------------------------------------------------------

mov(38,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("dragon" nl);
endif;

// place noun#39
// -------------------------------------------------------

mov(39,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("knight" nl);
endif;

// place noun#40
// -------------------------------------------------------

mov(40,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("barbarian" nl);
endif;

// place noun#42
// -------------------------------------------------------

mov(42,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("bear" nl);
endif;

// place noun#43
// -------------------------------------------------------

mov(43,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("kingcrab" nl);
endif;

// place noun#44
// -------------------------------------------------------

mov(44,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("crab" nl);
endif;

// place noun#45
// -------------------------------------------------------

mov(45,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("thief" nl);
endif;

// place noun#46
// -------------------------------------------------------

mov(46,ebx);
mov(lo[ebx*4],eax);
if(eax=r && wf=0) then
console.setAttrs( console.red, console.blue );
stdout.puts("werewolf" nl);
endif;
mov(46,ebx);
mov(lo[ebx*4],eax);
if(eax=r && wf=1) then
console.setAttrs( console.green, console.blue );
stdout.puts("werewolf" nl);
endif;

// place noun#47
// -------------------------------------------------------

mov(47,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("butler" nl);
endif;

// place noun#48
// -------------------------------------------------------

mov(48,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("eddie" nl);
endif;

// place noun#49
// -------------------------------------------------------

mov(49,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("bum" nl);
endif;

mov(51,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("food" nl);
endif;

mov(52,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("demigorgon" nl);
endif;

mov(53,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.green, console.blue );
stdout.puts("monk" nl);
endif;

mov(54,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.green, console.blue );
stdout.puts("kukai" nl);
endif;

mov(55,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("shroud" nl);
endif;

mov(56,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("buckler" nl);
endif;

mov(57,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("flute" nl);
endif;

mov(58,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.yellow, console.blue );
stdout.puts("A hellhound is here, guarding the cavern entrance" nl);
mov(slp,eax);
 if(eax=1) then
  stdout.puts("The hellhound is asleep..." nl);
 endif;
endif;

mov(59,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("apple" nl);
endif;

mov(60,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("rations" nl);
endif;

mov(61,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("ghoul" nl);
endif;

mov(62,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("valkyrie" nl);
endif;

mov(63,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("lich" nl);
endif;

mov(64,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.green, console.blue );
stdout.puts("Tursk" nl);
endif;

mov(65,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("wannabee" nl);
endif;

mov(66,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("horn" nl);
endif;

mov(67,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("firewhip" nl);
endif;

mov(68,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("anklet" nl);
endif;

mov(69,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("boomerang" nl);
endif;

mov(70,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.yellow, console.blue );
stdout.puts("A giant golem is here, smashing rocks." nl);
endif;

mov(71,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.yellow, console.blue );
stdout.puts("A will o' the wisp flutters about, lighting the darkness ahead." nl);
endif;

mov(72,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("goat" nl);
endif;

mov(73,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("kobold" nl);
endif;

mov(74,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("eagle" nl);
endif;

mov(75,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
console.setAttrs( console.yellow, console.blue );
stdout.puts("A magical unicorn is here, drinking from a nearby pond." nl);
endif;
// -------------------------------------------------------
// Now we take the string "w" and feed it to the
// mean ol' parser. If it doesn't like it, it prints
// out some message like, "Huh? Check your verb/
// noun." Then it shifts back to loop Main.           /PAP
// -------------------------------------------------------
// See vast improvements to parser using matchword
// a restructureing of the remaining str.index is
// suggested in the future
// one suggestion is to nest them in if... elseif loops
// to make the code shorter.					/SEVAG
// ---------------------------------------------------------

parse:

// this is a major memory leak!  I commented out this code.
// stralloc needs to be used ONLY ONCE!			/SEVAG
// ----------------------------------------------------------
//stralloc( 80 );	// don't do this!  allready allocated... big memory leak
// YIPES! Every time through the loop?
// -------------------------------------------------------
// I know, I know. Parse is the loop from hell. :)    /PAP
// -------------------------------------------------------
//mov( eax, w );
// -------------------------------------------------------
// Standard string flush and input routines           /PAP
// -------------------------------------------------------
stdin.flushInput();
console.setAttrs( console.magenta, console.blue );
stdout.puts(">");
jmp infobar;
parse2:
console.setAttrs( console.green, console.blue );
stdin.gets(w);
console.setAttrs( console.white, console.blue );
// -------------------------------------------------------
// Reset the value of "s" and "j" every time          /PAP
// -------------------------------------------------------
mov(0,s); // s=noun
mov(0,j); // j=verb
// -------------------------------------------------------
// stdout.put(j,nl);     /dbg
// -------------------------------------------------------
// Rest of code suggested by myself and others        /PAP
// -------------------------------------------------------
// Now we begin the painstaking process of checking
// each word in "w" to see if there is a match. If there
// is, we set variable "s" to the appropriate value.  /PAP
// -------------------------------------------------------
verb25:
mov(fd,eax);
sub(1,eax);
mov(eax,fd);
if(eax=25)then
console.setAttrs( console.cyan, console.blue );
stdout.puts("You are running out of food!" nl);
endif;
mov(r,ebx);
if(ebx=208)then
console.setAttrs( console.white, console.blue );
stdout.puts("The western wall collapses. You are now trapped!" nl);
mov(r,eax);
mov(0,m[eax*4]);
endif;
if(eax=0)then
console.setAttrs( console.cyan, console.blue );
stdout.puts("You collapse from starvation..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Alas, not one of your better moves..." nl);
console.setAttrs( console.red, console.blue );
jmp frog;
endif;
if(qs>6) then
mov(1,ebx);
mov(ebx,wf);
endif;
if(lo[7*4]=-1 && qs=1) then
mov(2,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Lantern quest completed! ***" nl);
mov(g,ebx);
add(100,ebx);
mov(ebx,g);
endif;
if(lo[31*4]=998 && qs=2) then
mov(3,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Goblin quest completed! ***" nl);
mov(g,ebx);
add(250,ebx);
mov(ebx,g);
endif;
if(r=67 && qs=3) then
mov(4,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Castle quest completed! ***" nl);
mov(g,ebx);
add(300,ebx);
mov(ebx,g);
endif;
if(lo[37*4]=998 && qs=4) then
mov(5,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Sorcerer quest completed! ***" nl);
mov(g,ebx);
add(325,ebx);
mov(ebx,g);
endif;
if(lo[47*4]=998 && qs=5) then
mov(6,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Mansion quest completed! ***" nl);
mov(g,ebx);
add(450,ebx);
mov(ebx,g);
endif;
mov(51,ebx);
if(lo[ebx*4]<>-1) then
jmp frog44;
endif;
mov(r,eax);
if(lo[46*4]=eax && lo[51*4]=-1 && wf=0) then
console.setAttrs( console.white, console.blue );
stdout.puts("The werewolf eyes your food, and begins following you..." nl);
mov(1,ebx);
mov(ebx,wf);
endif;
mov(r,eax);
if(lo[64*4]=eax && lo[56*4]=-1 && tsk=0 || lo[64*4]=eax && lo[56*4]=205 && tsk=0) then
console.setAttrs( console.white, console.blue );
stdout.puts("Tursk looks closely at your shield..." nl);
stdout.puts("Tursk says,'That shield was once mine...I shall follow you now!'" nl);
mov(1,ebx);
mov(ebx,tsk);
endif;
mov(r,eax);
if(lo[46*4]=eax && qs=6) then
mov(7,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Befriend werewolf quest completed! ***" nl);
mov(g,ebx);
add(500,ebx);
mov(ebx,g);
mov(1,ebx);
mov(ebx,wf);
endif;
frog44:
if(lo[36*4]=998 && qs=7) then
mov(8,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Vampire quest completed! ***" nl);
mov(g,ebx);
add(525,ebx);
mov(ebx,g);
endif;
if(lo[63*4]=998 && qs=8) then
mov(9,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Cavern quest completed! ***" nl);
mov(g,ebx);
add(600,ebx);
mov(ebx,g);
endif;
if(lo[38*4]=998 && qs=9) then
mov(10,ebx);
mov(ebx,qs);
console.setAttrs( console.cyan, console.blue );
stdout.puts("*** Dragon quest completed! ***" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Congratulations!!! You've won HLA Adventure!" nl);
jmp frog2;
endif;

// ------------------------------------------------------
// strmatch code suggested by Sevag Krikorian on
// 06/03/2005 (via Yahoo Groups "aoaprogramming")    /PAP
// ------------------------------------------------------
// -------------------------------------------------------
// Routines n8, n9 and n10 recoded by Jon Ripley for
// abbreviations of look, quit and examine commands.  /PAP
// ------------------------------------------------------- 
// these routines incorporated into the single letter 
// command checker						/SEVAG
// --------------------------------------------------------- 									
/*n8:
cmp(al,'l');
jne n9;
if(j=15)then
mov(0,s);
mov(15,j);
jmp n12;
endif;
n9:
cmp(al,'q');
jne n10;
if(j=14)then
mov(0,s);
mov(14,j);
jmp n12;
endif;
n10:
cmp(al,'x');
jne n12;
if(j=10)then
mov(0,s);
mov(10,j);
jmp n12;
endif;
n12:

*/

// check for single character commands			/SEVAG
//-----------------------------------------------------------
if (str.length (w) = 1) then
	
	// player entered 1 letter command
	mov (0, s);
	mov (0, j);
	mov (w, eax);
	mov ([eax], al);	// load the character into al
	
	if (al = 'n') then

		mov(1,s);
		mov(1,j);
		
	elseif (al = 's') then
		
		mov(2,s);
		mov(1,j);
	
	elseif (al = 'e') then
		
		mov(3,s);
		mov(1,j);		
		
	elseif (al = 'w') then
		
		mov(4,s);
		mov(1,j);
		
	elseif (al = 'u') then
		
		mov(5,s);
		mov(1,j);
		
	elseif (al = 'd') then
		
		mov(6,s);
		mov(1,j);
	
	elseif (al = '?') then
		
		mov (17, j);
		
	elseif (al = 'l') then
		
		mov (15, j);
		
	elseif (al = 'q') then
		
		mov (14, j);
		
	elseif (al = 'x') then
		
		mov (10, j);
	endif;
	
	// we don't need to check anything else
	jmp process;
endif;

if (matchword ( w, "credits") ) then
      console.setAttrs( console.cyan, console.blue );
      stdout.puts("HLA Adventure credits:" nl);
      console.setAttrs( console.green, console.blue );
      stdout.puts("Sevag Krikorian, programmer, aoaprogramming" nl);
      stdout.puts("Randy Hyde, HLA author, aoaprogramming" nl);
      stdout.puts("Jon Ripley, programmer, www" nl);
      stdout.puts("Frank Kotler, programmer, aoaprogramming" nl);
      stdout.puts("Beth Stone, developer, alt.lang.asm" nl);
      stdout.puts("Ryan McLaughlin, developer/beta-test, cousin" nl nl);
      console.setAttrs( console.white, console.blue );
      stdout.puts("'The Road Not Taken' by Robert Frost" nl nl);
      stdout.puts("Two roads diverged in a yellow wood" nl);
      stdout.puts("And sorry I could not travel both" nl);
      stdout.puts("And be one traveler, long I stood" nl);
      stdout.puts("And looked down one as far as I could" nl);
      stdout.puts("To where it bent in the undergrowth" nl nl);
      stdout.puts("Then took the other as just as fair" nl);
      stdout.puts("And having perhaps the better claim" nl);
      stdout.puts("Because it was grassy and wanted wear" nl);
      stdout.puts("Though as for that, the passing there" nl);
      stdout.puts("Had worn them really about the same" nl nl);
      console.setAttrs( console.yellow, console.blue );
      stdout.puts("(Press any key...)" nl);
      stdin.getc();
      console.setAttrs( console.white, console.blue );
      stdout.puts("And both that morning equally lay" nl);
      stdout.puts("In leaves no step had trodden black" nl);
      stdout.puts("Oh, I kept the first for another day!" nl);
      stdout.puts("Yet, knowing how way leads onto way" nl);
      stdout.puts("I doubted if I should ever come back" nl nl);
      stdout.puts("I shall be telling this with a sigh" nl);
      stdout.puts("Somewhere ages and ages hence" nl);
      stdout.puts("Two roads diverged in a wood" nl);
      stdout.puts("And I took the one less traveled by" nl);
      stdout.puts("And that has made all the difference" nl nl);
jmp parse;
endif;


// for verbs, well be useing the new function "matchword"
//									/SEVAG
// ---------------------------------------------------------
verb21:

if (matchword (w, "get") || matchword (w, "take")) then

	mov (2, j);
	
elseif (matchword (w, "go")) then
        console.setAttrs( console.cyan, console.blue );
        stdout.puts("Please use compass directions (e.g. omit the 'go' verb)." nl);
        jmp parse;
        // mov (1, j);
	
elseif (matchword (w, "drop") || matchword (w, "put")) then
	
	mov (3, j);

elseif (matchword (w, "wield")) then
	
	mov (4, j);
	
elseif (matchword (w, "unwield")) then
	
	mov (5, j);

elseif (matchword (w, "wear") || matchword (w, "don")) then
	
	mov (6, j);
	
elseif (matchword (w, "remove") || matchword (w, "doff")) then
	
	mov (7, j);
	
elseif (matchword (w, "buy")) then
	
	mov (8, j);
	
elseif (matchword (w, "sell")) then
	
	mov (9, j);
	
elseif ( matchword (w, "exa") || matchword (w, "examine") || matchword (w, "read") ) then
	
	mov (10, j);
	
elseif (matchword (w, "use")) then
	
	mov (11, j);
	
elseif (matchword (w, "kill") || matchword (w, "slay") || matchword (w, "attack")) then
	
	mov (12, j);

elseif (matchword (w, "inventory") || matchword (w, "inv")) then
	
	mov (13, j);
	
elseif (matchword (w, "goto mansion")) then
	
	mov (151, r);
	console.setAttrs( console.cyan, console.blue );
	stdout.puts("ZIIIIIPPPPPPPPPPPPPPPPPP!" nl);
	console.setAttrs( console.white, console.blue );
	stdout.puts("You are magically deported to the mansion..." nl);
	jmp Room;
	
elseif ( matchword (w, "quit")) then
	
	mov (14, j); 

elseif (matchword (w, "look")) then
	
	mov (15, j);
	jmp verb98;
	
elseif (matchword (w, "talk") || matchword (w, "talk to") || matchword (w, "say")) then
	
	mov (25, j);

elseif (matchword (w, "list")) then
	
	mov (16, j);
	
elseif (matchword (w, "scord")) then
	
	mov (17, j);
	
elseif (matchword (w, "help")) then
	
	mov (18, j);
	
elseif (matchword (w, "enter")) then
	
	mov (19, j);

elseif (matchword (w, "save") || matchword (w, "save game") || matchword (w, "store")) then
	
	mov (20, j);
	
elseif (matchword (w, "eat")) then
	
	mov (21, j);
	
elseif (matchword (w, "play") || matchword (w, "blow") ) then
	
	mov (11, j);

// ------------------------------------------------------
// Jon Ripley has suggested additional verbs for use
// in HLA Adventure. I have incorporated his suggestions
// into the verbs below.                             /PAP
// ------------------------------------------------------
// take, put, don, doff, slay, attack, store, welcome
// most of these have been moved above for better
// readablity							/SEVAG
// ---------------------------------------------------------

elseif ( matchword (w, "welcome")) then
	
	mov (25, j);
	
endif;

// now check for s part of string
// still using str.index here, this should be fixed
// to work better by enclosing the entire thing in
// a conditional structure:
// eg:
// if (str.index (w, "lantern")) then
//	mov (7, s);
// elseif (str.index (w, "oil")) then
//	mov (8, s);
// elseif ....							/SEVAG
// ----------------------------------------------------------

// ------------------------------------------------------
// nouns, keep str.index for now
str.index(w,"lantern");
if((type int32 eax)  >= 0) then 
	mov(7,s);
endif;
str.index(w,"oil");
if((type int32 eax)  >= 0) then 
	mov(8,s);
endif;
str.index(w,"rope");
if((type int32 eax)  >= 0) then 
	mov(9,s);
endif;
str.index(w,"key");
if((type int32 eax)  >= 0) then 
	mov(10,s);
endif;
str.index(w,"bottle");
if((type int32 eax)  >= 0) then 
	mov(11,s);
endif;
str.index(w,"dagger");
if((type int32 eax)  >= 0) then 
	mov(12,s);
endif;
str.index(w,"sword");
if((type int32 eax)  >= 0) then 
	mov(13,s);
endif;
str.index(w,"axe");
if((type int32 eax)  >= 0) then 
	mov(14,s);
endif;
str.index(w,"scimitar");
if((type int32 eax)  >= 0) then 
	mov(15,s);
endif;
str.index(w,"longsword");
if((type int32 eax)  >= 0) then 
	mov(16,s);
endif;
str.index(w,"broadsword");
if((type int32 eax)  >= 0) then 
	mov(17,s);
endif;
str.index(w,"battleaxe");
if((type int32 eax)  >= 0) then 
	mov(18,s);
endif;
str.index(w,"cleaver");
if((type int32 eax)  >= 0) then 
	mov(19,s);
endif;
str.index(w,"armor");
if((type int32 eax)  >= 0) then 
	mov(20,s);
endif;
str.index(w,"shield");
if((type int32 eax)  >= 0) then 
	mov(21,s);
endif;
str.index(w,"helmet");
if((type int32 eax)  >= 0) then 
	mov(22,s);
endif;
str.index(w,"gauntlets");
if((type int32 eax)  >= 0) then 
	mov(23,s);
endif;
str.index(w,"cloak");
if((type int32 eax)  >= 0) then 
	mov(24,s);
endif;
str.index(w,"ring");
if((type int32 eax)  >= 0) then 
	mov(25,s);
endif;
str.index(w,"clerk");
if((type int32 eax)  >= 0) then 
	mov(26,s);
endif;
str.index(w,"villager");
if((type int32 eax)  >= 0) then 
	mov(27,s);
endif;
str.index(w,"wolf");
if((type int32 eax)  >= 0) then 
	mov(28,s);
endif;
str.index(w,"warrior");
if((type int32 eax)  >= 0) then 
	mov(29,s);
endif;
str.index(w,"ghost");
if((type int32 eax)  >= 0) then 
	mov(30,s);
endif;
str.index(w,"goblin");
if((type int32 eax)  >= 0) then 
	mov(31,s);
endif;
str.index(w,"elf");
if((type int32 eax)  >= 0) then 
	mov(32,s);
endif;
str.index(w,"hobbit");
if((type int32 eax)  >= 0) then 
	mov(33,s);
endif;
str.index(w,"paladin");
if((type int32 eax)  >= 0) then 
	mov(34,s);
endif;
str.index(w,"skeleton");
if((type int32 eax)  >= 0) then 
	mov(35,s);
endif;
str.index(w,"vampire");
if((type int32 eax)  >= 0) then 
	mov(36,s);
endif;
str.index(w,"sorcerer");
if((type int32 eax)  >= 0) then 
	mov(37,s);
endif;
str.index(w,"dragon");
if((type int32 eax)  >= 0) then 
	mov(38,s);
endif;
str.index(w,"knight");
if((type int32 eax)  >= 0) then 
        mov(39,s);
endif;
str.index(w,"barbarian");
if((type int32 eax)  >= 0) then 
        mov(40,s);
endif;
str.index(w,"board");
if((type int32 eax)  >= 0) then
        mov(41,s);
endif;
str.index(w,"bear");
if((type int32 eax)  >= 0) then
        mov(42,s);
endif;
str.index(w,"kingcrab");
if((type int32 eax)  >= 0) then
        mov(43,s);
endif;
str.index(w,"crab");
if((type int32 eax)  >= 0) then
        mov(44,s);
endif;
str.index(w,"thief");
if((type int32 eax)  >= 0) then
        mov(45,s);
endif;
str.index(w,"werewolf");
if((type int32 eax)  >= 0) then
        mov(46,s);
endif;
str.index(w,"butler");
if((type int32 eax)  >= 0) then
        mov(47,s);
endif;
str.index(w,"eddie");
if((type int32 eax)  >= 0) then
        mov(48,s);
endif;
str.index(w,"bum");
if((type int32 eax)  >= 0) then
        mov(49,s);
endif;
str.index(w,"portal");
if((type int32 eax)  >= 0) then
        mov(50,s);
endif;
str.index(w,"food");
if((type int32 eax)  >= 0) then
        mov(51,s);
endif;
str.index(w,"demigorgon");
if((type int32 eax)  >= 0) then
        mov(52,s);
endif;
str.index(w,"monk");
if((type int32 eax)  >= 0) then
        mov(53,s);
endif;
str.index(w,"kukai");
if((type int32 eax)  >= 0) then
        mov(54,s);
endif;
str.index(w,"shroud");
if((type int32 eax)  >= 0) then
        mov(55,s);
endif;
str.index(w,"buckler");
if((type int32 eax)  >= 0) then
        mov(56,s);
endif;
str.index(w,"flute");
if((type int32 eax)  >= 0) then
        mov(57,s);
endif;
str.index(w,"hellhound");
if((type int32 eax)  >= 0) then
        mov(58,s);
endif;
str.index(w,"apple");
if((type int32 eax)  >= 0) then
        mov(59,s);
endif;
str.index(w,"rations");
if((type int32 eax)  >= 0) then
        mov(60,s);
endif;
str.index(w,"ghoul");
if((type int32 eax)  >= 0) then
        mov(61,s);
endif;
str.index(w,"valkyrie");
if((type int32 eax)  >= 0) then
        mov(62,s);
endif;
str.index(w,"lich");
if((type int32 eax)  >= 0) then
        mov(63,s);
endif;

str.iindex(w,"tursk");
if((type int32 eax)  >= 0) then
        mov(64,s);
endif;
str.index(w,"wannabee");
if((type int32 eax)  >= 0) then
        mov(65,s);
endif;
str.index(w,"horn");
if((type int32 eax)  >= 0) then
        mov(66,s);
endif;
str.index(w,"firewhip");
if((type int32 eax)  >= 0) then
        mov(67,s);
endif;
str.index(w,"anklet");
if((type int32 eax)  >= 0) then
        mov(68,s);
endif;
str.index(w,"boomerang");
if((type int32 eax)  >= 0) then
        mov(69,s);
endif;
str.index(w,"golem");
if((type int32 eax)  >= 0) then
        mov(70,s);
endif;
str.index(w,"wisp");
if((type int32 eax)  >= 0) then
        mov(71,s);
endif;
str.index(w,"goat");
if((type int32 eax)  >= 0) then
        mov(72,s);
endif;
str.index(w,"kobold");
if((type int32 eax)  >= 0) then
        mov(73,s);
endif;
str.index(w,"eagle");
if((type int32 eax)  >= 0) then
        mov(74,s);
endif;
str.index(w,"unicorn");
if((type int32 eax)  >= 0) then
        mov(75,s);
endif;

str.index(w,"north");
if((type int32 eax)  >= 0) then 
	mov(1,s);
endif;

str.index(w,"south");
if((type int32 eax)  >= 0) then 
	mov(2,s);
endif;

str.index(w,"east");
if((type int32 eax)  >= 0) then 
	mov(3,s);
endif;
str.index(w,"west");
if((type int32 eax)  >= 0) then 
	mov(4,s);
endif;

str.index(w,"up");
if((type int32 eax)  >= 0) then 
	mov(5,s);
endif;
str.index(w,"down");
if((type int32 eax)  >= 0) then 
	mov(6,s);
endif;

process:
//<

// -------------------------------------------------------
// Frank's debugging code. Please leave in place.     /PAP
// -------------------------------------------------------
console.setAttrs( console.white, console.blue );
// -------------------------------------------------------
// stdout.put("Value of s=",s,nl);    // dbg
// stdout.put("value of j=",j,nl);    // dbg
// -------------------------------------------------------
// Now we jump to the appropriate verb routine.       /PAP
// -------------------------------------------------------
verb98:

if (j=1) then jmp verb1;
elseif (j=2) then jmp verb2;
elseif (j=3) then jmp verb3;
elseif (j=4) then jmp verb4;
elseif (j=5) then jmp verb5;
elseif (j=6) then jmp verb6;
elseif (j=7) then jmp verb7;
elseif (j=8) then jmp verb8;
elseif (j=9) then jmp verb9;
elseif (j=10) then jmp verb10;
elseif (j=11) then jmp verb11;
elseif (j=12) then jmp verb12;
elseif (j=13) then jmp verb13;
elseif (j=14) then jmp verb14;
elseif (j=15) then jmp Room;
elseif (j=16) then jmp verb16;
elseif (j=17) then jmp verb17;
elseif (j=18) then jmp verb18;
elseif (j=19) then jmp verb19;
elseif (j=20) then jmp verb20;
elseif (j=21) then jmp verb50;
elseif (j=25) then jmp verb30;
endif;


// -------------------------------------------------------
// If the verb is unrecognized (j<> one of the above), then we print
// out an error message.                              /PAP
// -------------------------------------------------------
console.setAttrs( console.red, console.blue );
stdout.puts("Huh? Check your verb/noun." nl);
console.setAttrs( console.white, console.blue );
jmp parse;

// -------------------------------------------------------
// Verb #1 (go) modified and corrected by Frank Kotler
// and Sevag Krikorian                                /PAP
// -------------------------------------------------------
verb1:
if (s = 0 ) then
	// no direction specified!
	console.setAttrs( console.cyan, console.blue );
	stdout.puts("Please use: n,s,e,w,u,d." nl);
	jmp parse;	
endif;

mov(r, eax);            // horrible kludge!!
mov (eax, temproom);
// stdout.puts(r,nl);    //dbg
mov(r,eax);
imul(six);
// stdout.put(r,nl);     //dbg
add(s,eax);
dec (eax);     // array is zero-based! verbs are one based?
mov(eax,r);
// stdout.put(eax,nl);    //dbg
if(m[eax * 4]=12 && s=2 && lo[7*4]<>-1) then
console.setAttrs( console.red, console.blue );
stdout.puts("It is much too dark!" nl);
jmp heh;
endif;
if(m[eax * 4]=73 && s=1 && lo[7*4]<>-1) then
console.setAttrs( console.red, console.blue );
stdout.puts("It is much too dark!" nl);
jmp heh;
endif;

if(m[eax*4]=10 && s=4 && lo[10*4]<>-1) then
console.setAttrs( console.white, console.blue );
stdout.puts("You can't. The door is locked!" nl);
jmp heh;
endif;
if(m[eax*4]=31 && s=4 && lo[29*4]=30) then
console.setAttrs( console.red, console.blue );
stdout.puts("The warrior stops you!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("He says,'You may not pass!'" nl);
jmp heh;
endif;
mov(r,eax);
if(m[eax*4]=193 && s=1 && lo[53*4]=172) then
console.setAttrs( console.red, console.blue );
stdout.puts("The monk bars passage to the north." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("'I'm sorry,' he says,'But Kukai is not expecting anybody.'" nl);
jmp heh;
endif;
if(m[eax*4]=47 && s=1 && lo[52*4]=53) then
console.setAttrs( console.red, console.blue );
stdout.puts("The demigorgon grabs you!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("It hisses,'Care for a DANCE?!'" nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("The demigorgon slams you against the floor!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You turn ghostly white and whither...dead away!!" nl);
jmp frog;
endif;
if(m[eax*4]=61 && s=2 && lo[40*4]=54) then
console.setAttrs( console.red, console.blue );
stdout.puts("The barbarian blocks your path!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("He hisses,'This is my bridge!'" nl);
jmp heh;
endif;
if(m[eax*4]=70 && s=2 && lo[39*4]=67) then
console.setAttrs( console.red, console.blue );
stdout.puts("The knight bars passage south!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("He growls,'I wouldn't go there if I were you!'" nl);
jmp heh;
endif;
if(m[eax*4]=153 && s=1 && lo[46*4]=151) then
console.setAttrs( console.red, console.blue );
stdout.puts("The werewolf blocks your path!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("He growls at you angrily! 'Grrrrrrr!'" nl);
jmp heh;
endif;
if(m[eax*4]=231 && s=3 && lo[71*4]=230) then
console.setAttrs( console.red, console.blue );
stdout.puts("The will o' the wisp steps in front!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("It buzzes,'You may not enter the Misty Caverns!'" nl);
console.setAttrs( console.white, console.blue );
jmp heh;
endif;
if(m[eax*4]=235 && s=4 && lo[70*4]=234) then
console.setAttrs( console.red, console.blue );
stdout.puts("The giant golem blocks your path!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("He bellows,'This keep is MIIIINNNNEEEEE!'" nl);
console.setAttrs( console.white, console.blue );
jmp heh;
endif;
if(m[eax*4]=165 && s=1 && lo[47*4]=161) then
console.setAttrs( console.red, console.blue );
stdout.puts("The butler stops you!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("He screams,'You're not allowed in here!'" nl);
jmp heh;
endif;
mov(slp,ebx);
if(m[eax*4]=199 && s=6 && lo[58*4]=14 && ebx=0) then
console.setAttrs( console.red, console.blue );
stdout.puts("The hellhound growls at you!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("It growls,'Get out of here, knave! Go where you belong...like HELL!!'" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The hellhound breathes fires on you!" nl);
console.setAttrs( console.red, console.blue );
stdout.puts(">>>>>");
console.setAttrs( console.yellow, console.blue );
stdout.puts(">>>>>");
console.setAttrs( console.white, console.blue );
stdout.puts(">>>>> ");
console.setAttrs( console.cyan, console.blue );
stdout.puts("F I R E - B A L L ! ! !" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are engulfed in flames!" nl);
jmp frog;
endif;
if(m[eax * 4]>0) then
mov(m[eax * 4],r);
// stdout.puts("next room: ");    //dbg
// stdout.put(r,nl);             //dbg
// stdin.getc();                 // dbg
jmp Room;
endif;
console.setAttrs( console.red, console.blue );
heh:
console.setAttrs( console.red, console.blue );
stdout.puts( "What ?" nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts( "Please use: n,s,e,w,u,d." nl);
console.setAttrs( console.white, console.blue );
stdout.puts( "(Sometimes 'str.index' is a little cranky)" nl);
mov(temproom, eax);     // horrible kludge
mov(eax, r);            // we shouldn't have used the
                        // same variable for roomnumber and index!
jmp parse;
// -------------------------------------------------------
// Verb #2 (get)                                      /PAP
// -------------------------------------------------------
verb2:
mov(s,ebx);
mov(lo[ebx*4],eax);
if(ebx<7)then
stdout.puts("Nothing happens." nl);
jmp parse;
endif;
// stdout.put(s,nl); my test code                     /PAP
if(eax=r) then
 if(ebx<26 || ebx=56) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
endif;
if(ebx=51) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken, Oh Sons of Greedy. :)" nl);
  jmp parse;
endif;
if(ebx=55) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
endif;
if(ebx=56) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
endif;
if(ebx=57) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
endif;
if(ebx=59) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
endif;
if(ebx=60) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
 endif;
if(ebx=66) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
 endif;
if(ebx=67) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
 endif;
if(ebx=68) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
 endif;
if(ebx=69) then
  mov(-1,lo[ebx*4]);
  stdout.puts("Taken." nl);
  jmp parse;
 endif;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't do that." nl);
jmp parse;
// -------------------------------------------------------
// Verb #3 (drop)                                     /PAP
// -------------------------------------------------------
verb3:
mov(r,eax);
if(eax=204) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The surrounding mist seems to envelope your being!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Your health has increased somewhat." nl);
mov(h,ebx);
add(25,ebx);
mov(ebx,h);
endif;
mov(s,ebx);
mov(lo[ebx*4],eax);
// stdout.put(s,nl);              test code           /PAP
// stdout.put(lo[ebx*4],nl);      test code           /PAP
 if(lo[ebx*4]=-1) then
  mov(r,lo[ebx*4]); // drop the darn thing            /PAP
 console.setAttrs( console.white, console.blue );
 stdout.puts("Dropped." nl);
 jmp parse;
 endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't drop that." nl);
jmp parse;
// -------------------------------------------------------
// Verb #4 (wield)                                    /PAP
// -------------------------------------------------------
verb4:
mov(s,ebx);
mov(lo[ebx*4],eax);
// stdout.put(s,nl);              test code           /PAP
// stdout.put(lo[ebx*4],nl);      test code           /PAP
if(lo[ebx*4]=-1) then
  if(s>11 && s<20 && dam=1 || s=67 && dam=1 || s=69 && dam=1) then
    mov(ebx,dam);
    mov(105,lo[ebx*4]); // wield the damn thing       /PAP
  console.setAttrs( console.white, console.blue );
  stdout.puts("Wielded." nl);
  jmp parse;
  endif;
  if(s>11 && s<20 && dam<>1 && lo[57*4]=-1) then
   stdout.put("The magic of the flute prevents wielding much." nl);
   jmp parse;
  endif;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't wield that." nl);
jmp parse;
// -------------------------------------------------------
// Verb #5 (unwield)                                  /PAP
// -------------------------------------------------------
verb5:
mov(s,ebx);
mov(lo[ebx*4],eax);
// stdout.put(s,nl);              test code           /PAP
// stdout.put(lo[ebx*4],nl);      test code           /PAP
if(lo[ebx*4]=105) then
  if(s>11 && s<20 || s=67 || s=69) then
    mov(-1,lo[ebx*4]); // unwield the damn thing      /PAP
  console.setAttrs( console.white, console.blue );
  stdout.puts("Unwielded." nl);
  mov(1,dam);
  jmp parse;
  endif;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't unwield that." nl);
jmp parse;
// -------------------------------------------------------
// Verb #6 (wear)                                     /PAP
// -------------------------------------------------------
verb6:
mov(s,ebx);
mov(lo[ebx*4],eax);
// stdout.put(s,nl);              test code           /PAP
// stdout.put(lo[ebx*4],nl);      test code           /PAP
if(lo[ebx*4]=-1) then
  if(s>19 && s<26 || s=68) then
    mov(205,lo[ebx*4]); // wear the damn thing        /PAP
  console.setAttrs( console.white, console.blue );
  stdout.puts("Worn." nl);
  jmp parse;
  endif;
  if(s=55) then
    mov(205,lo[ebx*4]); // wear the damn thing        /PAP
  console.setAttrs( console.cyan, console.blue );
  stdout.puts("The shroud feels warm!" nl);
  console.setAttrs( console.white, console.blue );
  stdout.puts("Worn." nl);
  jmp parse;
  endif;
  if(s=56) then
    mov(205,lo[ebx*4]); // wear the damn thing        /PAP
  console.setAttrs( console.white, console.blue );
  stdout.puts("Worn." nl);
  jmp parse;
  endif;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't wear that." nl);
jmp parse;
// -------------------------------------------------------
// Verb #7 (remove)                                   /PAP
// -------------------------------------------------------
verb7:
mov(s,ebx);
mov(lo[ebx*4],eax);
// stdout.put(s,nl);              test code           /PAP
// stdout.put(lo[ebx*4],nl);      test code           /PAP
if(lo[ebx*4]=205) then
  if(s>19 && s<26 || s=68) then
    mov(-1,lo[ebx*4]); // remove the damn thing       /PAP
  console.setAttrs( console.white, console.blue );
  stdout.puts("Removed." nl);
  jmp parse;
  endif;
  if(s=55) then
    mov(-1,lo[ebx*4]); // remove the damn thing       /PAP
  console.setAttrs( console.cyan, console.blue );
  stdout.puts("The shroud no longer feels warm." nl);
  console.setAttrs( console.white, console.blue );
  stdout.puts("Removed." nl);
  jmp parse;
  endif;
  if(s=56) then
    mov(-1,lo[ebx*4]); // remove the damn thing       /PAP
  console.setAttrs( console.white, console.blue );
  stdout.puts("Removed." nl);
  jmp parse;
  endif;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't remove that." nl);
jmp parse;
// -------------------------------------------------------
// Verb #8 (buy)                                      /PAP
// -------------------------------------------------------
verb8:
if(r<>3) then
console.setAttrs( console.red, console.blue );
stdout.puts("You are not in the village shop!" nl);
jmp parse;
endif;
mov(lo[26*4],eax);
if(eax<>r) then
console.setAttrs( console.red, console.blue );
stdout.puts("The clerk isn't here to help you." nl);
jmp parse;
endif;
mov(s,ebx);
mov(z,eax);
if(s=7) then mov(14,eax);
elseif (s=8) then mov(6,eax);
elseif (s=9) then mov(5,eax);
elseif (s=10) then mov(10,eax);
elseif (s=11) then mov(8,eax);
elseif (s=12) then mov(48,eax);
elseif (s=13) then mov(75,eax);
elseif (s=14) then mov(127,eax);
elseif (s=15) then mov(288,eax);
elseif (s=16) then mov(142,eax);
elseif (s=17) then mov(384,eax);
elseif (s=18) then mov(420,eax);
elseif (s=19) then mov(180,eax);
elseif (s=20) then mov(86,eax);
elseif (s=21) then mov(118,eax);
elseif (s=22) then mov(150,eax);
elseif (s=23) then mov(74,eax);
elseif (s=24) then mov(212,eax);
elseif (s=25) then mov(475,eax);
elseif (s=51) then mov(64,eax);
elseif (s=56) then mov(288,eax);
elseif (s=57) then mov(80,eax);
elseif (s=59) then mov(24,eax);
elseif (s=60) then mov(36,eax);
elseif (s=66) then mov(420,eax);
elseif (s=67) then mov(812,eax);
elseif (s=68) then mov(246,eax);
elseif (s=69) then mov(88,eax);
endif;
if(eax=0 || lo[ebx*4]<>99) then
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk says,'We don't sell that here.'" nl);
jmp parse;
endif;
mov(g,ebx);
if(eax>ebx) then
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk says,'You don't have enough money.'" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("Gold: ");
console.setAttrs( console.white, console.blue );
stdout.put((type uns32 ebx),nl);
jmp parse;
endif;
mov(s,ebx);
mov(-1,lo[ebx*4]);
console.setAttrs( console.magenta, console.blue );
stdout.puts("You hand the clerk the gold coins." nl);
sub(eax,g);
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk hands you the item." nl);
stdout.puts("The clerk thanks you." nl);
jmp parse;
// -------------------------------------------------------
// Verb #9 (sell)                                     /PAP
// -------------------------------------------------------
verb9:
if(r<>3) then
console.setAttrs( console.red, console.blue );
stdout.puts("You are not in the village shop!" nl);
jmp parse;
endif;
mov(lo[26*4],eax);
if(eax<>r) then
console.setAttrs( console.red, console.blue );
stdout.puts("The clerk isn't here to help you." nl);
jmp parse;
endif;
mov(s,ebx);
mov(z,eax);
if(s=7) then mov(7,eax);
elseif (s=8) then mov(3,eax);
elseif (s=9) then mov(2,eax);
elseif (s=10) then mov(5,eax);
elseif (s=11) then mov(4,eax);
elseif (s=12) then mov(24,eax);
elseif (s=13) then mov(27,eax);
elseif (s=14) then mov(63,eax);
elseif (s=15) then mov(144,eax);
elseif (s=16) then mov(71,eax);
elseif (s=17) then mov(192,eax);
elseif (s=18) then mov(210,eax);
elseif (s=19) then mov(90,eax);
elseif (s=20) then mov(43,eax);
elseif (s=21) then mov(59,eax);
elseif (s=22) then mov(75,eax);
elseif (s=23) then mov(37,eax);
elseif (s=24) then mov(106,eax);
elseif (s=25) then mov(287,eax);
elseif (s=51) then mov(32,eax);
elseif (s=56) then mov(144,eax);
elseif (s=57) then mov(40,eax);
elseif (s=59) then mov(12,eax);
elseif (s=60) then mov(18,eax);
elseif (s=66) then mov(210,eax);
elseif (s=67) then mov(406,eax);
elseif (s=68) then mov(123,eax);
elseif (s=69) then mov(44,eax);
endif;
if(eax=0 || lo[ebx*4]<>-1) then
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk says,'You aren't carrying that.'" nl);
jmp parse;
endif;
mov(g,ebx);
console.setAttrs( console.white, console.blue );
stdout.puts("You hand the clerk the item." nl);
console.setAttrs( console.magenta, console.blue );
stdout.puts("The clerk hands you the gold coins." nl);
add(eax,ebx);
mov(ebx,g);
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk thanks you." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("Gold: ");
console.setAttrs( console.white, console.blue );
stdout.put((type uns32 ebx),nl);
mov(s,ebx);
mov(99,lo[ebx*4]);
jmp parse;
// -------------------------------------------------------
// Verb #10 (examine)                                 /PAP
// -------------------------------------------------------
verb10:
mov(s,ebx);
mov(lo[ebx*4],eax);
// stdout.put(s,nl);              test code           /PAP
// stdout.put(lo[ebx*4],nl);      test code           /PAP
if(s=41 && r=10) then
console.setAttrs( console.white, console.blue );
stdout.puts("Quest#                  Description                     Reward         Completed" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("1. Lantern Quest        Find a missing lantern          100 gold       ");
if(qs<2) then
stdout.puts("No" nl);
endif;
if(qs>1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("2. Goblin Quest         Defeat an evil goblin           250 gold       ");
if(qs<3) then
stdout.puts("No" nl);
endif;
if(qs>2) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("3. Castle Quest         Can you find the castle?        300 gold       ");
if(qs<4) then
stdout.puts("No" nl);
endif;
if(qs>3) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("4. Sorcerer Quest       Find/dispatch the sorcerer      325 gold       ");
if(qs<5) then
stdout.puts("No" nl);
endif;
if(qs>4) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("5. Mansion Quest        Explore a hidden mansion        ???            ");
if(qs<6) then
stdout.puts("No" nl);
endif;
if(qs>5) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("6. Werewolf Quest       Befriend a lone werewolf        ???            ");
if(qs<7) then
stdout.puts("No" nl);
endif;
if(qs>6) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("7. Vampire Quest        Vanquish the evil vampire       ???            ");
if(qs<8) then
stdout.puts("No" nl);
endif;
if(qs>7) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("8. Cavern Quest         Defeat the evil guardian        ???            ");
if(qs<9) then
stdout.puts("No" nl);
endif;
if(qs>8) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("9. Dragon Quest         This is the main quest          ???            ");
if(qs<10) then
stdout.puts("No" nl);
endif;
if(qs>9) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Yes" nl);
endif;
console.setAttrs( console.white, console.blue );
jmp parse;
endif;
mov(s,ebx);
mov(lo[ebx*4],eax);
if(eax=r && ebx>6 || eax=-1 && ebx>6 || eax=105 && ebx>6 || eax=205 && ebx>6) then
sub(1,ebx);
    console.setAttrs( console.white, console.blue );
    stdout.put(exa[ebx*4],nl); // print out the description /PAP
  jmp parse;
endif;
if(eax=-2 && r=14 || eax=-2 && r=112 || eax=-2 && r=145) then
sub(1,ebx);
    console.setAttrs( console.white, console.blue );
    stdout.put(exa[ebx*4],nl); // print out the description /PAP
  jmp parse;
endif;
if(s<>0) then
    console.setAttrs( console.white, console.blue );
    stdout.puts("You can see no such thing." nl);
  jmp parse;
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("You examine the object for awhile, but determine it has no use for you." nl);
stdout.puts("Inanimate objects such as the logs on a fire, or the leaves of a tree, while" nl);
stdout.puts("interesting to you, serve no purpose beyond visual scenery." nl);
jmp parse;
// -------------------------------------------------------
// Verb #11 (use)                                     /PAP
// -------------------------------------------------------
verb11:
mov(r,eax);
if(eax=16 && s=9 && lo[9*4]=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts("You use the rope and climb up..." nl);
mov(r,eax);
mov(17,eax);
mov(eax,r);
jmp Room;
endif;
mov(r,eax);
if(eax=17 && s=9 && lo[9*4]=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts("You use the rope and climb down..." nl);
mov(r,eax);
mov(16,eax);
mov(eax,r);
jmp Room;
endif;
mov(r,eax);
if(eax=232 && s=66 && lo[66*4]=-1) then
console.setAttrs( console.yellow, console.blue );
stdout.puts("BBBBAAAAAAARRRRRRRRRRRR!!!!!!!!!" nl);
console.setAttrs( console.magenta, console.blue );
stdout.puts("The sound of the horn echoes throughout the mountains!" nl);
console.setAttrs( console.green, console.blue);
stdout.puts("The magic blocking the cavern entrance fades away!" nl);
mov(r,eax);
mov(233,eax);
mov(eax,r);
jmp Room;
endif;
mov(r,eax);
mov(slp,ebx);
if(eax=14 && s=57 && lo[57*4]=-1 && lo[58*4]=14 && ebx=0) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("[play flute]" nl);
console.setAttrs( console.green, console.blue ); 
stdout.puts("You play the flute..." nl);
stdout.puts("A mystic sound is heard, echoing throughout the trees..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The hellhound has fallen fast asleep." nl);
mov(slp,eax);
add(1,eax);
mov(eax,slp);
jmp parse;
endif;
mov(r,eax);
mov(slp,ebx);
if(eax=14 && s=57 && lo[57*4]=-1 && lo[58*4]=14 && ebx=1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("[play flute]" nl);
console.setAttrs( console.green, console.blue );
stdout.puts("You play the flute..." nl);
stdout.puts("A mystic sound is heard, echoing throughout the trees..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The hellhound is already fast asleep." nl);
jmp parse;
endif;
if(s=57 && lo[57*4]=-1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("[play flute]" nl);
console.setAttrs( console.green, console.blue );
stdout.puts("You play the flute..." nl);
stdout.puts("A mystic sound is heard, echoing throughout the trees..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The sound is returned by the empty rustling of leaves." nl);
jmp parse;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't use that here." nl);
jmp parse;
// -------------------------------------------------------
// Verb #12 (fight/attack)                            /PAP
// -------------------------------------------------------
verb12:
mov(s,ebx);
if(s<26 || s=41 || s=51 || s=55 || s=56 || s=57 || s=59 || s=60 || s=66 || s=67 || s=68 || s=69) then
console.setAttrs( console.red, console.blue );
stdout.puts("You can't kill that." nl);
jmp parse;
endif;
if(s=46 && wf=1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("You sense a friendly aura around werewolf and back off!" nl);
jmp parse;
endif;
if(s=64) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("You sense a friendly aura around Tursk and back off!" nl);
jmp parse;
endif;
mov(lo[ebx*4],eax);
if(eax<>r) then
console.setAttrs( console.red, console.blue );
stdout.puts("You don't see that here." nl);
jmp parse;
endif;
if(s=53 && r=172) then
console.setAttrs( console.green, console.blue );
stdout.puts("The monk is peaceful...but you attack anyway!" nl);
console.setAttrs( console.white, console.blue );
endif;
if(s=54 && r=184) then
console.setAttrs( console.green, console.blue );
stdout.puts("Kukai is peaceful...but you attack nonetheless!" nl);
endif;
if(s=58 && r=14) then
console.setAttrs( console.red, console.blue );
stdout.puts("The hellhound growls angrily at you!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("It screams,'You will pay with your blood, knave!'" nl);
endif;
if(s=70 && r=234) then
console.setAttrs( console.red, console.blue );
stdout.puts("The giant golem bellows angrily at you!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("It screams,'I will crush you to a pulp!'" nl);
endif;
if(s=73 && r=235) then
console.setAttrs( console.red, console.blue );
stdout.puts("The kobold charges at you!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("He screams,'I'm going to crush you, knave!'" nl);
endif;
mov(lo[36*4],ebx);
if(eax=r && s=38 && ebx=r) then
console.setAttrs( console.red, console.blue );
stdout.puts("The vampire stops you!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("'You may not kill the dragon!', he growls." nl);
jmp heh;
endif;
if(s=38 && qs<6) then
console.setAttrs( console.red, console.blue );
stdout.puts("You still have quests left to complete!" nl);
jmp heh;
endif;
battle:
rand.randomize();
// stdout.put("You are fighting #",s,nl);  /dbg
rand.urange(100,600);      // pick a monster HP value, 100 through 600
if(s=65) then
add(100,eax);
mov(eax,mh);
add(100,ebx);
mov(ebx,h);
endif;
mov(eax,mh);             // move it into eax register
battle2:
console.setAttrs( console.yellow, console.blue );
stdout.put(nl);
mov(s,ebx);
sub(1,ebx);
stdout.put("Monster [",no[ebx*4],"]: ",mh,nl);
stdout.put("Your Hit Points (HP): ",h,nl,nl);
if(h>1 && h<36) then
console.setAttrs( console.yellow, console.blue );
stdout.puts("You cast HEAL..." nl);
stdout.puts("Your wounds are healed somewhat." nl nl);
mov(h,eax);
add(i,eax);
mov(eax,h);
endif;
rand.urange(1,25);       // pick a random number, 1 through 25
mov(eax,i);              // move it into i variable
console.setAttrs( console.magenta, console.blue );
stdout.puts(">" nl);
if(wf=1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The werewolf lunges at the enemy!" nl);
rand.urange(1,25);       // pick a random number, 1 through 25
mov(eax,i);              // move it into i variable
mov(i,eax);               // set i to eax value
if(eax>1 && eax<6) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("IT HITS!!! The werewolf lands a solid blow!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The werewolf growls,'I love this game!'" nl);
mov(mh,eax);
sub(100,eax);                             // take off 100 HP
sub(dam,eax);                            // take off 1 damage round
mov(eax,mh);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("But alas, it has missed the mark..." nl);
endif;
if(tsk=1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Tursk goes berserk, charging the enemy!" nl);
rand.urange(1,25);
mov(eax,i);
mov(i,eax);
if(eax>1 && eax<6) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("HE HITS!!! Tursk lands a devastating blow!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Tursk screams,'Taste my blade, foolish one!'" nl);
mov(mh,eax);
sub(200,eax);
sub(dam,eax);
mov(eax,mh);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("But alas, he has missed the mark..." nl);
endif;
console.setAttrs( console.magenta, console.blue );
stdout.puts(">" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You attack:" nl);
mov(12,ebx);             // check for dagger being wielded
if(lo[ebx*4]=105) then   // if so then
mov(2,dam);              // set damage meter to 2
endif;
mov(13,ebx);             // check for sword being wielded
if(lo[ebx*4]=105) then   // if so then
mov(4,dam);              // set damage meter to 4
endif;
mov(14,ebx);             // check for axe being wielded
if(lo[ebx*4]=105) then   // if so then
mov(6,dam);              // set damage meter to 6
endif;
mov(15,ebx);             // check for scimitar being wielded
if(lo[ebx*4]=105) then   // if so then
mov(8,dam);              // set damage meter to 8
endif;
mov(16,ebx);             // check for longsword being wielded
if(lo[ebx*4]=105) then   // if so then
mov(7,dam);              // set damage meter to 7
endif;
mov(17,ebx);             // check for broadsword being wielded
if(lo[ebx*4]=105) then   // if so then
mov(12,dam);              // set damage meter to 12
endif;
mov(18,ebx);             // check for battleaxe being wielded
if(lo[ebx*4]=105) then   // if so then
mov(18,dam);              // set damage meter to 18
endif;
mov(19,ebx);             // check for cleaver being wielded
if(lo[ebx*4]=105) then   // if so then
mov(10,dam);              // set damage meter to 10
endif;
mov(55,ebx);            // check for shroud being worn
if(lo[ebx*4]=205) then  // if so then
mov(22,dam);            // set damage meter to 22
endif;
mov(67,ebx);           // check for firewhip being wielded
if(lo[ebx*4]=105) then  // if so then
mov(24,dam);           // set damage meter to 24
endif;
mov(69,ebx);           // check for boomerang being wielded
if(lo[ebx*4]=105) then  // if so then
mov(18,dam);           // set damage meter to 18
endif;
if(s=65) then
mov(0,dam);
endif;
// -------------------------------------------------------
// Player attacks monster...                          /PAP
// -------------------------------------------------------
mov(i,eax);
if(eax<6) then
console.setAttrs( console.white, console.blue );
stdout.puts("You missed..." nl);              // doh! /PAP
jmp round2;
endif;
if(eax>5 && eax<11) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("You struck a solid blow." nl);   // ok.../PAP
console.setAttrs( console.white, console.blue );
mov(mh,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
mov(eax,mh);
jmp round2;
endif;
// special attack of scimitar
if(eax>10 && eax<13 && dam=8) then
console.setAttrs( console.green, console.blue );
stdout.puts("Your SCIMITAR glows!" nl);  // good!...  /PAP
stdout.puts("The monster is smashed into atoms!" nl);
mov(mh,eax);
sub(50,eax);                             // take off 50 HP
sub(dam,eax);                            // take off 1 damage round
mov(eax,mh);
jmp round2;
endif;
// special attack of firewhip
if(eax>10 && eax<13 && dam=24) then
console.setAttrs( console.green, console.blue );
stdout.puts("Your FIREWHIP bursts into flames!" nl); //excellent!... /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("The whip entangles the monster, deeply wounding it!" nl);
mov(mh,eax);
sub(200,eax);                           // take off 200 HP
sub(dam,eax);                           // take off 1 damage round
mov(eax,mh);
jmp round2;
endif;
// special attack of battleaxe
if(eax>10 && eax<13 && dam=18) then
console.setAttrs( console.red, console.blue );
stdout.puts("Your BATTLEAXE vibrates!" nl);// good!.../PAP
stdout.puts("The monster is pounded into submission!" nl);
mov(mh,eax);
sub(125,eax);                            // take off 125 HP
mov(eax,mh);
jmp round2;
endif;
// special attack/heal of shroud
if(eax>11 && eax<14 && dam=22) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Your SHROUD emits a Holy Light!" nl);
stdout.puts("The monster is blinded!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts(">" nl);
mov(mh,eax);
sub(75,eax);
mov(eax,mh);
 if(eax=12) then
  mov(h,eax);
  add(25,eax);
  mov(eax,h);
  console.setAttrs( console.yellow, console.blue );
  stdout.puts("The SHROUD glows and you feel warm!" nl);
  console.setAttrs( console.cyan, console.blue );
  stdout.puts("You are healed slightly." nl);
 endif;
endif;
// special attack of broadsword
if(eax>10 && eax<13 && dam=12) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Your BROADSWORD glows!" nl);// good!...  /PAP
stdout.puts("A blast of white light zaps the monster!" nl);
mov(mh,eax);
sub(150,eax);                            // take off 150 HP
sub(dam,eax);                            // take off 1 damage round
mov(eax,mh);
jmp round2;
endif;
// special attack of flute
if(eax>10 && eax<13 && lo[57*4]=-1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("You play the FLUTE..." nl);// heals player /PAP
stdout.puts("A mystic sound is heard echoing throughout the trees." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("The flute drains the enemy of energy, reviving your own!" nl);
mov(h,eax);
add(75,eax);                             // add 75 HP (to player)
mov(eax,h);                              
mov(mh,eax);
sub(75,eax);                             // take off 75 HP from monster 
mov(eax,mh);
jmp round2;
endif;
if(eax>10 && eax<13) then
console.setAttrs( console.magenta, console.blue );
stdout.puts("You hit the monster very hard!!" nl);
console.setAttrs( console.white, console.blue );
mov(mh,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
sub(dam,eax);
mov(eax,mh);
jmp round2;
endif;
if(eax>12) then
console.setAttrs( console.white, console.blue );
stdout.puts("The monster dodged your attack." nl);
endif;
round2:
console.setAttrs( console.magenta, console.blue );
stdout.puts(">" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("<Press ENTER to continue...>" nl);
stdin.getc();
mov(s,ebx);
if(s=65) then
add(100,eax);
mov(eax,mh);
endif;
if(s=38 && mh<1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The dragon has fallen!" nl);
jmp round4;
endif;
if(mh<1) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The monster has died." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("You killed it dead." nl);
mov(h,ecx);
add(100,ecx);
mov(ecx,h);
console.setAttrs( console.white, console.blue );
stdout.puts("You are rewarded with experience and gold." nl);
jmp round3;
endif;
console.setAttrs( console.magenta, console.blue );
stdout.puts(">" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The battle continues..." nl);
stdout.puts(">" nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The monster attacks:" nl);
stdout.puts(">" nl);
console.setAttrs( console.white, console.blue );
rand.urange(1,25);       // pick a random number, 1 through 25
mov(eax,i);              // move it into i variable
// -------------------------------------------------------
// Monster goes to town on player...                  /PAP
// -------------------------------------------------------
mov(i,eax);
if(eax<6) then
console.setAttrs( console.white, console.blue );
stdout.puts("Hooray! It missed you..." nl);   // doh! /PAP
endif;
if(eax>5 && eax<11) then
console.setAttrs( console.white, console.blue );
stdout.puts("Alas, it struck a solid blow!" nl);//ok../PAP
mov(h,eax);
sub(26,eax);
mov(eax,h);
endif;
if(s<>36) then
jmp hola;
endif;
if(eax>10 && eax<14) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The vampire BITES your neck!" nl);
stdout.puts("You feel very weak..." nl);
mov(h,eax);
sub(100,eax);
mov(eax,h);
endif;
hola:
if(s<>38) then
jmp hola2;
endif;
if(eax>10 && eax<14) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The dragon breathes FIRE on you!" nl);
console.setAttrs( console.red, console.blue );
stdout.puts(">>>>>");
console.setAttrs( console.yellow, console.blue );
stdout.puts(">>>>>");
console.setAttrs( console.yellow, console.blue );
stdout.puts(">>>>>");
console.setAttrs( console.white, console.blue );
stdout.puts(">>>>>");
console.setAttrs( console.white, console.blue );
stdout.puts(" FIRE!!!" nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("You are burned badly!" nl);
mov(h,eax);
sub(500,eax);
mov(eax,h);
endif;
hola2:
if(s<>54) then
jmp hola3;
endif;
if(eax>12 && eax<16) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Kukai shatters you with a cosmic blow!!!" nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("Kukai says,'I am displeased by your efforts...'" nl);
console.setAttrs( console.red, console.blue );
stdout.puts("You are nearly split in half!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts(">" nl);
mov(h,eax);
sub(250,eax);
mov(eax,h);
console.setAttrs( console.white, console.blue );
endif;
hola3:
if(s<>70) then
jmp hola4;
endif;
if(eax>12 && eax<16) then
console.setAttrs (console.cyan, console.blue );
stdout.puts("The giant golem POUNDS you with his fists!" nl);
console.setAttrs (console.yellow, console.blue );
stdout.puts("It howls,'Now you shall die, knave!'" nl);
console.setAttrs (console.red, console.blue );
stdout.puts("You are nearly crushed into bits!" nl);
console.setAttrs( console.white, console.blue );
stdout.puts(">" nl);
mov(h,eax);
sub(350,eax);
mov(eax,h);
console.setAttrs (console.white, console.blue );
endif;
hola4:
if(h<1) then
console.setAttrs( console.white, console.blue );
stdout.puts("You have fallen in battle!" nl);
jmp round3;
endif;
// special attack of monster
if(eax>10 && eax<13) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("The monster hit you VERY HARD!!" nl); // oops... /PAP
stdout.puts("You have sustained a vicious blow!!!" nl);
mov(h,eax);
sub(75,eax);                            // take off 75 HP
mov(eax,h);
jmp round2;
endif;
mov(21,ebx);
mov(i,ecx);
if(lo[ebx*4]=205) then
if(ecx>12) then
mov(h,eax);
add(i,eax);
mov(eax,h);
endif;
endif;
mov(h,eax);
mov(20,ebx);
mov(i,ecx);
if(lo[ebx*4]=205 && ecx>15) then
add(50,eax);
console.setAttrs( console.yellow, console.blue );
stdout.puts("Your ARMOR glows and you feel warm!" nl);
endif;
mov(24,ebx);
mov(i,ecx);
if(lo[ebx*4]=205 && ecx>20) then
add(1,dam);
console.setAttrs( console.white, console.blue );
stdout.puts("Your CLOAK seems to confuse the monster!" nl);
endif;
console.setAttrs( console.white, console.blue );
jmp battle2;
round3:
console.setAttrs( console.white, console.blue );
if(h<1) then
frog:
stdout.puts("You have died." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("<The End>" nl);
jmp kend;
endif;
if(mh<1) then
mov(s,ebx);
mov(998,lo[ebx*4]);
mov(g,eax);
add(i,eax);
mov(eax,g);
mov(e,eax);
add(i,eax);
add(s,eax);
add(100,eax);
mov(eax,e);
// now set items on monsters /PAP
mov(12,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found dagger on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(13,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found sword on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(14,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found axe on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(15,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found scimitar on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(16,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found longsword on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(17,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found broadsword on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(18,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found battleaxe on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(19,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found cleaver on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(20,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found armor on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(21,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found shield on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(22,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found helmet on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(23,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found gauntlets on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(24,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found cloak on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(25,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found ring on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(67,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found firewhip on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

mov(68,eax);
mov(s,ebx);
add(1000,ebx);
if(lo[eax*4]=ebx) then
mov(r,lo[eax*4]); // move item into room from corpse of monster /PAP
console.setAttrs( console.cyan, console.blue );
stdout.puts("You found anklet on it!" nl);
console.setAttrs( console.white, console.blue );
endif;

jmp parse;
endif;
jmp parse;
round4:
console.setAttrs( console.yellow, console.blue );
stdout.puts(nl);
stdout.puts("Congratulations!!!" nl nl);
console.setAttrs( console.white, console.blue );
stdout.puts("The dead dragon lay at your feet. The king was right, it WAS" nl);
stdout.puts("a dragon after all (and not some guy in a clown suit). Ugh, clowns!" nl);
stdout.puts("As your accountant arrives to shake you down, you struggle to remove" nl);
stdout.puts("your sword from the beast's belly. With blood splattered everywhere, you" nl);
stdout.puts("feel relieved of your duties. You'll soon retire on a nice bounty and" nl);
stdout.puts("marry the princess after all. The king warned her about you, but alas, you've" nl);
stdout.puts("got bigger fish to fry. You have a castle to take over, a wife to knock up," nl);
stdout.puts("and kids to blame for your drinking problem. But over a few tankards of" nl);
stdout.puts("beer, much will disappear as the room returns to spinning once more." nl nl);
stdout.puts("Where is Merlin when you need his advice? (Drunk as usual, sheesh!)" nl nl);
stdout.puts("Guy with sword 1, evil dragon 0. Time for another drink... <THE END!>" nl);
jmp kend;
// -------------------------------------------------------
// Verb #13 (inventory)                               /PAP
// -------------------------------------------------------
// Inventory command routine
// If there's a better way...                         /PAP
// -------------------------------------------------------
verb13:
console.setAttrs( console.white, console.blue );
stdout.puts("You are carrying:" nl);
// -------------------------------------------------------
// Okay, now we have some fun!
// We are checking the inventory for items (yah!!!!)
// The horribleness of the code is my fault (boo, hiss...)
// Haven't mastered loops yet.                        /PAP
// -------------------------------------------------------
mov(i,eax);
mov(0,eax);
mov(eax,i);
mov(7,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" lantern" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#8
mov(8,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" oil" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#9
mov(9,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" rope" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#10
mov(10,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" key" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#11
mov(11,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" bottle" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#12
mov(12,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" dagger" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" dagger ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#13
mov(13,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" sword" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" sword ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#14
mov(14,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" axe" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" axe ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#15
mov(15,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" scimitar" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" scimitar ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#16
mov(16,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" longsword" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" longsword ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#17
mov(17,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" broadsword" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" broadsword ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#18
mov(18,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" battleaxe" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" battleaxe ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#19
mov(19,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" cleaver" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" cleaver ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#20
mov(20,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" armor" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" armor ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#21
mov(21,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" shield" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" shield ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#22
mov(22,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" helmet" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" helmet ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#23
mov(23,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" gauntlets" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" gauntlets ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#24
mov(24,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" cloak" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" cloak ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#25
mov(25,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" ring" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" ring ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#51
mov(51,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" food" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#55
mov(55,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" shroud" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" shroud " );
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#56
mov(56,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" buckler" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" buckler " );
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#57
mov(57,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" flute" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#59
mov(59,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" apple" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#60
mov(60,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" rations" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#66
mov(66,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" horn" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#67
mov(67,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" firewhip" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" firewhip ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#68
mov(68,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" anklet" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=205) then
console.setAttrs( console.green, console.blue );
stdout.puts(" anklet ");
console.setAttrs( console.magenta, console.blue );
stdout.puts("(worn)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// place noun#69
mov(69,ebx);
mov(lo[ebx*4],eax);
if(eax=-1) then
console.setAttrs( console.white, console.blue );
stdout.puts(" boomerang" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
if(eax=105) then
console.setAttrs( console.cyan, console.blue );
stdout.puts(" boomerang ");
console.setAttrs( console.red, console.blue );
stdout.puts("(wielded)" nl);
mov(i,eax);
add(1,eax);
mov(eax,i);
endif;
// -------------------------------------------------------
// "i" is the variable for "number of items carried"
// -------------------------------------------------------
mov(i,eax);
if(eax=0) then
console.setAttrs( console.red, console.blue );
stdout.puts("Nothing!" nl);
jmp parse;
endif;
jmp parse;
// -------------------------------------------------------
// how about implementing a <bleep>ing "quit" command!???
// -------------------------------------------------------
// "As you wish..." :)                                /PAP
// -------------------------------------------------------
// Verb#14 (Quit)
// -------------------------------------------------------
verb14:
console.setAttrs( console.white, console.blue );
stdout.puts("Thanks for playing!" nl);
jmp kend;
// -------------------------------------------------------
// Verb#16 (List)
// -------------------------------------------------------
verb16:
if(r<>3) then
console.setAttrs( console.red, console.blue );
stdout.puts("You are not in the village shop!" nl);
jmp parse;
endif;
mov(lo[26*4],eax);
if(eax<>r) then
console.setAttrs( console.red, console.blue );
stdout.puts("The clerk isn't here to help you." nl);
jmp parse;
endif;
mov(s,ebx);
mov(z,eax);
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk says,'Here is what we have in stock:'" nl);
if(s=7) then mov(14,eax);
elseif (s=8) then mov(6,eax);
elseif (s=9) then mov(5,eax);
elseif (s=10) then mov(10,eax);
elseif (s=11) then mov(8,eax);
elseif (s=12) then mov(48,eax);
elseif (s=13) then mov(75,eax);
elseif (s=14) then mov(127,eax);
elseif (s=15) then mov(288,eax);
elseif (s=16) then mov(142,eax);
elseif (s=17) then mov(384,eax);
elseif (s=18) then mov(420,eax);
elseif (s=19) then mov(180,eax);
elseif (s=20) then mov(86,eax);
elseif (s=21) then mov(118,eax);
elseif (s=22) then mov(150,eax);
elseif (s=23) then mov(74,eax);
elseif (s=24) then mov(212,eax);
elseif (s=25) then mov(475,eax);
elseif (s=51) then mov(64,eax);
elseif (s=56) then mov(288,eax);
elseif (s=57) then mov(80,eax);
elseif (s=59) then mov(24,eax);
elseif (s=60) then mov(36,eax);
elseif (s=66) then mov(420,eax);
elseif (s=67) then mov(812,eax);
elseif (s=68) then mov(246,eax);
elseif (s=69) then mov(88,eax);
endif;
console.setAttrs( console.cyan, console.blue );
mov(7,s);
mov(s,ebx);
mov(14,eax);
if(lo[ebx*4]=99 && s=7) then stdout.put("lantern: ",(type uns32 eax),nl);
endif;
mov(8,s);
mov(s,ebx);
mov(6,eax);
if(lo[ebx*4]=99 && s=8) then stdout.put("oil: ",(type uns32 eax),nl);
endif;
mov(9,s);
mov(s,ebx);
mov(5,eax);
if(lo[ebx*4]=99 && s=9) then stdout.put("rope: ",(type uns32 eax),nl);
endif;
mov(10,s);
mov(s,ebx);
mov(10,eax);
if(lo[ebx*4]=99 && s=10) then stdout.put("key: ",(type uns32 eax),nl);
endif;
mov(11,s);
mov(s,ebx);
mov(8,eax);
if(lo[ebx*4]=99 && s=11) then stdout.put("bottle: ",(type uns32 eax),nl);
endif;
mov(12,s);
mov(s,ebx);
mov(48,eax);
if(lo[ebx*4]=99 && s=12) then stdout.put("dagger: ",(type uns32 eax),nl);
endif;
mov(13,s);
mov(s,ebx);
mov(75,eax);
if(lo[ebx*4]=99 && s=13) then stdout.put("sword: ",(type uns32 eax),nl);
endif;
mov(14,s);
mov(s,ebx);
mov(127,eax);
if(lo[ebx*4]=99 && s=14) then stdout.put("axe: ",(type uns32 eax),nl);
endif;
mov(15,s);
mov(s,ebx);
mov(288,eax);
if(lo[ebx*4]=99 && s=15) then stdout.put("scimitar: ",(type uns32 eax),nl);
endif;
mov(16,s);
mov(s,ebx);
mov(142,eax);
if(lo[ebx*4]=99 && s=16) then stdout.put("longsword: ",(type uns32 eax),nl);
endif;
mov(17,s);
mov(s,ebx);
mov(384,eax);
if(lo[ebx*4]=99 && s=17) then stdout.put("broadsword: ",(type uns32 eax),nl);
endif;
mov(18,s);
mov(s,ebx);
mov(420,eax);
if(lo[ebx*4]=99 && s=18) then stdout.put("battleaxe: ",(type uns32 eax),nl);
endif;
mov(19,s);
mov(s,ebx);
mov(180,eax);
if(lo[ebx*4]=99 && s=19) then stdout.put("cleaver: ",(type uns32 eax),nl);
endif;
mov(20,s);
mov(s,ebx);
mov(86,eax);
if(lo[ebx*4]=99 && s=20) then stdout.put("armor: ",(type uns32 eax),nl);
endif;
mov(21,s);
mov(s,ebx);
mov(118,eax);
if(lo[ebx*4]=99 && s=21) then stdout.put("shield: ",(type uns32 eax),nl);
endif;
mov(22,s);
mov(s,ebx);
mov(150,eax);
if(lo[ebx*4]=99 && s=22) then stdout.put("helmet: ",(type uns32 eax),nl);
endif;
mov(23,s);
mov(s,ebx);
mov(74,eax);
if(lo[ebx*4]=99 && s=23) then stdout.put("gauntlets: ",(type uns32 eax),nl);
endif;
mov(24,s);
mov(s,ebx);
mov(212,eax);
if(lo[ebx*4]=99 && s=24) then stdout.put("cloak: ",(type uns32 eax),nl);
endif;
mov(25,s);
mov(s,ebx);
mov(475,eax);
if(lo[ebx*4]=99 && s=25) then stdout.put("ring: ",(type uns32 eax),nl);
endif;
mov(51,s);
mov(s,ebx);
mov(64,eax);
if(lo[ebx*4]=99 && s=51) then stdout.put("food: ",(type uns32 eax),nl);
endif;
mov(56,s);
mov(s,ebx);
mov(288,eax);
if(lo[ebx*4]=99 && s=56) then stdout.put("buckler: ",(type uns32 eax),nl);
endif;
mov(57,s);
mov(s,ebx);
mov(80,eax);
if(lo[ebx*4]=99 && s=57) then stdout.put("flute: ",(type uns32 eax),nl);
endif;
mov(59,s);
mov(s,ebx);
mov(24,eax);
if(lo[ebx*4]=99 && s=59) then stdout.put("apple: ",(type uns32 eax),nl);
endif;
mov(60,s);
mov(s,ebx);
mov(36,eax);
if(lo[ebx*4]=99 && s=60) then stdout.put("rations: ",(type uns32 eax),nl);
endif;
mov(66,s);
mov(s,ebx);
mov(420,eax);
if(lo[ebx*4]=99 && s=66) then stdout.put("horn: ",(type uns32 eax),nl);
endif;
mov(67,s);
mov(s,ebx);
mov(812,eax);
if(lo[ebx*4]=99 && s=67) then stdout.put("firewhip: ",(type uns32 eax),nl);
endif;
mov(68,s);
mov(s,ebx);
mov(246,eax);
if(lo[ebx*4]=99 && s=68) then stdout.put("anklet: ",(type uns32 eax),nl);
endif;
mov(69,s);
mov(s,ebx);
mov(88,eax);
if(lo[ebx*4]=99 && s=69) then stdout.put("boomerang: ",(type uns32 eax),nl);
endif;
console.setAttrs( console.white, console.blue );
stdout.puts("The clerk says,'Take your time.'" nl);
console.setAttrs( console.green, console.blue );
mov(g,eax);
stdout.puts("Gold: ");
console.setAttrs( console.yellow, console.blue );
stdout.put((type uns32 eax),nl);
jmp parse;
// -------------------------------------------------------
// Verb#17 (score)
// -------------------------------------------------------
verb17:
console.setAttrs( console.white, console.blue );
stdout.puts("You have the following attributes:" nl);
console.setAttrs( console.cyan, console.blue );
stdout.put("Hit Points: ",h,"   Experience: ",e,nl);
stdout.put("Gold: ",g,"   Food: ",fd,nl);
jmp parse;
// -------------------------------------------------------
// Verb#18 (help)
// --> Minor corrections made on 12/03/2004           /PAP
// -------------------------------------------------------
verb18:
console.setAttrs( console.white, console.blue );
stdout.puts("HLA Adventure is a text adventure. You play by entering in" nl);
stdout.puts("commands as follows (for example):" nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("get sword (or 'take sword')" nl);
stdout.puts("drop sword (or 'put sword')" nl);
stdout.puts("examine sword (or 'exa sword')" nl);
stdout.puts("wield sword" nl);
stdout.puts("unwield sword" nl);
stdout.puts("wear armor (or 'don armor')" nl);
stdout.puts("remove armor (or 'doff armor')" nl);
stdout.puts("eat food" nl);
stdout.puts("use rope" nl);
stdout.puts("play flute" nl nl);
console.setAttrs( console.green, console.blue );
stdout.puts("(Press any key...)" nl);
stdin.getc();
console.setAttrs( console.yellow, console.blue );
stdout.puts("kill paladin (or 'slay paladin')" nl);
stdout.puts("go north (or 'n',s,e,w,u,d)" nl);
stdout.puts("inventory (or 'inv')" nl);
stdout.puts("look" nl);
stdout.puts("score (or '?')" nl);
stdout.puts("enter portal" nl);
stdout.puts("help" nl);
stdout.puts("save (or 'store')" nl);
stdout.puts("quit" nl nl);
console.setAttrs( console.white, console.blue );
stdout.puts("Unfortunately, you can sometimes confuse the parser" nl);
stdout.puts("by accidentally entering in verbs or nouns it does not" nl);
stdout.puts("recognize. This is because 'str.index' searches for" nl);
stdout.puts("words throughout a string, regardless of location." nl); 
stdout.puts("Some additional verbs you might try include:" nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("talk (or 'talk to') and 'say'." nl);
jmp parse;
// -------------------------------------------------------
// Verb#19 (enter)
// -------------------------------------------------------
verb19:
if(r=14 && j=19) then
console.setAttrs( console.white, console.blue );
stdout.puts("You enter the vortex..." nl);
console.setAttrs( console.white, console.blue );
stdout.puts("You are split into a million pieces!" nl);
console.setAttrs( console.green, console.blue );
stdout.puts("Suddenly, you materialize on the other side..." nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("< Press any key to continue... >");
stdin.getc();
mov(r,eax);
mov(112,eax);
mov(eax,r);
jmp Room;
endif;
if(r=112 && j=19) then
console.setAttrs( console.white, console.blue );
stdout.puts("You enter the vortex..." nl);
console.setAttrs( console.magenta, console.blue );
stdout.puts("You are split into a million pieces!" nl);
console.setAttrs( console.green, console.blue );
stdout.puts("Suddenly, you materialize on the other side..." nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("< Press any key to continue... >");
stdin.getc();
mov(r,eax);
mov(145,eax);
mov(eax,r);
jmp Room;
endif;
if(r=145 && j=19) then
console.setAttrs( console.white, console.blue );
stdout.puts("You enter the vortex..." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("You are split into a million pieces!" nl);
console.setAttrs( console.green, console.blue );
stdout.puts("Suddenly, you materialize on the other side..." nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("< Press any key to continue... >");
stdin.getc();
mov(r,eax);
mov(14,eax);
mov(eax,r);
jmp Room;
endif;
console.setAttrs( console.red, console.blue );
stdout.puts("You can't enter that." nl);
jmp parse;
verb20:
// -------------------------------------------------------
// Verb#20 (save)
// -------------------------------------------------------
if(j=20) then
console.setAttrs( console.yellow, console.blue );
fileio.openNew("game.sav");
mov(eax,outFileVar);
fileio.put(outFileVar,g,nl,h,nl,e,nl,k,nl,qs,nl,r,nl,dam,nl);
fileio.put(outFileVar,lo[1*4],nl,lo[2*4],nl,lo[3*4],nl,lo[4*4],nl,lo[5*4],nl);
fileio.put(outFileVar,lo[6*4],nl,lo[7*4],nl,lo[8*4],nl,lo[9*4],nl,lo[10*4],nl);
fileio.put(outFileVar,lo[11*4],nl,lo[12*4],nl,lo[13*4],nl,lo[14*4],nl,lo[15*4],nl);
fileio.put(outFileVar,lo[16*4],nl,lo[17*4],nl,lo[18*4],nl,lo[19*4],nl,lo[20*4],nl);
fileio.put(outFileVar,lo[21*4],nl,lo[22*4],nl,lo[23*4],nl,lo[24*4],nl,lo[25*4],nl);
fileio.put(outFileVar,lo[26*4],nl,lo[27*4],nl,lo[28*4],nl,lo[29*4],nl,lo[30*4],nl);
fileio.put(outFileVar,lo[31*4],nl,lo[32*4],nl,lo[33*4],nl,lo[34*4],nl,lo[35*4],nl);
fileio.put(outFileVar,lo[36*4],nl,lo[37*4],nl,lo[38*4],nl,lo[39*4],nl,lo[40*4],nl);
fileio.put(outFileVar,lo[41*4],nl,lo[42*4],nl,lo[43*4],nl,lo[44*4],nl,lo[45*4],nl);
fileio.put(outFileVar,lo[46*4],nl,lo[47*4],nl,lo[48*4],nl,lo[49*4],nl,lo[50*4],nl);
fileio.put(outFileVar,lo[51*4],nl,lo[52*4],nl,lo[53*4],nl,lo[54*4],nl,lo[55*4],nl);
fileio.put(outFileVar,lo[56*4],nl,lo[57*4],nl,lo[58*4],nl,lo[59*4],nl,lo[60*4],nl);
fileio.put(outFileVar,lo[61*4],nl,lo[62*4],nl,lo[63*4],nl,lo[64*4],nl,lo[65*4],nl);
fileio.put(outFileVar,lo[66*4],nl,lo[67*4],nl,lo[68*4],nl,lo[69*4],nl,lo[70*4],nl);
fileio.put(outFileVar,lo[71*4],nl,lo[72*4],nl,lo[73*4],nl,lo[74*4],nl,lo[75*4],nl);
fileio.put(outFileVar,wf,nl);
fileio.put(outFileVar,tsk);
fileio.close(outFileVar);
stdout.puts("Game saved." nl);
endif;
jmp parse;
// -------------------------------------------------------
// Verb#21 (Eat)                                      /PAP
// -------------------------------------------------------
verb50:
console.setAttrs( console.red, console.blue );
if(s<>51 && s<>59 && s<>60) then
stdout.puts("You can't eat that." nl);
jmp parse;
endif;
if(s<>51) then
jmp verb59;
endif;
mov(51,ebx);
mov(lo[ebx*4],eax);
if(eax=r) then
stdout.puts("What, eat off the floor?!" nl);
jmp parse;
endif;
if(lo[ebx*4]<>-1) then
stdout.puts("That isn't here." nl);
jmp parse;
endif;
if(eax=-1 || s=51) then
console.setAttrs( console.white, console.blue );
stdout.puts("You eat the food..." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("You feel better!" nl);
mov(51,ebx);
mov(4,lo[ebx*4]);
mov(h,ebx);
add(100,ebx);
mov(ebx,h);
mov(250,ebx);
mov(ebx,fd);
jmp parse;
endif;
verb59:
if(s<>60)then
jmp verb60;
endif;
mov(60,ebx);
mov(lo[ebx*4],eax);
if(eax=-1 || eax=r || s=60) then
console.setAttrs( console.white, console.blue );
stdout.puts("You eat the rations..." nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("You feel much better!" nl);
mov(60,ebx);
mov(99,lo[ebx*4]);
mov(h,ebx);
add(200,ebx);
mov(ebx,h);
mov(300,ebx);
mov(ebx,fd);
jmp parse;
endif;
verb60:
mov(59,ebx);
mov(lo[ebx*4],eax);
if(eax=-1 || eax=r || s=59) then
console.setAttrs( console.white, console.blue );
stdout.puts("You eat the apple..." nl);
console.setAttrs( console.cyan, console.blue );
stdout.puts("You suddenly feel terribly ill!" nl);
stdout.puts("The apple was poisonous!" nl);
jmp frog;
endif;
stdout.puts("What?" nl);
jmp parse;
// -------------------------------------------------------
// Verb#25 (Talk/Say)                                 /PAP
// -------------------------------------------------------
verb30:
mov(s,ebx);
mov(lo[ebx*4],eax);
if(s<26 || s=41 || s=51 || s=55 || s=56 || s=57 || s=59 || s=60 || s=66 || s=67 || s=68 || s=69 || eax<>r) then
console.setAttrs( console.cyan, console.blue );
stdout.puts("Your voice echoes emptily." nl);
jmp parse;
endif;
if(s=26) then
stdout.puts("The clerk says,'Well, what will it be, soldier?'" nl);
jmp parse;
endif;
if(s=27) then
stdout.puts("The villager says,'Please, leave me alone.'" nl);
jmp parse;
endif;
if(s=28) then
stdout.puts("The wolf doesn't seem to understand you. It" nl);
stdout.puts("perks up a bit, though, when you mention the" nl);
stdout.puts("word 'food'." nl);
jmp parse;
endif;
if(s=29) then
stdout.puts("The warrior looks you over. He sighs deeply." nl);
stdout.puts("He says,'I suppose you want to cross this" nl);
stdout.puts("road, right? Well, only if you get past me" nl);
stdout.puts("first! Nothing free is easy, either!'" nl);
jmp parse;
endif;
if(s=30) then
stdout.puts("The specter laughs at you! He bellows: 'HAHAHAHA!'" nl);
stdout.puts("'What mortal do we have here?!'" nl);
stdout.puts("It begins to grow silent for a moment, pondering" nl);
stdout.puts("your entire being." nl);
stdout.puts("'Metal won't cut through me!' he laughs." nl);
jmp parse;
endif;
if(s=31) then
stdout.puts("The goblin ignores you." nl);
jmp parse;
endif;
if(s=32) then
stdout.puts("The elf sings a tune. 'LA TA LA! Tai shee! Alkai!'" nl);
stdout.puts("The elf stops singing for a moment and looks you" nl);
stdout.puts("over. It says,'I grew up in these woods, a long time" nl);
stdout.puts("before you foolish humans ever stepped foot here! Now" nl);
stdout.puts("you invade our space, cut down our trees and dry up every" nl);
stdout.puts("river and stream! Go away from here, and don't come back!'" nl);
jmp parse;
endif;
if(s=33) then
stdout.puts("The hobbit smiles at you. He says happily,'My name is Tarn.'" nl);
stdout.puts("'Normally we don't live in trees, but I fashioned myself a" nl);
stdout.puts("hut atop this one here. Quite simple, see? We don't have" nl);
stdout.puts("much time for fun and games. All we do is work, work, work!" nl);
stdout.puts("Isn't that what you do, too?'" nl);
jmp parse;
endif;
if(s=34) then
stdout.puts("The paladin laughs at you! He says,'What are you, some pathetic" nl);
stdout.puts("mortal?! Do us both a favor and grow a beard! Gain some weight!" nl);
stdout.puts("And strap on some armor, for God-sake! You won't succeed long" nl);
stdout.puts("in the Misty Mountains without a good buckler or helmet to" nl);
stdout.puts("protect you. And you'll need some sort of weapon, perhaps" nl);
stdout.puts("the firewhip, hmmm? Oh, I see, you've got SOME items on" nl);
stdout.puts("your body, but nothing I'd buy for a dime!'" nl);
jmp parse;
endif;
if(s=35) then
stdout.puts("The skeleton doesn't understand you. He howls,'NOTA ROTUNDA!'" nl);
stdout.puts("Suddenly, you feel different! It isn't a good different, either!" nl);
stdout.puts("You get a funny feeling in your stomach!" nl);
stdout.puts("You feel weaker!" nl);
mov(2,dam);
jmp parse;
endif;
if(s=36) then
stdout.puts("The vampire looks at you and laughs! He growls,'So it is you who" nl);
stdout.puts("has come to vanquish me! So be it, Knave! You won't get past me" nl);
stdout.puts("without your head on the floor, looking up at my sword!'" nl);
jmp parse;
endif;
if(s=37) then
stdout.puts("The sorcerer is too busy casting spells to be busy with talk." nl);
jmp parse;
endif;
if(s=38) then
stdout.puts("The dragon bellows,'I am the last of my kind. And here you are, a" nl);
stdout.puts("dirty human, come to slay me?! I breathe fire upon trees, rustling" nl);
stdout.puts("the bad kami out of the poison forests and valleys of this forgotten" nl);
stdout.puts("world. I keep my peace inside these caves, only to be disturbed by" nl);
stdout.puts("the wretched humans which pollute this landscape! I was once happy" nl);
stdout.puts("in my silence here, yet you come here to make me miserable! I won't" nl);
stdout.puts("allow it, Knave! Prepare to feel my wrath!!!'" nl);
stdout.puts("The dragon moves about angrily, stomping the floor!" nl);
jmp parse;
endif;
if(s=39) then
stdout.puts("The knight looks you over. He says,'Aren't you a bit short for a" nl);
stdout.puts("fighter? No matter. If you choose to face me, choose to die!'" nl);
stdout.puts("The knight wields his sword, standing at the ready." nl);
jmp parse;
endif;
if(s=40) then
stdout.puts("The barbarian swings at you! Luckily, he missed. He growls,'Who are" nl);
stdout.puts("you to bother ME inside these lands?! I am from the Clan of Desmoth," nl);
stdout.puts("to the north of this world! I don't like humans, the angry little" nl);
stdout.puts("bastards of a forgotten mother! Someday we will destroy the humans" nl);
stdout.puts("and enslave them for the Mines of Minos! You will regret your very" nl);
stdout.puts("life!!!'" nl);
stdout.puts("The barbarian looks angrily at you again. He says,'Let's finish this" nl);
stdout.puts("the human way -- by blood!'" nl);
jmp parse;
endif;
if(s=42) then
stdout.puts("The bear doesn't seem to understand you." nl);
jmp parse;
endif;
if(s=43) then
stdout.puts("The crab crawls about, ignoring your words." nl);
jmp parse;
endif;
if(s=44) then
stdout.puts("The crab crawls about, ignoring your words." nl);
jmp parse;
endif;
if(s=45) then
stdout.puts("The thief looks nervously at you. He says,'What do you want, Knave?'" nl);
stdout.puts("He makes a quick move for your wallet!" nl);
mov(g,eax);
sub(25,eax);
jmp parse;
endif;
if(s=46) then
stdout.puts("The werewolf doesn't seem to understand you. It smells food, however!" nl);
jmp parse;
endif;
if(s=47) then
stdout.puts("The butler looks you over thoroughly. He says,'I don't think you" nl);
stdout.puts("belong in this mansion! Shoo! Get out of here!'" nl);
jmp parse;
endif;
if(s=48) then
stdout.puts("Eddie looks up at you. He says,'I found my way inside of here by" nl);
stdout.puts("searching for a lost treasure. Unfortunately, my directions seem" nl);
stdout.puts("to have betrayed me again!'" nl);
jmp parse;
endif;
if(s=49) then
stdout.puts("The bum mumbles something about peace and flowers, before sinking" nl);
stdout.puts("into the sand with his foot!" nl);
jmp parse;
endif;
if(s=52) then
stdout.puts("The demigorgon growls,'So you humans have come here again to taste" nl);
stdout.puts("the blood of the spirit?! You'll have no such satisfaction from me!" nl);
stdout.puts("I was placed here to KEEP YOU OUT of the woods! Yet you scum, you" nl);
stdout.puts("earthly poison, inhabit these lands as if they belonged to you! Not" nl);
stdout.puts("a Godly world for you to poison, Knave!'" nl);
jmp parse;
endif;
if(s=53) then
stdout.puts("The monk stops praying. He looks up at you, curiously. He smiles" nl);
stdout.puts("briefly before saying,'Welcome to Shinden Villa. This is a peaceful" nl);
stdout.puts("villa away from the forests of this world. You will find only inner" nl);
stdout.puts("peace inside these walls, for you can take comfort in this inter-" nl);
stdout.puts("knowledge! All peace comes from within, and those who plant a seed" nl);
stdout.puts("shall take up root in the spring, and bare much fruit!'" nl);
jmp parse;
endif;
if(s=54) then
stdout.puts("He seems too busy to bother with you. He is too busy praying." nl);
jmp parse;
endif;
if(s=58) then
stdout.puts("The hellhound growls at you angrily! It barks,'So you humans have" nl);
stdout.puts("come here to do battle with hell itself! That's not our problem!" nl);
stdout.puts("The Devil has placed me here to guard this tomb and ensure that" nl);
stdout.puts("all humans are destroyed! I speak from the walls of hell when I" nl);
stdout.puts("say: GET OUT OF HERE, KNAVE!'" nl);
jmp parse;
endif;
if(s=61) then
stdout.puts("The spirit ignores you, only laughing your name!" nl);
stdout.puts("'BWHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHAHA!!!!!" nl);
jmp parse;
endif;
if(s=62) then
stdout.puts("The elfish woman looks at you curiously. She says,'Why do you come" nl);
stdout.puts("to these woods? What manner of magic hath driven you here? Do you" nl);
stdout.puts("seek the elder dragon, Elmar? Elmar rests in a cave deep within" nl);
stdout.puts("the bottom of this world! You will not find Elmar merely by looking" nl);
stdout.puts("at a map! No, Elmar can only be found FROM WITHIN!'" nl);
jmp parse;
endif;
if(s=63) then
stdout.puts("The lich laughs at you! He barks,'You are not allowed in these" nl);
stdout.puts("worlds! And yet you pollute this world like it was your own son!" nl);
stdout.puts("No one has given you that power, yet you take it as your world and" nl);
stdout.puts("seek death upon it still! That's NOT the way, Knave!!!'" nl);
stdout.puts("The lich seems very angry!" nl);
jmp parse;
endif;
if(s=64) then
stdout.puts("He nods briefly at you before passing. 'Move along, friend, I haven't" nl);
stdout.puts("got much time, you hear? Wait...I see that you are carrying something" nl);
stdout.puts("which I desire most! If you'll let me follow you, I can help you" nl);
stdout.puts("to defeat the evil within these cavern walls! For a price!'" nl);
stdout.puts("Tursk may follow you at any time now..." nl);
jmp parse;
endif;
if(s=65) then
stdout.puts("The wannabee says,'I am an infinite creature of these woods!'" nl);
jmp parse;
endif;
if(s=70) then
stdout.puts("The golem growls,'I shall smash you into a pulp!'" nl);
jmp parse;
endif;
if(s=71) then
stdout.puts("The wisp is silent, only moving about by light and energy." nl);
jmp parse;
endif;
if(s=72) then
stdout.puts("The goat says,'MAAAAAAHHHHHHH! MAAAAAAHHHHHHH!'" nl);
stdout.puts("The goat begins licking your hand." nl);
jmp parse;
endif;
if(s=73) then
stdout.puts("The kobold grins at you! He bellows,'You're not welcome" nl);
stdout.puts("in these parts! I've been here for a GREAT many years and" nl);
stdout.puts("here you come to disturb my keep! Well...we shall SEE how" nl);
stdout.puts("much further you go! To the death, Knave!!!'" nl);
stdout.puts("The kobold advances!" nl);
jmp parse;
endif;
if(s=74) then
stdout.puts("The eagle says nothing, only,'GREEECCCCCCHHHHHH!!!'" nl);
jmp parse;
endif;
if(s=75) then
stdout.puts("The unicorn stamps her foot. It begins looking at you with a" nl);
stdout.puts("most curious gaze! It reminds you of a horse, but without the" nl);
stdout.puts("wings of a bird and the horn of a beast! What magic brought this" nl);
stdout.puts("creature into this world is beyond imagination!" nl);
stdout.puts("The unicorn begins to drink at the pond." nl);
jmp parse;
endif;
// -------------------------------------------------------
// Load saved game command                            /PAP
// -------------------------------------------------------
vb2:
fileio.open("game.sav", fileio.r);
mov(eax,outFileVar);
fileio.get(outFileVar,g);
fileio.get(outFileVar,h);
fileio.get(outFileVar,e);
fileio.get(outFileVar,k);
fileio.get(outFileVar,qs);
fileio.get(outFileVar,r);
fileio.get(outFileVar,dam);
fileio.get(outFileVar,lo[1*4],lo[2*4],lo[3*4],lo[4*4],lo[5*4]);
fileio.get(outFileVar,lo[6*4],lo[7*4],lo[8*4],lo[9*4],lo[10*4]);
fileio.get(outFileVar,lo[11*4],lo[12*4],lo[13*4],lo[14*4],lo[15*4]);
fileio.get(outFileVar,lo[16*4],lo[17*4],lo[18*4],lo[19*4],lo[20*4]);
fileio.get(outFileVar,lo[21*4],lo[22*4],lo[23*4],lo[24*4],lo[25*4]);
fileio.get(outFileVar,lo[26*4],lo[27*4],lo[28*4],lo[29*4],lo[30*4]);
fileio.get(outFileVar,lo[31*4],lo[32*4],lo[33*4],lo[34*4],lo[35*4]);
fileio.get(outFileVar,lo[36*4],lo[37*4],lo[38*4],lo[39*4],lo[40*4]);
fileio.get(outFileVar,lo[41*4],lo[42*4],lo[43*4],lo[44*4],lo[45*4]);
fileio.get(outFileVar,lo[46*4],lo[47*4],lo[48*4],lo[49*4],lo[50*4]);
fileio.eof(outFileVar);
if(r<100) then
 jmp frog78;
endif;
cmp(al,0);
je frog77;
// -------------------------------------------------------
// Code below suggested on aoaprogramming             /PAP
// Modified on: 12/03/2004
// --> Will now load older saved game files from
// --> prior to version 2.26!                         /PAP
// -------------------------------------------------------
frog77:
//	enclosed entire thing in one try/entry loop as
// it should've been done.  this may break old saved
// games								/SEVAG
// ---------------------------------------------------------
try
	fileio.get(outFileVar,lo[51*4]);
      fileio.get(outFileVar,lo[52*4]);
	fileio.get(outFileVar,lo[53*4]);
	fileio.get(outFileVar,lo[54*4]);
	fileio.get(outFileVar,lo[55*4]);
	fileio.get(outFileVar,lo[56*4]);
	fileio.get(outFileVar,lo[57*4]);
	fileio.get(outFileVar,lo[58*4]);
	fileio.get(outFileVar,lo[59*4]);
	fileio.get(outFileVar,lo[60*4]);
	fileio.get(outFileVar,lo[61*4]);
	fileio.get(outFileVar,lo[62*4]);
	fileio.get(outFileVar,lo[63*4]);
	fileio.get(outFileVar,lo[64*4]);
	fileio.get(outFileVar,lo[65*4]);
	fileio.get(outFileVar,lo[66*4]);
	fileio.get(outFileVar,lo[67*4]);
	fileio.get(outFileVar,lo[68*4]);
	fileio.get(outFileVar,lo[69*4]);
	fileio.get(outFileVar,lo[70*4]);
	fileio.get(outFileVar,lo[71*4]);
	fileio.get(outFileVar,lo[72*4]);
	fileio.get(outFileVar,lo[73*4]);
	fileio.get(outFileVar,lo[74*4]);
	fileio.get(outFileVar,lo[75*4]);
	fileio.get(outFileVar,wf);
	fileio.get(outFileVar,tsk);
	
	// enter more above here
anyexception;	
endtry;
  
frog78:

fileio.close(outFileVar);
jmp mainlp; 
frog2:
// -------------------------------------------------------
// Game Over (Player wins!)                           /PAP
// -------------------------------------------------------
console.setAttrs( console.white, console.blue );
stdout.puts("You stand over the crumpled body of the menacing");
stdout.puts("dragon, your sword bathed in blood. It is a lonely");
stdout.puts("sight to behold a once great dragon reduced to so");
stdout.puts("little. In a way, you feel sorry for it, if only");
stdout.puts("for a moment. Besides, with the sun now over");
stdout.puts("the horizon, the taverns will be opening once");
stdout.puts("again. Why waste spilled dragon on the greatness");
stdout.puts("that is free beer?..." nl nl);
console.setAttrs( console.yellow, console.blue );
stdout.puts("<The End>" nl nl);
jmp kend;
// -------------------------------------------------------
infobar:
// -------------------------------------------------------
// Display Info Bar...called from "parse".            /PAP
// Legacy code gets commented out here, in favor of   /PAP
// Randy's Qput macro routines, which should do the   /PAP
// display of the "info bar" at the top of the screen /PAP
// (not an actual bar... :)                           /PAP
// -------------------------------------------------------
// console.gotoxy( 0,0 );  ZAP!
console.setAttrs( console.white, console.red );
qput(0,0,"                                                                                ",nl);
// console.gotoxy( 0,0 );  ZAP!
qput(0,0,"HLA Adventure - Version 3.40 : hp: ",h," g: ",g," exp: ",e,nl);
// console.gotoxy( 0,1 );  ZAP!
console.setAttrs( console.white, console.magenta );
qput(0,1,"                                                                                ",nl);
// console.gotoxy( 0,1 );  ZAP! (where's my beer?)
qput(0,1,"http://members.tripod.com/~panks/hlaadv.html" nl);
jmp parse2;
// -------------------------------------------------------
// Program End (via "quit" command)                   /PAP
// -------------------------------------------------------
kend:
stdin.getc();
end westf;
